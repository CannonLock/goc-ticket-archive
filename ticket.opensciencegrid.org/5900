<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5900] RSV problem with SRM running on a different port</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5900" method="post">
<div class="page-header">
    <h3><span class="muted">5900</span> / RSV problem with SRM running on a different port</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Jeff Porter</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">eng invesigate</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2009-03-03</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">RSV-Ops <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Suchandra Thapa <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/5900", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5900?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/5900?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20RSV%20problem%20with%20SRM%20running%20on%20a%20different%20port%20ISSUE%3D5900%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5900#1235763522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-02-27T19:38:42+00:00">Feb 27, 2009 07:38 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1235763522">&nbsp;</a></div><pre>Iwona Sakrejda at LBL tested this based on Jeff&#39;s request, and the change works fine.
Thanks for testing, Iwona!

See note below&#58;

--------
Sweet. Your SRM ping test is passing!

serviceURI&#58; osp4.lbl.gov&#58;60443
gatheredAt&#58; osp1.lbl.gov
summaryData&#58; OK
detailsData&#58; SRM server running on osp4.lbl.gov is alive and responding to the
srmping command.

This means, configure_osg.py is passing the port number just fine! -ag

On 2/27/2009 2&#58;33 PM, Iwona Sakrejda pondered&#58;
<font color='#7F7E6F'>&#62; Hi,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; You are right. I only changed the wrong port number to the right one,</font>
<font color='#7F7E6F'>&#62; but did not add the port number to srm_host. Maybe the port should</font>
<font color='#7F7E6F'>&#62; be always there? Even if standard? Then changes would be easier.</font>
<font color='#7F7E6F'>&#62; Anyway, I added the port and restarted services at&#58;</font>
<font color='#7F7E6F'>&#62; [root@osp1 monitoring]# date</font>
<font color='#7F7E6F'>&#62; Fri Feb 27 11&#58;31&#58;10 PST 2009</font>
<font color='#7F7E6F'>&#62; (or maybe a minute earlier)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The following looks reassuring...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; INFO&#58; Creating .sub files for RSV probes of type SRM</font>
<font color='#7F7E6F'>&#62;          for URI&#58; osp4.lbl.gov&#58;60443 (host&#58; osp4.lbl.gov)</font>
<font color='#7F7E6F'>&#62; INFO&#58; Re-using metrics config file for osp4.lbl.gov</font>
<font color='#7F7E6F'>&#62;  /opt/osg/itb-0.9.2/osg-rsv/config/osp4.lbl.gov_metrics.conf</font>
<font color='#7F7E6F'>&#62;  Existing settings like on/off and metric intervals will be re-used.</font>
<font color='#7F7E6F'>&#62;  Any new metrics found in probe set will be added with their default settings.</font>
<div id='show_182005950' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_182005950'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Iwona</font>

Closing this ticket.-ag
</div><script type='text/javascript'>
        $('#show_182005950').click(function() {
            $('#detail_182005950').slideDown("normal");
            $('#show_182005950').hide();
            $('#hide_182005950').show();
        });
        $('#hide_182005950').click(function() {
            $('#detail_182005950').slideUp();
            $('#hide_182005950').hide();
            $('#show_182005950').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5900#1235658635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2009-02-26T14:30:35+00:00">Feb 26, 2009 02:30 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1235658635">&nbsp;</a></div><pre>Jeff &amp; Suchandra,

This bug has been fixed in the latest ITB release (0.9.2). Have you had a chance to
test it already?

Suchandra, can you confirm that configure_osg.py allows serviceUris in the format
&#34;fqdn[&#58;port/service] within config.init? If it does, then we&#39;re all set since the RSV
configure script already accepts such a URI.

I&#39;ll keep this ticket open till March 2nd to see if you have any comments/questions.

Cheers,
Arvind</pre></div><div class='update_description'><i onclick="document.location='5900#1228312581'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-12-03T13:56:21+00:00">Dec 3, 2008 01:56 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1228312581">&nbsp;</a></div><pre>Setting NAD to Dec 20th. Hope to have this fixed by then. -ag</pre></div><div class='update_description'><i onclick="document.location='5900#1225395249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-30T19:34:09+00:00">Oct 30, 2008 07:34 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1225395249">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; FootPrints Ticket Description&#58;</font>
<font color='#7F7E6F'>&#62; I like having no connection to configure-osg.py with a solution that is</font>
<font color='#7F7E6F'>&#62; &#34;srmhostname&#58;####&#34; - I assume the default port will be used if none is</font>
<font color='#7F7E6F'>&#62; supplied.   Suchandra & I  can discuss whether to drop this as a tracked</font>
<font color='#7F7E6F'>&#62; issue, but I also want to in the loop to help test the fix.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; thanks, Jeff</font>
<font color='#7F7E6F'>&#62;</font>

I&#39;ve added Suchandra to this ticket.

Ideally, he&#39;d be accepting the same format as RSV accepts. i.e
hostname&#58;port/service. We landed on this based on existing standards
used in a lot of systems that need a URI.

The RSV configure script (aka configure_osg_rsv) is already built to
accept the above format of host, port, service name; as are the probes.

So in summary, ideally, Suchandra&#39;s configure_osg.py would accept&#58;

/ce_uri = fqdn[&#58;port/service]
gridftp_uri ...
...
/

And yes, if only the fqdn is specified, and no optional port/service
name is specified, the defaults would be used all the way in the chain
w.r.t RSV.

Ok with that clarified, now coming to the SRM probes, I will fix that in
the near future, and let you know so you can test, etc.

Cheers,
Arvind</pre></div><div class='update_description'><i onclick="document.location='5900#1225394909'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-30T19:28:29+00:00">Oct 30, 2008 07:28 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1225394909">&nbsp;</a></div><pre>Added Suchandra as assignee. --Arvind</pre></div><div class='update_description'><i onclick="document.location='5900#1225386790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-30T17:13:10+00:00">Oct 30, 2008 05:13 PM UTC</time> by <b>Jeff Porter</b><a class="anchor" name="1225386790">&nbsp;</a></div><pre>I like having no connection to configure-osg.py with a solution that is
&#34;srmhostname&#58;####&#34; - I assume the default port will be used if none is
supplied.   Suchandra & I  can discuss whether to drop this as a tracked
issue, but I also want to in the loop to help test the fix.

thanks, Jeff

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5900#1225377609'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-30T14:40:09+00:00">Oct 30, 2008 02:40 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1225377609">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; FootPrints Ticket Description&#58;</font>
<font color='#7F7E6F'>&#62; Hi Arvind,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Yes, I know.  Suchandra (and I) wanted to make sure it was being tracked</font>
<font color='#7F7E6F'>&#62; with a issue-# so he could also implement it on the configure-osg.py side.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; thanks, Jeff</font>
<font color='#7F7E6F'>&#62;</font>

I am not sure what the connection to configure_osg.py on this issue is.
All RSV probes except the SRM ones (which someone else wrote, and I
missed catching it) accept alternate ports (and service names) already.
For example&#58; foo.bar.edu&#58;2811/uberftp

Suchandra should be accepting such a config already ... or if he&#39;s not,
then I suggest a separate ticket for it. Let&#39;s be careful not to mix two
different issues.

Arvind</pre></div><div class='update_description'><i onclick="document.location='5900#1225377249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-30T14:34:09+00:00">Oct 30, 2008 02:34 PM UTC</time> by <b>Jeff Porter</b><a class="anchor" name="1225377249">&nbsp;</a></div><pre>Hi Arvind,

Yes, I know.  Suchandra (and I) wanted to make sure it was being tracked
with a issue-# so he could also implement it on the configure-osg.py side.

thanks, Jeff

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='5900#1225374549'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-30T13:49:09+00:00">Oct 30, 2008 01:49 PM UTC</time> by <b>Arvind Gopu</b><a class="anchor" name="1225374549">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Updated title to &#34;RSV problem with SRM running on a different port&#34;. --Tim</font>
<font color='#7F7E6F'>&#62;</font>

Jeff,

This is a known issue, and we have it in our list of bug-fixes to do. I
am hoping the next release of the RSV probes will include this fix. I
think I mentioned this to you in the previous ITB call.

Arvind</pre></div><div class='update_description'><i onclick="document.location='5900#1225312871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-29T20:41:11+00:00">Oct 29, 2008 08:41 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1225312871">&nbsp;</a></div><pre>Updated title to &#34;RSV problem with SRM running on a different port&#34;. --Tim</pre></div><div class='update_description'><i onclick="document.location='5900#1225312816'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-29T20:40:16+00:00">Oct 29, 2008 08:40 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1225312816">&nbsp;</a></div><pre>Hi. I am assigning this ticket to Arvind and RSV-Ops. It may need to include the VDT or other groups,
but I will let Arvind make that distinction.

Thank you,

Tim</pre></div><div class='update_description'><i onclick="document.location='5900#1225304709'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-10-29T18:25:09+00:00">Oct 29, 2008 06:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1225304709">&nbsp;</a></div><pre>Queues = Grid

Submitter Name&#58; Jeff Porter

Application System&#58; rjporter@....

Your Resource/Service Name&#58;
LBNL_VTB

Your VO Support Center&#58;
LBNL_DSD-support

Your Phone Number&#58;
510-486-5009

Description of Problem&#58;
RSV problem with SRM running on a different port.  The RSV base perl module has the 8443 port hardwired and there is currently no way to input a different port number.  The current work around is to edit the RSV module at the site which must be redone with each update of the RSV base package. We request that there be a external way of overriding the default port and that be exposed to the configure-osg.py</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5900">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 5900});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
