<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[5232] dCache - Third-party transfer failure between dCache and BestMan based SE using srmcp</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=5232" method="post">
<div class="page-header">
    <h3><span class="muted">5232</span> / dCache - Third-party transfer failure between dCache and BestMan based SE using srmcp</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Neha Sharma</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-07-23</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Rob Quick <span class="muted"> / OSG GOC Management</span></div><div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/5232", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='5232#1216841994'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-23T19:39:54+00:00">Jul 23, 2008 07:39 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1216841994">&nbsp;</a></div><pre>Thanks Paul, that did indeed resolve the problem.  I was able to
change my BeStMan server to use different globus tcp ports, so I no
longer have to use the globus_tcp_port_range as a part of the srmcp
call.  However, it does appear that third party transfers between
BeStMan &amp; dCache servers requires -pushmode=true in both directions.

Curious, but solved!

Thanks!
Malina

On Fri, Jul 18, 2008 at 2&#58;49 PM, Paul Rossman &#60;rossman@....&#62; wrote&#58;
Hi Malina,

Adding -globus_tcp_port_range=20000&#58;25000 does the trick.

srmcp -2 -debug=TRUE -pushmode=true -globus_tcp_port_range=20000&#58;25000
&#34;<a href='srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt&#34' target='_blank' rel='nofollow'>srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt&#34</a>;
&#34;<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test-paul.txt4&#34' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test-paul.txt4&#34</a>;

cmslpc02&#58;~ rossman$ srmcp -2 -debug=TRUE -pushmode=true
-globus_tcp_port_range=20000&#58;25000
&#34;<a href='srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt&#34' target='_blank' rel='nofollow'>srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt&#34</a>;
&#34;<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test-paul.txt4&#34' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test-paul.txt4&#34</a>;
WARNING&#58; SRM_PATH is defined, which might cause a wrong version of srm
client to be executed
WARNING&#58; SRM_PATH=/opt/d-cache/srm
Storage Resource Manager (SRM) CP Client version 2.0
Copyright (c) 2002-2006 Fermi National Accelerator Laboratory

SRM Configuration&#58;
debug=true
gsissl=true
help=false
pushmode=true
<div id='show_591514270' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_591514270'>userproxy=true
buffer_size=131072
tcp_buffer_size=0
streams_num=10
config_file=config.xml
glue_mapfile=conf/SRMServerV1.map
webservice_path=srm/managerv2
webservice_protocol=https
gsiftpclinet=globus-url-copy
protocols_list=http,gsiftp
save_config_file=null
srmcphome=..
urlcopy=sbin/urlcopy.sh
x509_user_cert=/home/timur/k5-ca-proxy.pem
x509_user_key=/home/timur/k5-ca-proxy.pem
x509_user_proxy=/tmp/x509up_u42682
x509_user_trusted_certificates=/etc/grid-security/certificates
globus_tcp_port_range=20000&#58;25000
gss_expected_name=null
storagetype=permanent
retry_num=20
retry_timeout=10000
wsdl_url=null
use_urlcopy_script=false
connect_to_wsdl=false
delegate=true
full_delegation=true
server_mode=passive
srm_protocol_version=2
request_lifetime=86400
access latency=null
overwrite mode=null
priority=0

from[0]=<a href='srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt' target='_blank' rel='nofollow'>srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt</a>

to=<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test-paul.txt4' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test-paul.txt4</a>

Fri Jul 18 13&#58;21&#58;33 CDT 2008&#58; In SRMClient ExpectedName&#58; host
Fri Jul 18 13&#58;21&#58;33 CDT 2008&#58; SRMClient(https,srm/managerv2,true)
SRMClientV2 &#58; user credentials are&#58; /DC=org/DC=doegrids/OU=People/CN=Paul
Rossman 364403
SRMClientV2 &#58; connecting to srm at
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
SRMClientV2 &#58; srmCopy , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;21&#58;36 CDT 2008&#58;  srm returned requestToken = -2144186980
Fri Jul 18 13&#58;21&#58;36 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;21&#58;41 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;21&#58;46 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;21&#58;51 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;21&#58;56 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;22&#58;01 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;22&#58;07 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;22&#58;12 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;22&#58;17 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;22&#58;31 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;22&#58;36 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;22&#58;41 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2
Fri Jul 18 13&#58;22&#58;46 CDT 2008&#58;  copying of
<a href='srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt' target='_blank' rel='nofollow'>srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt</a> to
<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test-paul.txt4' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test-paul.txt4</a>
succeeded
Fri Jul 18 13&#58;22&#58;46 CDT 2008&#58; no more pending transfers, breaking the loop

On Jul 16, 2008, at 2&#58;58 PM, Malina Kirn wrote&#58;

OK, thanks Alex &amp; Neha, I&#39;ll check with the FNAL folks and see why
these third party gsiftp transfers are failing.  Somehow the problem
must be confined to a special set of circumstances, because afaik,
FNAL didn&#39;t suddenly stop serving files via PhEDEx, which uses third
party transfers.

Thanks again for helping me track this down!
Malina

On Wed, Jul 16, 2008 at 3&#58;47 PM, Alex Sim &#60;asim@....&#62; wrote&#58;

Okay, let me take my last two emails back.
The problematic gridftp server was at FNAL.

I just tested the similar globus-url-copy between two globus gridftp
servers
at NERSC and UMD, and it worked.

FNAL dCache gsiftp server prevents 3rd party gsiftp file transfers with
globus gridftp servers.  And again, this has nothing to do with SRMs.

dmx09.[131]% globus-url-copy -dbg
<a href='gsiftp&#58;//pdsfgrid1.nersc.gov//tmp/test.data' target='_blank' rel='nofollow'>gsiftp&#58;//pdsfgrid1.nersc.gov//tmp/test.data</a>
<a href='gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3' target='_blank' rel='nofollow'>gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3</a>

debug&#58; response from <a href='gsiftp&#58;//dmx09.lbl.gov//tmp/test.data&#58' target='_blank' rel='nofollow'>gsiftp&#58;//dmx09.lbl.gov//tmp/test.data&#58</a>;
150 Begining transfer.

debug&#58; response from <a href='gsiftp&#58;//dmx09.lbl.gov//tmp/test.data&#58' target='_blank' rel='nofollow'>gsiftp&#58;//dmx09.lbl.gov//tmp/test.data&#58</a>;
226 Transfer Complete.

debug&#58; response from
<a href='gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3&#58' target='_blank' rel='nofollow'>gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3&#58</a>;
150 Begining transfer.

debug&#58; response from
<a href='gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3&#58' target='_blank' rel='nofollow'>gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3&#58</a>;
226 Transfer Complete.

debug&#58; operation complete

-- Alex
asim at lbl dot gov

On 7/16/08 12&#58;29 PM, Alex Sim wrote&#58;

By the way, we have the same behavior on our gsiftp server&#58;

debug&#58; response from <a href='gsiftp&#58;//fgitbse.fnal.gov&#58;2811///asim.test&#58' target='_blank' rel='nofollow'>gsiftp&#58;//fgitbse.fnal.gov&#58;2811///asim.test&#58</a>;
200 PORT command successful

debug&#58; response from <a href='gsiftp&#58;//dmx09.lbl.gov//tmp/asim.fnal.test&#58' target='_blank' rel='nofollow'>gsiftp&#58;//dmx09.lbl.gov//tmp/asim.fnal.test&#58</a>;
500 Command failed. &#58; globus_xio_gsi&#58; Token size exceeds limit. Usually
happens when someone tries to establish a insecure connection with a
secure
endpoint, e.g. when someone sends plain HTTP to a HTTPS endpoint without
first establishing a SSL session.

-- Alex
asim at lbl dot gov

On 7/16/08 12&#58;20 PM, Alex Sim wrote&#58;

I believe there is a configuration problem for 3rd party gsiftp
transfer
on the gridftp server at UMD. See if you can enable 3rd party gsiftp
file
transfers...

% globus-url-copy -dbg <a href='gsiftp&#58;//fgitbse.fnal.gov&#58;2811///asim.test' target='_blank' rel='nofollow'>gsiftp&#58;//fgitbse.fnal.gov&#58;2811///asim.test</a>
<a href='gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3' target='_blank' rel='nofollow'>gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3</a>

.....

debug&#58; response from
<a href='gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3&#58' target='_blank' rel='nofollow'>gsiftp&#58;//HEPCMS-0.UMD.EDU//data/se/store/asim.test.3&#58</a>;
500-Command failed. &#58;
globus_xio_gsi.c&#58;globus_l_xio_gsi_read_token_cb&#58;1058&#58;
500-Token size exceeds limit. Usually happens when someone tries to
establish a insecure connection with a secure endpoint, e.g. when
someone
sends plain HTTP to a HTTPS endpoint without first establishing a SSL
session.
500 End.

-- Alex
asim at lbl dot gov

On 7/16/08 11&#58;59 AM, Neha Sharma wrote&#58;

Hi

Since I do not have access on the CMS SE, I tried transfers against my
own dCache based SE (running on gridworks cluster at FNAL).

The third-party transfer using Bestman SE as source worked for me

(1) From BestMan based SE to dCache based SE

/opt/d-cache/srm/bin/srmcp -2 -debug -access_latency=ONLINE

<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/keep_for_tests' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/keep_for_tests</a>

<a href='srm&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/nehaepr1111' target='_blank' rel='nofollow'>srm&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/nehaepr1111</a>

...
...
Wed Jul 16 13&#58;48&#58;33 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2
Wed Jul 16 13&#58;48&#58;38 CDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2
Wed Jul 16 13&#58;48&#58;44 CDT 2008&#58;  copying of

<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/keep_for_tests' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/keep_for_tests</a>
to

<a href='srm&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/nehaepr1111' target='_blank' rel='nofollow'>srm&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/nehaepr1111</a>
succeeded
Wed Jul 16 13&#58;48&#58;44 CDT 2008&#58; no more pending transfers, breaking the
loop

(2) However, the write to Bestman SE failed

/opt/d-cache/srm/bin/srmcp -2 -debug -access_latency=ONLINE

<a href='srm&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/nehaepr1111' target='_blank' rel='nofollow'>srm&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/nehaepr1111</a>
<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/nehatest' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/nehatest</a>

This command failed with following error&#58;

SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server
Wed Jul 16 13&#58;54&#58;41 CDT 2008&#58; sleeping 5 seconds ...
...
repeated several times
...
Wed Jul 16 13&#58;54&#58;47 CDT 2008&#58;

copyFileRequest[<a href='srm&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/nehaepr1111' target='_blank' rel='nofollow'>srm&#58;//gwdca04.fnal.gov&#58;8443/srm/managerv2?SFN=/pnfs/fnal.gov/data/sdss/nehaepr1111</a>
,
<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/nehatest' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/nehatest</a>]
status=SRM_FAILURE explanation=Third party transfer failed.
Reason&#58;org.globus.ftp.exception.ServerException&#58; Server refused
performing
the request. Custom message&#58;  (error code 1) [Nested exception
message&#58;
Custom message&#58; Unexpected reply&#58; 500-Command failed. &#58;
globus_xio_gsi.c&#58;globus_l_xio_gsi_read_token_cb&#58;1058&#58;
500-Token size exceeds limit. Usually happens when someone tries to
establish a insecure connection with a secure endpoint, e.g. when
someone
sends plain HTTP to a HTTPS endpoint without first establishing a SSL
session.
500 End.] [Nested exception is
org.globus.ftp.exception.UnexpectedReplyCodeException&#58;  Custom
message&#58;
Unexpected reply&#58; 500-Command failed. &#58;
globus_xio_gsi.c&#58;globus_l_xio_gsi_read_token_cb&#58;1058&#58;
500-Token size exceeds limit. Usually happens when someone tries to
establish a insecure connection with a secure endpoint, e.g. when
someone
sends plain HTTP to a HTTPS endpoint without first establishing a SSL
session.
500 End.]
Wed Jul 16 13&#58;54&#58;47 CDT 2008&#58; java.io.IOException&#58; srmCopy update
failed, status &#58; SRM_FAILURE explanation=null
Wed Jul 16 13&#58;54&#58;47 CDT 2008&#58; Releasing all remaining file requests
SRMClientV2 &#58; srmAbortFiles , contacting service
httpg&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server
Wed Jul 16 13&#58;54&#58;49 CDT 2008&#58; srmAbortFiles status code=SRM_SUCCESS
srm copy of at least one file failed or not completed
Wed Jul 16 13&#58;54&#58;49 CDT 2008&#58; stopping
Wed Jul 16 13&#58;54&#58;49 CDT 2008&#58; Releasing all remaining file requests
SRMClientV2 &#58; srmAbortFiles , contacting service
httpg&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server
Wed Jul 16 13&#58;54&#58;50 CDT 2008&#58; srmAbortFiles status code=SRM_SUCCESS
-bash-3.00$

Do you see anything in your srm logs related to this request?

Also, since the read from BestMan SE worked for me, there could be
something specific on CMS SE that is causing the read failure..

-Neha

On Jul 16, 2008, at 10&#58;55 AM, Malina Kirn wrot
</div><script type='text/javascript'>
        $('#show_591514270').click(function() {
            $('#detail_591514270').slideDown("normal");
            $('#show_591514270').hide();
            $('#hide_591514270').show();
        });
        $('#hide_591514270').click(function() {
            $('#detail_591514270').slideUp();
            $('#hide_591514270').hide();
            $('#show_591514270').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='5232#1216226015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-07-16T16:33:35+00:00">Jul 16, 2008 04:33 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1216226015">&nbsp;</a></div><pre>Hello again,

I&#39;ve encountered the most unusual failure mode of srmcp.  srmcp calls
fail when both the source and destination are using the srm&#58;// (rather
than file&#58;//) prefix, and when one server is dCache and the other is
BeStMan.

For example, the following calls work (HEPCMS is a BeStMan server)&#58;
srmcp -2 -access_latency=ONLINE srm&#58;//&#60;HEPCMS&#62; srm&#58;//&#60;HEPCMS&#62;
srmcp -2 srm&#58;//&#60;FNAL&#62; srm&#58;//&#60;FNAL&#62;
srmcp -2 srm&#58;//&#60;FNAL&#62; file&#58;//&#60;HEPCMS&#62;
srmcp -2 file&#58;//&#60;HEPCMS&#62; srm&#58;//&#60;FNAL&#62;

And the following do not work&#58;
srmcp -2 srm&#58;//&#60;FNAL&#62; srm&#58;//&#60;HEPCMS&#62;
srmcp -2 -access_latency=ONLINE srm&#58;//&#60;HEPCMS&#62; srm&#58;//&#60;FNAL&#62;

I was unable to verify if these calls work&#58;
srmcp -2 -access_latency=ONLINE srm&#58;//&#60;HEPCMS&#62; file&#58;//&#60;FNAL&#62;
srmcp -2 -access_latency=ONLINE file&#58;//&#60;FNAL&#62; srm&#58;//&#60;HEPCMS&#62;
because the FNAL srm client is a bit older and doesn&#39;t accept the
access_latency parameter, required for transfers of files from (not
required for transfers to) BeStMan servers.  However, I suspect they
would work.

I&#39;m using the dcache-srmclient v1.8.0-15p8 at HEPCMS.  The error
message is not terribly helpful, but I&#39;ve copied it at the end.  It is
possible there is a problem with my local srm-client configuration
file as well, also at the end.

If you would like to use a file at a BeStMan server for testing
purposes, I&#39;ll keep this file available&#58;
<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/keep_for_tests' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/keep_for_tests</a>
and you&#39;re welcome to transfer various test files to the
/data/se/store directory.
<div id='show_1524898746' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1524898746'>
Any suggestions?

Malina Kirn
University of Maryland

--------------------------------------------------

The error message&#58;

# srmcp -2 -debug=TRUE
&#34;<a href='srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt&#34' target='_blank' rel='nofollow'>srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt&#34</a>;
&#34;<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test13.txt&#34' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test13.txt&#34</a>;
Storage Resource Manager (SRM) Client version 2.0.9
Copyright (c) 2002-2008 Fermi National Accelerator Laboratory

SRM Configuration&#58;
debug=true
gsissl=true
help=false
pushmode=false
userproxy=true
buffer_size=131072
tcp_buffer_size=0
streams_num=1
config_file=/share/apps/osg-0.8.0/srm-v1-client/etc/config-2.xml
glue_mapfile=/share/apps/osg-0.8.0/srm-v1-client/conf/SRMServerV1.map
webservice_path=srm/managerv2
webservice_protocol=https
gsiftpclinet=globus-url-copy
protocols_list=http,gsiftp
save_config_file=null
srmcphome=/share/apps/osg-0.8.0/srm-v1-client
urlcopy=sbin/urlcopy.sh
x509_user_cert=
x509_user_key=
x509_user_proxy=/state/partition1/phedex/current/gridcert/proxy.cert
x509_user_trusted_certificates=/share/apps/osg-0.8.0/globus/TRUSTED_CA
globus_tcp_port_range=null
gss_expected_name=null
storagetype=permanent
retry_num=20
retry_timeout=10000
wsdl_url=null
use_urlcopy_script=false
connect_to_wsdl=false
delegate=true
full_delegation=true
server_mode=passive
srm_protocol_version=2
request_lifetime=86400
access latency=null
overwrite mode=null
priority=0
from[0]=<a href='srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt' target='_blank' rel='nofollow'>srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt</a>
to=<a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test13.txt' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test13.txt</a>

Wed Jul 16 11&#58;49&#58;18 EDT 2008&#58; In SRMClient ExpectedName&#58; host
Wed Jul 16 11&#58;49&#58;18 EDT 2008&#58; SRMClient(https,srm/managerv2,true)
SRMClientV2 &#58; user credentials are&#58;
/DC=org/DC=doegrids/OU=People/CN=Malina Aurelia Kirn 861793
SRMClientV2 &#58; connecting to srm at httpg&#58;//HEPCMS-0.UMD.EDU&#58;8443/srm/v2/server
SRMClientV2 &#58; srmCopy , contacting service
httpg&#58;//HEPCMS-0.UMD.EDU&#58;8443/srm/v2/server
Wed Jul 16 11&#58;49&#58;22 EDT 2008&#58;  srm returned requestToken = uscms01&#58;813(COPY)
Wed Jul 16 11&#58;49&#58;22 EDT 2008&#58; sleeping 5 seconds ...
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//HEPCMS-0.UMD.EDU&#58;8443/srm/v2/server
Wed Jul 16 11&#58;49&#58;28 EDT 2008&#58; sleeping 5 seconds ...
...... repeats sleeping 5 seconds for a while .......
SRMClientV2 &#58; srmStatusOfCopyRequest , contacting service
httpg&#58;//HEPCMS-0.UMD.EDU&#58;8443/srm/v2/server
Wed Jul 16 11&#58;54&#58;09 EDT 2008&#58; srmCopy update failed, status &#58;
SRM_FAILURE explanation=null
Wed Jul 16 11&#58;54&#58;09 EDT 2008&#58;
copyFileRequest[<a href='srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt' target='_blank' rel='nofollow'>srm&#58;//cmssrm.fnal.gov&#58;8443/srm/managerv2?SFN=/resilient/kirn/junk.txt</a>
, <a href='srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test13.txt' target='_blank' rel='nofollow'>srm&#58;//hepcms-0.umd.edu&#58;8443/srm/v2/server?SFN=/data/se/store/test13.txt</a>]
status=SRM_FAILURE explanation=Third party transfer failed.
Reason&#58;org.globus.ftp.exception.ServerException&#58; Server refused
performing the request. Custom message&#58;  (error code 1) [Nested
exception message&#58;  Custom message&#58; Unexpected reply&#58; 500-Command
failed. &#58; globus_xio_gsi.c&#58;globus_l_xio_gsi_read_token_cb&#58;1183&#58;
500-gss_accept_sec_context failed.
500-GSS Major Status&#58; Communications Error
500-accept_sec_context.c&#58;gss_accept_sec_context&#58;163&#58;
500-Error with GSS token
500-globus_i_gsi_gss_utils.c&#58;globus_i_gsi_gss_put_token&#58;668&#58;
500-Error with GSS token&#58; The input token has an invalid length of&#58; 0
500-
500 End.] [Nested exception is
org.globus.ftp.exception.UnexpectedReplyCodeException&#58;  Custom
message&#58; Unexpected reply&#58; 500-Command failed. &#58;
globus_xio_gsi.c&#58;globus_l_xio_gsi_read_token_cb&#58;1183&#58;
500-gss_accept_sec_context failed.
500-GSS Major Status&#58; Communications Error
500-accept_sec_context.c&#58;gss_accept_sec_context&#58;163&#58;
500-Error with GSS token
500-globus_i_gsi_gss_utils.c&#58;globus_i_gsi_gss_put_token&#58;668&#58;
500-Error with GSS token&#58; The input token has an invalid length of&#58; 0
500-
500 End.]
Wed Jul 16 11&#58;54&#58;09 EDT 2008&#58; java.io.IOException&#58; srmCopy update
failed, status &#58; SRM_FAILURE explanation=null
Wed Jul 16 11&#58;54&#58;09 EDT 2008&#58; Releasing all remaining file requests
SRMClientV2 &#58; srmAbortFiles , contacting service
httpg&#58;//HEPCMS-0.UMD.EDU&#58;8443/srm/v2/server
Wed Jul 16 11&#58;54&#58;10 EDT 2008&#58; srmAbortFiles status code=SRM_SUCCESS
srm copy of at least one file failed or not completed
Wed Jul 16 11&#58;54&#58;10 EDT 2008&#58; stopping
Wed Jul 16 11&#58;54&#58;10 EDT 2008&#58; Releasing all remaining file requests
SRMClientV2 &#58; srmAbortFiles , contacting service
httpg&#58;//HEPCMS-0.UMD.EDU&#58;8443/srm/v2/server
Wed Jul 16 11&#58;54&#58;10 EDT 2008&#58; srmAbortFiles status code=SRM_SUCCESS

--------------------------------------------------

My local srm-client configuration file
(config_file=/share/apps/osg-0.8.0/srm-v1-client/etc/config-2.xml)&#58;

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;&#60;srm-configuration&#62;

&#60;!-- true or false--&#62;
&#60;debug&#62; false &#60;/debug&#62;

&#60;!-- path to srmcp home directory --&#62;
&#60;srmcphome&#62; /share/apps/osg-0.8.0/srm-v1-client &#60;/srmcphome&#62;

&#60;!-- &#34;globus-url-copy&#34; or &#34;kftp&#34;--&#62;
&#60;gsiftpclient&#62; globus-url-copy &#60;/gsiftpclient&#62;

&#60;!--true if use http over gsi over ssl for SOAP invocations
or false to use plain http (no authentication or encryption)--&#62;
&#60;gsissl&#62; true &#60;/gsissl&#62;

&#60;!-- path to the &#34;glue&#34; mapfile--&#62;
&#60;mapfile&#62;
/share/apps/osg-0.8.0/srm-v1-client/conf/SRMServerV1.map &#60;/mapfile&#62;

&#60;!-- this could be http or https--&#62;
&#60;webservice_protocol&#62; https &#60;/webservice_protocol&#62;

&#60;!-- if true, use urlcopy script,
otherwise use java native copiers--&#62;
&#60;use_urlcopy_script&#62; false &#60;/use_urlcopy_script&#62;

&#60;!-- path to the urlcopy script --&#62;
&#60;urlcopy&#62; sbin/urlcopy.sh &#60;/urlcopy&#62;

&#60;!--nonnegative integer, 2048 by default--&#62;
&#60;buffer_size&#62; 131072 &#60;/buffer_size&#62;

&#60;!--integer, 0 by default (which means do not set
tcp_buffer_size at all)--&#62;
&#60;tcp_buffer_size&#62; 0 &#60;/tcp_buffer_size&#62;

&#60;!--integer, 10 by default--&#62;
&#60;streams_num&#62; 1 &#60;/streams_num&#62;

&#60;!-- comma separated list of protocol names, &#34;http,gridftp&#34; by
default--&#62;
&#60;protocols&#62; http,gsiftp &#60;/protocols&#62;

&#60;!-- true for pushmode and false for pullmode, false by default--&#62;
&#60;pushmode&#62; false &#60;/pushmode&#62;

&#60;!-- true to use user proxy or false to use
certificates directly, true by default--&#62;
&#60;useproxy&#62; true &#60;/useproxy&#62;

&#60;!--absolute path to user proxy--&#62;
&#60;x509_user_proxy&#62;  &#60;/x509_user_proxy&#62;

&#60;!--absolute path to user (or host) private key--&#62;
&#60;x509_user_key&#62;  &#60;/x509_user_key&#62;

&#60;!--absolute path to user (or host) certificate--&#62;
&#60;x509_user_cert&#62;  &#60;/x509_user_cert&#62;

&#60;!--absolute path to the trusted certificates directory--&#62;
&#60;x509_user_trusted_certificates&#62;
/share/apps/osg-0.8.0/globus/TRUSTED_CA
&#60;/x509_user_trusted_certificates&#62;

&#60;!--range of ports open for tcp connection--&#62;
&#60;globus_tcp_port_range&#62; null &#60;/globus_tcp_port_range&#62;

&#60;!--gss expected name in the srm server DN.&#34;host&#34; by default--&#62;
&#60;gss_expected_name&#62; null &#60;/gss_expected_name&#62;

&#60;!--permanent|durable|volatile;&#34;permanent&#34; by default--&#62;
&#60;storagetype&#62; permanent &#60;/storagetype&#62;

&#60;!--number of miliseconds to pause for before retrying after
the failure--&#62;
&#60;retry_timeout&#62; 10000 &#60;/retry_timeout&#62;

&#60;!--max number of times to retry after failure before giving up--&#62;
&#60;retry_num&#62; 20 &#60;/retry_num&#62;

&#60;!-- true or false--&#62;
&#60;connect_to_wsdl&#62; false &#60;/connect_to_wsdl&#62;

&#60;!-- true or false--&#62;
&#60;delegate&#62; true &#60;/delegate&#62;

&#60;!-- true or false--&#62;
&#60;full_delegation&#62; true &#60;/full_delegation&#62;

&#60;!-- &#39;active&#39; for active mode and &#39;passive&#39; for passive mode,
&#34;active&#34; by default--&#62;
&#60;server_mode&#62; passive &#60;/server_mode&#62;

&#60;!--true or false--&#62;
&#60;long_ls_format&#62; false &#60;/long_ls_format&#62;

&#60;!-- 0 for no recursion (like unix ls -d),1 for one level and so on--&#62;
&#60;recursion_depth&#62; 0 &#60;/recursion_depth&#62;

&#60;!--true or false--&#62;
&#60;recursive&#62; false &#60;/recursive&#62;

&#60;!-- ls offset --&#62;
&#60;offset&#62; 0 &#60;/offset&#62;

&#60;!-- ls count --&#62;
&#60;count&#62; 0 &#60;/count&#62;

&#60;!-- 1 for srm 1.1 or 2 for srm 2.1.1, no other protocols are
supported --&#62;
&#60;srm_protocol_version&#62; 1 &#60;/srm_protocol_version&#62;

&#60;!-- request lifetime in seconds --&#62;
&#60;request_lifetime&#62; 86400 &#60;/request_lifetime&#62;

&#60;!--priority--&#62;
&#60;priority&#62; 0 &#60;/priority&#62;
&#60;/srm-configuration&#62;
</div><script type='text/javascript'>
        $('#show_1524898746').click(function() {
            $('#detail_1524898746').slideDown("normal");
            $('#show_1524898746').hide();
            $('#hide_1524898746').show();
        });
        $('#hide_1524898746').click(function() {
            $('#detail_1524898746').slideUp();
            $('#hide_1524898746').hide();
            $('#show_1524898746').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F5232">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
