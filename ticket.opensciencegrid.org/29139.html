<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[29139] Migrating the CE &#39;hammer-osg.rcac.purdue.edu&#39; to mulitcore</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=29139" method="post">
<div class="page-header">
    <h3><span class="muted">29139</span> / Migrating the CE &#39;hammer-osg.rcac.purdue.edu&#39; to mulitcore</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Manoj Kumar Jha</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">Purdue-Hammer-CE</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Manoj Kumar Jha</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Resolved</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">factory ops to review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-04-20</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/29139", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29139?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/29139?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Migrating%20the%20CE%20%26%2339%3Bhammer-osg.rcac.purdue.edu%26%2339%3B%20to%20mulitcore%20ISSUE%3D29139%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='29139#1461875275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-28T20:27:55+00:00">Apr 28, 2016 08:27 PM UTC</time><a class="anchor" name="1461875275">&nbsp;</a></div><pre>This ticket can be closed now.

Thanks,
Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='29139#1461616918'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-25T20:41:58+00:00">Apr 25, 2016 08:41 PM UTC</time><a class="anchor" name="1461616918">&nbsp;</a></div><pre>Hi Antonio,
Now the monitoring for Hammer has been fixed.  Our other two clusters like Carter and Hansen are utilized more than 75% (of total allotted slots to CMS).  For Hammer, utilization  is around 50%.   If you think lack of work load in CMS global pool is problem, we can wait for couple of days to confirm it.

Thanks,
Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='29139#1461574569'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-25T08:56:09+00:00">Apr 25, 2016 08:56 AM UTC</time> by <b>aperez@....</b><a class="anchor" name="1461574569">&nbsp;</a></div><pre>Hi Manoj,

Can you please check if the monitoring is working for Hammer? Looking at

<a href='https&#58;//www.physics.purdue.edu/Tier2/content/purdue-job-slots-utilization-history' target='_blank' rel='nofollow'>https&#58;//www.physics.purdue.edu/Tier2/content/purdue-job-slots-utilization-history</a>

it seems to be stuck on 19th.

Then, looking at the utilization during the last month,

<a href='http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/aperez/T2s/longmulticore_usage_t2s_720h.html' target='_blank' rel='nofollow'>http&#58;//submit-3.t2.ucsd.edu/CSstoragePath/aperez/T2s/longmulticore_usage_t2s_720h.html</a>

I can&#39;t really see a significative effect. I see fluctuations in site
utilization, just as for all sites. Pilot pressure follows job pressure
which is generally not exclusive for one site but to many of them. See the
number of matching sites for each production task at

<a href='http&#58;//cms-gwmsmon.cern.ch/prodview/T2_US_Purdue' target='_blank' rel='nofollow'>http&#58;//cms-gwmsmon.cern.ch/prodview/T2_US_Purdue</a>

So even if you see jobs that can potentially run at Purdue, this does not
mean that they have to necessarily run there.

I can&#39;t really see any other effect than simply not having enough load in
the system to saturate the pool.

Thanks,

Antonio.

On Fri, Apr 22, 2016 at 5&#58;53 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29139#1461340390'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-22T15:53:10+00:00">Apr 22, 2016 03:53 PM UTC</time> by <b>manoj.jha@....</b><a class="anchor" name="1461340390">&nbsp;</a></div><pre>The attached file shows the number of jobs available in global condor pool and Hammer cluster utilization.

-Manoj

<font color='#7F7E6F'>&#62; On Apr 22, 2016, at 10&#58;08 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29139#1461334083'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-22T14:08:03+00:00">Apr 22, 2016 02:08 PM UTC</time><a class="anchor" name="1461334083">&nbsp;</a></div><pre>Hi Marty.
The CE &#39;hammer-osg.rcac.purdue.edu&#39;  is not receiving enough glideins.  This may be the main reason behind under utilization of the Hammer cluster for CMS resources. Any idea, why cluster utilization changes after migrating from single to multicore glideins ?  During the single core era, occupancy of Hammer cluster reaches 100%.  After migrating to multicore, we have never seen Hammer occupancy reaches its full capacity despite the availability of  several thousands of jobs in global condor pool.    Following link shows, the utilization of Hammer cluster during last one week.

<a href='https&#58;//www.physics.purdue.edu/Tier2/content/purdue-job-slots-utilization-history' target='_blank' rel='nofollow'>https&#58;//www.physics.purdue.edu/Tier2/content/purdue-job-slots-utilization-history</a>

Hammer cluster utilization is on average 60%.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='29139#1461282351'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-21T23:45:51+00:00">Apr 21, 2016 11:45 PM UTC</time><a class="anchor" name="1461282351">&nbsp;</a></div><pre>Hi Manoj,

I&#39;ve adjusted the maximum number of glideins submitted to Hammer per cycle from 50 to 10 [1], which is what was set on Carter. Perhaps we were over requesting glideins at Hammer? I&#39;m not sure if this will help, but I&#39;m not sure what else we can do if CMS is not using the glideins at Hammer they get. But in theory, reducing the rate at which their glideins reserve resources on the system should increase overall glidein utilization, but not system utilization necessarily. If system utilization is a big concern, perhaps you would be open to allowing other VOs to run opportunistically?

Marty Kandes
UCSD Glidein Factory Operations

[1]

&#60;submit cluster_size=&#34;10&#34; max_per_cycle=&#34;10&#34; sleep=&#34;2&#34; slots_layout=&#34;fixed&#34;&#62;

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29139#1461255509'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-21T16:18:29+00:00">Apr 21, 2016 04:18 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1461255509">&nbsp;</a></div><pre>[Other (must describe below)]
This ticket was misassigned to FNAL.
-- by  at Thu Apr 21 16&#58;17&#58;15 UTC 2016

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000686714' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000686714</a></pre></div><div class='update_description'><i onclick="document.location='29139#1461253005'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-21T15:36:45+00:00">Apr 21, 2016 03:36 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1461253005">&nbsp;</a></div><pre>I am closing this ticket as FNAL cannot do anything for this and there has been no updates in a couple of weeks to reassign.
-- by klarson1 at Thu Apr 21 15&#58;35&#58;26 UTC 2016

[Other (must describe below)]
This ticket was misassigned to FNAL.
-- by  at Thu Apr 21 15&#58;35&#58;26 UTC 2016

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000686714' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000686714</a></pre></div><div class='update_description'><i onclick="document.location='29139#1461005632'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-18T18:53:52+00:00">Apr 18, 2016 06:53 PM UTC</time><a class="anchor" name="1461005632">&nbsp;</a></div><pre>The utilization of Hammer cluster is still at lower side in comparison to Carter cluster.

Hammer cluster&#58;
<a href='https&#58;//cmsweb.rcac.purdue.edu/cms/hammer_njobsA.png' target='_blank' rel='nofollow'>https&#58;//cmsweb.rcac.purdue.edu/cms/hammer_njobsA.png</a>

Carter cluster&#58;
<a href='https&#58;//cmsweb.rcac.purdue.edu/cms/carter_njobsA.png' target='_blank' rel='nofollow'>https&#58;//cmsweb.rcac.purdue.edu/cms/carter_njobsA.png</a>

Is it possible to increase glideins pressure for Hammer cluster ?

Thanks,
Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='29139#1461005590'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-18T18:53:10+00:00">Apr 18, 2016 06:53 PM UTC</time> by <b>manoj.jha@....</b><a class="anchor" name="1461005590">&nbsp;</a></div><pre>The utilization of Hammer cluster is still at lower side in comparison
to Carter cluster.

Hammer cluster&#58;
<a href='https&#58;//cmsweb.rcac.purdue.edu/cms/hammer_njobsA.png' target='_blank' rel='nofollow'>https&#58;//cmsweb.rcac.purdue.edu/cms/hammer_njobsA.png</a>

Carter cluster&#58;
<a href='https&#58;//cmsweb.rcac.purdue.edu/cms/carter_njobsA.png' target='_blank' rel='nofollow'>https&#58;//cmsweb.rcac.purdue.edu/cms/carter_njobsA.png</a>

Thanks,
Manoj

On 04/18/2016 02&#58;18 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29139#1461003522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-18T18:18:42+00:00">Apr 18, 2016 06:18 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1461003522">&nbsp;</a></div><pre>Hello All,

Is this ticket ok to close? Is there anything else that needs to be done?

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='29139#1460664120'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T20:02:00+00:00">Apr 14, 2016 08:02 PM UTC</time><a class="anchor" name="1460664120">&nbsp;</a></div><pre>Manoj,

I&#39;ve disabled Hammer&#39;s single core entry [1] on the CERN, GOC, GOC-ITB, and SDSC factories. All new glideins submitted from here on out should be only the 10-core multicore glideins.

Marty Kandes
UCSD Glidein Factory Operations

[1]

CMS_T2_US_Purdue_Hammer

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29139#1460662510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T19:35:10+00:00">Apr 14, 2016 07:35 PM UTC</time> by <b>manoj.jha@....</b><a class="anchor" name="1460662510">&nbsp;</a></div><pre>Hi Marty,
Hammer cluster has started receiving 10 core pilots per glidein.
You can disable the remaining single-core entry.

&#34;&#34;&#34;

768523.hammer-adm.rcac  cms1854     cms      cmsanalysis 4821     1
10  30000  48&#58;00&#58;00 R  00&#58;00&#58;59
768524.hammer-adm.rcac  cms1854     cms      cmsanalysis 10679     1
10  30000  48&#58;00&#58;00 R  00&#58;00&#58;08
768525.hammer-adm.rcac  cms1854     cms      cmsanalysis 3354     1
10  30000  48&#58;00&#58;00 R  00&#58;00&#58;05
768526.hammer-adm.rcac  cms1854     cms      cmsanalysis 4251     1
10  30000  48&#58;00&#58;00 R  00&#58;00&#58;01
768527.hammer-adm.rcac  cms1854     cms      cmsanalysis --      1
10  30000  48&#58;00&#58;00 R  00&#58;00&#58;01
768528.hammer-adm.rcac  cms1854     cms      cmsanalysis --      1
10  30000  48&#58;00&#58;00 Q       --
768529.hammer-adm.rcac  cms1854     cms      cmsanalysis --      1
10  30000  48&#58;00&#58;00 Q       --
768530.hammer-adm.rcac  cms1854     cms      cmsanalysis --      1
10  30000  48&#58;00&#58;00 Q       --

[jha2@hammer-osg ~]$ qstat -f 768523 | grep mem
resources_used.mem = 30532kb
resources_used.vmem = 282032kb
Resource_List.mem = 30000mb
[jha2@hammer-osg ~]$

&#34;&#34;&#34;

Thanks,
Manoj

On 04/14/2016 03&#58;28 PM, Open Science Grid FootPrints wrote&#58;
<div id='show_604877377' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_604877377'><font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_604877377').click(function() {
            $('#detail_604877377').slideDown("normal");
            $('#show_604877377').hide();
            $('#hide_604877377').show();
        });
        $('#hide_604877377').click(function() {
            $('#detail_604877377').slideUp();
            $('#hide_604877377').hide();
            $('#show_604877377').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29139#1460662123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T19:28:43+00:00">Apr 14, 2016 07:28 PM UTC</time><a class="anchor" name="1460662123">&nbsp;</a></div><pre>Manoj, Antonio,

I&#39;ve made the necessary changes to Hammer&#39;s multicore entires on the CERN, GOC, GOC-ITB, and SDSC glidein factories [1]. Where do we stand on the remaining single-core entry? Shall we proceed in disabling it?

Marty Kandes
UCSD Glidein Factory Operations

[1]

&#60;submit_attr name=&#34;+maxMemory&#34; value=&#34;30000&#34;/&#62;
&#60;submit_attr name=&#34;+xcount&#34; value=&#34;10&#34;/&#62;

&#60;attr name=&#34;GLIDEIN_CPUS&#34; const=&#34;True&#34; glidein_publish=&#34;False&#34; job_publish=&#34;True&#34; parameter=&#34;True&#34; publish=&#34;True&#34; type=&#34;string&#34; value=&#34;10&#34;/&#62;
&#60;attr name=&#34;GLIDEIN_MaxMemMBs&#34; const=&#34;True&#34; glidein_publish=&#34;False&#34; job_publish=&#34;True&#34; parameter=&#34;True&#34; publish=&#34;True&#34; type=&#34;int&#34; value=&#34;30000&#34;/&#62;

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29139#1460654717'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T17:25:17+00:00">Apr 14, 2016 05:25 PM UTC</time><a class="anchor" name="1460654717">&nbsp;</a></div><pre>A glidein requesting 10 core pilots can request 30 GB of RAM.

Thanks,
Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='29139#1460654409'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T17:20:09+00:00">Apr 14, 2016 05:20 PM UTC</time> by <b>aperez@....</b><a class="anchor" name="1460654409">&nbsp;</a></div><pre>Ok then, let&#39;s try 10-core pilots. Don&#39;t forget to increment memory
parameters proportionally as well &#58;)

Thanks,

Antonio.

On Thu, Apr 14, 2016 at 7&#58;11 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29139#1460653869'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T17:11:09+00:00">Apr 14, 2016 05:11 PM UTC</time> by <b>manoj.jha@....</b><a class="anchor" name="1460653869">&nbsp;</a></div><pre>Hi Jeff,
All the nodes behind the Hammer are 20 cores.

Thanks,
Manoj

On 04/14/2016 12&#58;35 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29139#1460651739'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-14T16:35:39+00:00">Apr 14, 2016 04:35 PM UTC</time><a class="anchor" name="1460651739">&nbsp;</a></div><pre>Hi Manoj,

I&#39;d just like to double check, are ALL the nodes behind Hammer 20 core, or do you have other nodes with different core counts? If so, how would you feel about us reconfiguring the entry to send 10 core pilots, rather than 4? CMS agreed we can try deviating from 8 cores for your situation, but 10 cores would be more useful, as they give CMS more room to grow when they have &#62; 4core multicore workflows in the future.

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='29139#1460498349'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-12T21:59:09+00:00">Apr 12, 2016 09:59 PM UTC</time><a class="anchor" name="1460498349">&nbsp;</a></div><pre>Manoj,

Jeff said he will discuss this issue with CMS on Thursday at the Submission Infrastructure meeting.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29139#1460407518'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-11T20:45:18+00:00">Apr 11, 2016 08:45 PM UTC</time><a class="anchor" name="1460407518">&nbsp;</a></div><pre>On following link, you will find the utilization of different clusters.
<a href='https&#58;//www.physics.purdue.edu/Tier2/content/purdue-job-slots-utilization-history' target='_blank' rel='nofollow'>https&#58;//www.physics.purdue.edu/Tier2/content/purdue-job-slots-utilization-history</a>

Clusters like Carter and Hansen are utilized closed to 100%.  For the cluster Hammer, the utilization is not as good in comparison to Carter and Hansen clusters.   Is there any plan  from the GlideinWMS people  to improve the utilization of Hammer cluster further ?

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='29139#1460404829'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-11T20:00:29+00:00">Apr 11, 2016 08:00 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1460404829">&nbsp;</a></div><pre>Hello All,

What is the status of this ticket? Is there still work to be done?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29139#1459801857'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T20:30:57+00:00">Apr 4, 2016 08:30 PM UTC</time><a class="anchor" name="1459801857">&nbsp;</a></div><pre>Hi Manoj,

I just set the Purdue multicore entry walltimes back down to 48h on all production factories.

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='29139#1459784172'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T15:36:12+00:00">Apr 4, 2016 03:36 PM UTC</time> by <b>manoj.jha@....</b><a class="anchor" name="1459784172">&nbsp;</a></div><pre>Hi Jeff,
We would like multicore glidein should also have walltime of 48
hours (say n).   When the cluster is in scheduled downtime, the
scheduler stops scheduling the glidein n hours before the start of of
the downtime.  Higher value of n will lead to longer period of
unavailability of cluster for CMS. If possible, please keep 48hrs also
for multicore glideins.

Thanks,
Manoj

On 04/03/2016 11&#58;03 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='29139#1459738983'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-04T03:03:03+00:00">Apr 4, 2016 03:03 AM UTC</time><a class="anchor" name="1459738983">&nbsp;</a></div><pre>Also, a separate question for Manoj,

It appears that CMS changed the walltime at hammer and carter to 216000 (60h) without first communicating it to you. The single core entries were set to 48h. Which would you prefer for the new multicore entries?

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='29139#1459561105'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-02T01:38:25+00:00">Apr 2, 2016 01:38 AM UTC</time><a class="anchor" name="1459561105">&nbsp;</a></div><pre>Hi,

I can confirm that&#58;
(a) CMS is not going to be running 8 cores jobs.  The plan for this year is 4 cores.
(b) Other CMS sites - CERN and the Russian T1 - provide non-8-core slots (12 and 10, respectively).
(c) There&#39;s nothing in the tuning of the global pool that depends on having everything being 8 cores.

Especially as we&#39;re currently having factory ops hand-tuning the number of running glideins, it seems the decision is straightforward for OSG factory ops.

Brian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=bbockelm/CN=659869/CN=Brian Paul Bockelman</pre></div><div class='update_description'><i onclick="document.location='29139#1459550595'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-04-01T22:43:15+00:00">Apr 1, 2016 10:43 PM UTC</time><a class="anchor" name="1459550595">&nbsp;</a></div><pre>Going back to Manoj&#39;s original request&#58;

&#34;Is it possible to send glideins requesting 4 cores and 12 GB of RAM per glidein ?&#34;

Antonio, how is doing a mix of 8 core pilots and single core simpler than just making a single hammer 4 core pilot?  You say &#34;&#34;We don&#39;t want to start really customizing multicore to each site&#34; but this sounds like a customization to me.

Why go through all this trouble on factory configuration to work around the problem, rather than just configuring it correctly in the first place?  I still stand by our factory ops position that we need to respect site policies.  So if Manoj prefers 4 core pilots at hammer to avoid wasting 4 cores / machine, and this does not pose a problem for CMS, the I strongly prefer this solution.

When CMS is running multicore workflows, what is the actual number of parallel cores used?  Is it really using 8 core user jobs right now?

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='29139#1459464960'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T22:56:00+00:00">Mar 31, 2016 10:56 PM UTC</time><a class="anchor" name="1459464960">&nbsp;</a></div><pre>Vassil,

Since I don&#39;t think we have another ticket for Carter, just FYI ...

I deleted the old GRAM-CE entry CMSHTPC_T2_US_Purdue_Carter on all factories. I think we need to be careful to not have identical entry names for multiple entries, even though this GRAM-CE one was disabled. It doesn&#39;t look like this caused a problem in this case, but I think we could find a situation where this could confuse the factory.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29139#1459464789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T22:53:09+00:00">Mar 31, 2016 10:53 PM UTC</time> by <b>manoj.jha@....</b><a class="anchor" name="1459464789">&nbsp;</a></div><pre>On 03/31/2016 06&#58;18 PM, Antonio Perez-Calero Yzquierdo wrote&#58;
<font color='#7F7E6F'>&#62; Hi Manoj, Marty,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;m replying to this just by email, as I don&#39;t have access to osg</font>
<font color='#7F7E6F'>&#62; tickets directly.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; First of all, Manoj, let me start by saying that CMS is as interested</font>
<font color='#7F7E6F'>&#62; as you are in maximizing the utilization of the resources at all their</font>
<font color='#7F7E6F'>&#62; sites, including of course all clusters at Purdue. So you can trust us</font>
<font color='#7F7E6F'>&#62; and count on us in order to help you with that. We are doing our best.</font>
<font color='#7F7E6F'>&#62; For that, I have been today working hard together with Vassil in order</font>
<font color='#7F7E6F'>&#62; to improve the Purdue situation.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; You can see the evolution over the last 24h in the following plots&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; a) increase in the total number of cores being used at Purdue</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Inline image 1</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; b) improved occupancy in the multicore pilots&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Inline image 2</font>
<font color='#7F7E6F'>&#62; c) current situation in terms of CMS pilots&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;     178 T2_US_Purdue Partitionable CMSHTPC_T2_US_Purdue_Carter</font>
<font color='#7F7E6F'>&#62;     303 T2_US_Purdue Partitionable CMSHTPC_T2_US_Purdue_Hammer</font>
<font color='#7F7E6F'>&#62;     139 T2_US_Purdue Partitionable CMSHTPC_T2_US_Purdue_hansen</font>
<font color='#7F7E6F'>&#62;     130 T2_US_Purdue Static CMS_T2_US_Purdue_Carter</font>
<font color='#7F7E6F'>&#62;     110 T2_US_Purdue Static CMS_T2_US_Purdue_condce1</font>
<font color='#7F7E6F'>&#62;     114 T2_US_Purdue Static CMS_T2_US_Purdue_hadoop_condce</font>
<font color='#7F7E6F'>&#62;     873 T2_US_Purdue Static CMS_T2_US_Purdue_Hammer</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Ok, so let me just tell you about the changes we made.</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_1598385030' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1598385030'><font color='#7F7E6F'>&#62; -Your concern about Hammer not going to be fully utilized is in my</font>
<font color='#7F7E6F'>&#62; opinion not based on evidence (at least yet). 20 core machines can be</font>
<font color='#7F7E6F'>&#62; filled by 8 core pilots plus additional 4 single core. This is a</font>
<font color='#7F7E6F'>&#62; procedure we are applying across sites whenever we encounter a similar</font>
<font color='#7F7E6F'>&#62; situation.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; We don&#39;t want to start really customizing multicore to each site. I</font>
<font color='#7F7E6F'>&#62; understand that resources are normally not homogeneous across sites</font>
<font color='#7F7E6F'>&#62; and within sites. However, as we are depending on a global</font>
<font color='#7F7E6F'>&#62; optimization to improve performance of our submission infrastructure</font>
<font color='#7F7E6F'>&#62; on the global scale, not per site, we really benefit from having a</font>
<font color='#7F7E6F'>&#62; standard unit of measure for how we allocate our resources. The jobs</font>
<font color='#7F7E6F'>&#62; we run within them are not customized per site either, so it&#39;s also</font>
<font color='#7F7E6F'>&#62; easier for us to understand what we can run simply by having a clear</font>
<font color='#7F7E6F'>&#62; standard across the grid.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Therefore, *we have setup Hammer to receive the standard 8-core</font>
<font color='#7F7E6F'>&#62; pilots* and not a mixed of 8+4, or all 4 cores. However, in order to</font>
<font color='#7F7E6F'>&#62; ensure single core still runs there but does not limit the ability of</font>
<font color='#7F7E6F'>&#62; multicore to grow, *we have limited the number of single core* at the</font>
<font color='#7F7E6F'>&#62; factories to about the size you told us would be not utilized&#58; 640</font>
<font color='#7F7E6F'>&#62; cores. If you locally assign higher priority to multicore over single</font>
<font color='#7F7E6F'>&#62; core, the nodes will be filled by multicore, then single core would</font>
<font color='#7F7E6F'>&#62; take just the remainder.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; You can see that the fraction of single core at Hammer has therefore</font>
<font color='#7F7E6F'>&#62; been reduced. We are taking 303x8 + 873 = 3297 cores there, mcore</font>
<font color='#7F7E6F'>&#62; therefore being now 73.5% of our usage of Hammer. We can keep this</font>
<font color='#7F7E6F'>&#62; configuration and observe if we really need to change it.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -We have worked on improving the occupancy of the slots, as up to now</font>
<font color='#7F7E6F'>&#62; many 8 core pilots were really using 6 or 7 of them (see colors in the</font>
<font color='#7F7E6F'>&#62; second plot above). In two ways&#58; working together with you to ensure</font>
<font color='#7F7E6F'>&#62; that CMS uses Purdue multicore, by being ready just in time for the</font>
<font color='#7F7E6F'>&#62; multicore workflows campaign that was injected today, which included</font>
<font color='#7F7E6F'>&#62; Purdue as a target site. Multicore payloads produce better internal</font>
<font color='#7F7E6F'>&#62; utilization of the allocated cores, compared to single core ones,</font>
<font color='#7F7E6F'>&#62; having reduced memory requirement. This is a problem which has been</font>
<font color='#7F7E6F'>&#62; affecting multicore at Purdue since it was started.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Also, we have reviewed the configuration of the pilots in terms of</font>
<font color='#7F7E6F'>&#62; handling memory for Hansen, applied for Carter as well. New pilots</font>
<font color='#7F7E6F'>&#62; starting after we did the change perform better, so you see in that</font>
<font color='#7F7E6F'>&#62; plot that even if the number of multicore pilots has increased, the</font>
<font color='#7F7E6F'>&#62; number of pilots using just 6 or 7 cores has remained constant. This</font>
<font color='#7F7E6F'>&#62; should improve as the older pilots get renewed. This in part has to do</font>
<font color='#7F7E6F'>&#62; with running multithreaded payloads, but we will be watching that core</font>
<font color='#7F7E6F'>&#62; utilization remains high even if we get again to running mainly 8</font>
<font color='#7F7E6F'>&#62; single core inside multicore pilots.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -Finally, we have configured Carter as multicore. It seems to me to be</font>
<font color='#7F7E6F'>&#62; working fine, so we should now disable single core there, as I</font>
<font color='#7F7E6F'>&#62; understand all machines are multiples of 8 cores, right?</font>

Please disable single core for Carter.

Thanks,
Manoj

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; In summary, we have already taken actions to improve performance at</font>
<font color='#7F7E6F'>&#62; Purdue. I propose the following&#58; let us keep the present situation and</font>
<font color='#7F7E6F'>&#62; observe its evolution. If the Hammer cluster is infra utilized as a</font>
<font color='#7F7E6F'>&#62; result of this configuration, I&#39;ll be the first interested in</font>
<font color='#7F7E6F'>&#62; modifying it to some other core size (perhaps we could use 10 core</font>
<font color='#7F7E6F'>&#62; pilots instead, which I would prefer to 4 cores, for example).</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Antonio.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Thu, Mar 31, 2016 at 9&#58;20 PM, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62; &#60;osg@.... &#60;mailto&#58;osg@....&#62;&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;     [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1598385030').click(function() {
            $('#detail_1598385030').slideDown("normal");
            $('#show_1598385030').hide();
            $('#hide_1598385030').show();
        });
        $('#hide_1598385030').click(function() {
            $('#detail_1598385030').slideUp();
            $('#hide_1598385030').hide();
            $('#show_1598385030').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29139#1459462809'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T22:20:09+00:00">Mar 31, 2016 10:20 PM UTC</time> by <b>aperez@....</b><a class="anchor" name="1459462809">&nbsp;</a></div><pre>Hi Manoj, Marty,

I&#39;m replying to this just by email, as I don&#39;t have access to osg tickets
directly.

First of all, Manoj, let me start by saying that CMS is as interested as
you are in maximizing the utilization of the resources at all their sites,
including of course all clusters at Purdue. So you can trust us and count
on us in order to help you with that. We are doing our best. For that, I
have been today working hard together with Vassil in order to improve the
Purdue situation.

You can see the evolution over the last 24h in the following plots&#58;

a) increase in the total number of cores being used at Purdue

[image&#58; Inline image 1]

b) improved occupancy in the multicore pilots&#58;

[image&#58; Inline image 2]
c) current situation in terms of CMS pilots&#58;

178 T2_US_Purdue Partitionable CMSHTPC_T2_US_Purdue_Carter
303 T2_US_Purdue Partitionable CMSHTPC_T2_US_Purdue_Hammer
139 T2_US_Purdue Partitionable CMSHTPC_T2_US_Purdue_hansen
130 T2_US_Purdue Static CMS_T2_US_Purdue_Carter
110 T2_US_Purdue Static CMS_T2_US_Purdue_condce1
114 T2_US_Purdue Static CMS_T2_US_Purdue_hadoop_condce
873 T2_US_Purdue Static CMS_T2_US_Purdue_Hammer

Ok, so let me just tell you about the changes we made.

-Your concern about Hammer not going to be fully utilized is in my opinion
not based on evidence (at least yet). 20 core machines can be filled by 8
<div id='show_1383597781' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1383597781'>core pilots plus additional 4 single core. This is a procedure we are
applying across sites whenever we encounter a similar situation.

We don&#39;t want to start really customizing multicore to each site. I
understand that resources are normally not homogeneous across sites and
within sites. However, as we are depending on a global optimization to
improve performance of our submission infrastructure on the global scale,
not per site, we really benefit from having a standard unit of measure for
how we allocate our resources. The jobs we run within them are not
customized per site either, so it&#39;s also easier for us to understand what
we can run simply by having a clear standard across the grid.

Therefore, *we have setup Hammer to receive the standard 8-core pilots* and
not a mixed of 8+4, or all 4 cores. However, in order to ensure single core
still runs there but does not limit the ability of multicore to grow, *we
have limited the number of single core* at the factories to about the size
you told us would be not utilized&#58; 640 cores. If you locally assign higher
priority to multicore over single core, the nodes will be filled by
multicore, then single core would take just the remainder.

You can see that the fraction of single core at Hammer has therefore been
reduced. We are taking 303x8 + 873 = 3297 cores there, mcore therefore
being now 73.5% of our usage of Hammer. We can keep this configuration and
observe if we really need to change it.

-We have worked on improving the occupancy of the slots, as up to now many
8 core pilots were really using 6 or 7 of them (see colors in the second
plot above). In two ways&#58; working together with you to ensure that CMS uses
Purdue multicore, by being ready just in time for the multicore workflows
campaign that was injected today, which included Purdue as a target site.
Multicore payloads produce better internal utilization of the allocated
cores, compared to single core ones, having reduced memory requirement.
This is a problem which has been affecting multicore at Purdue since it was
started.

Also, we have reviewed the configuration of the pilots in terms of handling
memory for Hansen, applied for Carter as well. New pilots starting after we
did the change perform better, so you see in that plot that even if the
number of multicore pilots has increased, the number of pilots using just 6
or 7 cores has remained constant. This should improve as the older pilots
get renewed. This in part has to do with running multithreaded payloads,
but we will be watching that core utilization remains high even if we get
again to running mainly 8 single core inside multicore pilots.

-Finally, we have configured Carter as multicore. It seems to me to be
working fine, so we should now disable single core there, as I understand
all machines are multiples of 8 cores, right?

In summary, we have already taken actions to improve performance at Purdue.
I propose the following&#58; let us keep the present situation and observe its
evolution. If the Hammer cluster is infra utilized as a result of this
configuration, I&#39;ll be the first interested in modifying it to some other
core size (perhaps we could use 10 core pilots instead, which I would
prefer to 4 cores, for example).

Thanks,

Antonio.

On Thu, Mar 31, 2016 at 9&#58;20 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1383597781').click(function() {
            $('#detail_1383597781').slideDown("normal");
            $('#show_1383597781').hide();
            $('#hide_1383597781').show();
        });
        $('#hide_1383597781').click(function() {
            $('#detail_1383597781').slideUp();
            $('#hide_1383597781').hide();
            $('#show_1383597781').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='29139#1459452014'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T19:20:14+00:00">Mar 31, 2016 07:20 PM UTC</time><a class="anchor" name="1459452014">&nbsp;</a></div><pre>Manoj,

Yes, sending mutlicore glideins with 4 cores and 12 GB of RAM is possible. However, we&#39;ll probably need CMS approval since this is not their standard for multicore glideins. This is not their standard multicore glidein.

Antonio,

Can you and Manoj come to some agreement on what they can support and what CMS wants in terms of multicore glideins at Hammer?

Marty Kandes
UCSD Glidein Factory Operations

P.S. We will disable single core glidein entries once the multicore configuration issue is resolved.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='29139#1459433854'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T14:17:34+00:00">Mar 31, 2016 02:17 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1459433854">&nbsp;</a></div><pre>Hi Manoj,

I just realized I updated the wrong ticket yesterday, sorry about that. I&#39;ve assigned factory ops.

~Chris</pre></div><div class='update_description'><i onclick="document.location='29139#1459433363'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T14:09:23+00:00">Mar 31, 2016 02:09 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1459433363">&nbsp;</a></div><pre>I&#39;ve unlinked the FNAL ticket</pre></div><div class='update_description'><i onclick="document.location='29139#1459367142'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T19:45:42+00:00">Mar 30, 2016 07:45 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459367142">&nbsp;</a></div><pre>I think this ticket was incorrectly assigned to FNAL.  We do not have a factory that is submitting to Purdue here.  Can you please reassign to OSG factory ops?
-- by klarson1 at Wed Mar 30 19&#58;44&#58;59 UTC 2016

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000686714' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000686714</a></pre></div><div class='update_description'><i onclick="document.location='29139#1459365240'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T19:14:00+00:00">Mar 30, 2016 07:14 PM UTC</time><a class="anchor" name="1459365240">&nbsp;</a></div><pre>The &#39;osg-system-profiler &#39;  is attached as &#39;osg-profile.txt&#39;.

-Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><div class='update_description'><i onclick="document.location='29139#1459361402'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T18:10:02+00:00">Mar 30, 2016 06:10 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1459361402">&nbsp;</a></div><pre>Hi Vlad,

Could we start by having you run the osg-system-profiler and attaching the output file to this ticket here?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='29139#1459360974'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-30T18:02:54+00:00">Mar 30, 2016 06:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1459360974">&nbsp;</a></div><pre>Hello,
The cluster served by the CE &#39;hammer-osg.rcac.purdue.edu&#39;  has worker nodes consisting of 20 cores and 64 GB of RAM per node.  Presently, this CE is being served by single and multicore glideins (requesting 8 cores and 24 GB of RAM).  We would like the CE should be served by only multicore gldiens.  Is it possible to send glideins requesting 4 cores and 12 GB of RAM per glidein ?

Thanks,
Manoj

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jha/CN=618566/CN=Manoj Jha</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F29139">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 29139});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
