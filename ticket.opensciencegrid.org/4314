<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[4314] BNL_ATLAS_2 fails classad validation</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=4314" method="post">
<div class="page-header">
    <h3><span class="muted">4314</span> / BNL_ATLAS_2 fails classad validation</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Gabriele Garzoglio</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2007-11-21</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
        <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=4314", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4314?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/4314?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20BNL_ATLAS_2%20fails%20classad%20validation%20ISSUE%3D4314%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='4314#1197034269'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-12-07T13:31:09+00:00">Dec 7, 2007 01:31 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1197034269">&nbsp;</a></div><pre>Ticket ID&#58; [rt-racf.bnl.gov #5089]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; xinzhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; BNL_ATLAS_2 fails classad validation ISSUE=4314 PROJ=71

I am closing this ticket since this is actually about a GIP bug and
a feature request for OSG 1.0 (improve GIP condor_status timeout
handler).

Xin</pre></div><div class='update_description'><i onclick="document.location='4314#1197034267'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-12-07T13:31:07+00:00">Dec 7, 2007 01:31 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1197034267">&nbsp;</a></div><pre>Ticket ID&#58; [rt-racf.bnl.gov #5089]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; xinzhao
Status&#58; resolved
Priority&#58; None
Transaction&#58; Status changed from &#39;open&#39; to &#39;resolved&#39; by xinzhao
Subject&#58; Open Science Grid&#58; BNL_ATLAS_2 fails classad validation ISSUE=4314 PROJ=71

According to our records, your request has been resolved and this
ticket has has been closed.  If you are satisfied with the resolution
of your request, then please DO NOT reply to this message, as doing
so will automatically re-open the ticket.

If you have any further questions or comments, or you would like to
re-open this ticket, then simply reply to this email.

Thank you,
RT-RACF-GridServices@....</pre></div><div class='update_description'><i onclick="document.location='4314#1195614912'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-21T03:15:12+00:00">Nov 21, 2007 03:15 AM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1195614912">&nbsp;</a></div><pre>Discussed at the Troubleshooting call &#58;

Responded to ticket #4314.
The problem identified occurs mainly due to condor_status timing out when executed by the GIP plugin.
Currently the Total and Available JobSlots is set to 0 is condor_status times out.
Gabriele wanted a different default to increase usability for ReSS?.
This will be raised in the Attributes sub committee meeting when it reconvenes for OSG 1.0 release.

Closing GOC ticket as this will be discussed in another venue</pre></div><div class='update_description'><i onclick="document.location='4314#1195478107'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-19T13:15:07+00:00">Nov 19, 2007 01:15 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1195478107">&nbsp;</a></div><pre>Ticket ID&#58; [rt-racf.bnl.gov #5089]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; xinzhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; BNL_ATLAS_2 fails classad validation ISSUE=4314 PROJ=71

This is more of a GIP issue than a site issue, can we close this ticket
and move the
discussion to some other mailing list and threads?

Thanks,
Xin</pre></div><div class='update_description'><i onclick="document.location='4314#1195234748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-16T17:39:08+00:00">Nov 16, 2007 05:39 PM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1195234748">&nbsp;</a></div><pre>Hi Gabriele,
<font color='#7F7E6F'>&#62; Well, for cases like TotalCPU, 0 is reasonable&#58; we know that the value</font>
<font color='#7F7E6F'>&#62; must be &#62; 0. For cases like TotalRunningJobs, it is not...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I wonder if some more explicit error conditions would help with our</font>
<font color='#7F7E6F'>&#62; resource selection coding. In other words, how do I determine how</font>
<font color='#7F7E6F'>&#62; reliable the information from a site is? If I see TotalRunningJobs =</font>
<font color='#7F7E6F'>&#62; 0, is it 0 or timeout? In the latter case, I might want to wait before</font>
<font color='#7F7E6F'>&#62; considering the resource for job submission.</font>
Yes! this is a challenging problem.
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I was off track suggesting &#34;unknown&#34;, but maybe a -1 could identify a</font>
<font color='#7F7E6F'>&#62; timeout condition, -2 cannot talk to collector, etc.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; We should probably keep this issue in mind to improve our next release.</font>
What you are proposing may be reasonable if we can define a convention.
But before any change is made we will need to explore the effect of this
change on current applications which may have made the assumption based
on the current values.

Thanks
Anand

--
Anand Padmanabhan, PhD
Research Scientist
CyberInfrastructure and Geospatial Information Laboratory (CIGI)
Dept. of Geography, Room 324 Davenport Hall
and
National Center for Supercomputing Applications (NCSA)
Room 2122B
University of Illinois at Urbana-Champaign
Telephone&#58; (217) 244-9315
<a href='http&#58;//cigi.uiuc.edu' target='_blank' rel='nofollow'>http&#58;//cigi.uiuc.edu</a></pre></div><div class='update_description'><i onclick="document.location='4314#1195234387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-16T17:33:07+00:00">Nov 16, 2007 05:33 PM UTC</time> by <b>garzogli@....</b><a class="anchor" name="1195234387">&nbsp;</a></div><pre>Hi Anand,
<font color='#7F7E6F'>&#62; &#62; Clearly, this behavior should be fixed, either buffering</font>
<font color='#7F7E6F'>&#62; &#62; the last valid result somehow OR saying &#34;unknown&#34; in case of timeouts</font>
<font color='#7F7E6F'>&#62; &#62; OR ...</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I believe GIP keeps the value for 10 mins by default (this can be</font>
<font color='#7F7E6F'>&#62; changed by the site). But you cannot put a value like &#34;unknown&#34; since</font>
<font color='#7F7E6F'>&#62; according to the schema this has to be an integer.</font>
Yes... good point

[snip]
<font color='#7F7E6F'>&#62; Now if condor_status does not return as expected then the perl script</font>
<font color='#7F7E6F'>&#62; parsing it will assign the corresponding values as 0. So I would not</font>
<font color='#7F7E6F'>&#62; call this a theory, it is pretty much what the code is expected to do.</font>
<font color='#7F7E6F'>&#62;</font>

Fair enough. I thought we never proved that these zero really came from
a timeout. But if it is the only reasonable explanation then that&#39;s fine.

<font color='#7F7E6F'>&#62;&#62; What is the condor_status command for this case?</font>
<font color='#7F7E6F'>&#62;&#62; If this is the case, any chance that you can help fix the problem?</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62; I don&#39;t know what exactly we can fix here. If the condor_status is</font>
<font color='#7F7E6F'>&#62; timing out I dont see what the GIP can do here (you can already change</font>
<font color='#7F7E6F'>&#62; the parameter timeout and how long you want to cache it). What exactly</font>
<font color='#7F7E6F'>&#62; is a sensible value is open to debate though 0 seems to be a sensible</font>
<font color='#7F7E6F'>&#62; option when you dont have information.</font>

Well, for cases like TotalCPU, 0 is reasonable&#58; we know that the value
must be &#62; 0. For cases like TotalRunningJobs, it is not...

I wonder if some more explicit error conditions would help with our
resource selection coding. In other words, how do I determine how
reliable the information from a site is? If I see TotalRunningJobs = 0,
is it 0 or timeout? In the latter case, I might want to wait before
<div id='show_2003836550' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2003836550'>considering the resource for job submission.

I was off track suggesting &#34;unknown&#34;, but maybe a -1 could identify a
timeout condition, -2 cannot talk to collector, etc.

We should probably keep this issue in mind to improve our next release.
Cheers
Gabriele

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_2003836550').click(function() {
            $('#detail_2003836550').slideDown("normal");
            $('#show_2003836550').hide();
            $('#hide_2003836550').show();
        });
        $('#hide_2003836550').click(function() {
            $('#detail_2003836550').slideUp();
            $('#hide_2003836550').hide();
            $('#show_2003836550').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4314#1195184348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-16T03:39:08+00:00">Nov 16, 2007 03:39 AM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1195184348">&nbsp;</a></div><pre>Hi Xin,

The configuration will  not ask you question. This is specific to very
few sites so at this stage you will have to set a parameter and define
constraints by hand as outlined on the twiki.
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/GenericInformationProviders' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/GenericInformationProviders</a>
under the section &#34;Adding site defined constraints to custom configure
condor status commands&#34;.

Thanks
Anand

Gabriele Garzoglio wrote&#58;
<font color='#7F7E6F'>&#62; Hi Xin,</font>
<font color='#7F7E6F'>&#62; yes, you can add constraints to GIP, now. Check out &#34;Adding site</font>
<font color='#7F7E6F'>&#62; defined constraints to custom configure condor status commands&#34; at</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/GenericInformationProviders#Major_Updates_for_OSG_0_8_0' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/GenericInformationProviders#Major_Updates_for_OSG_0_8_0</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Let us know if you have problems.</font>
<font color='#7F7E6F'>&#62; Thanks</font>
<font color='#7F7E6F'>&#62; Gabriele</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4314#1195184169'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-16T03:36:09+00:00">Nov 16, 2007 03:36 AM UTC</time> by <b>anand-padmanabhan-1@....</b><a class="anchor" name="1195184169">&nbsp;</a></div><pre>Hi Gabriele/Xin,
Gabriele Garzoglio wrote&#58;
<font color='#7F7E6F'>&#62; In any case, people have observed this for large sites. This is the</font>
<font color='#7F7E6F'>&#62; theory (so far unproven, as far as I know)&#58; the condor command from</font>
<font color='#7F7E6F'>&#62; GIP, which gets these numbers, times out and the script sets the</font>
<font color='#7F7E6F'>&#62; output to 0. Clearly, this behavior should be fixed, either buffering</font>
<font color='#7F7E6F'>&#62; the last valid result somehow OR saying &#34;unknown&#34; in case of timeouts</font>
<font color='#7F7E6F'>&#62; OR ...</font>
I believe GIP keeps the value for 10 mins by default (this can be
changed by the site). But you cannot put a value like &#34;unknown&#34; since
according to the schema this has to be an integer.
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; You are in a unique position to verify the &#34;theory&#34;. Maybe executing</font>
<font color='#7F7E6F'>&#62; the condor_status command from GIP by hand a few times will expose the</font>
<font color='#7F7E6F'>&#62; timeout.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Anand,</font>
<font color='#7F7E6F'>&#62; is the theory still unproven?</font>
If you look at the dynamic condor script that comes with the GIP. you
will see that it executes the following two condor_status commands
1. &#96;$PATH/condor_status -constraint $condor_status_constraint -pool
$central_manager&#96;
2. &#34;$PATH/condor_status -submitter -constraint $condor_status_constraint
-pool $central_manager -format &#39;%s&#58;&#39; Name -format &#39;%d&#58;&#39; RunningJobs
-format &#39;%d&#58;&#39; IdleJobs -format &#39;%d&#58;&#92;n&#39; HeldJobs &#34;

Now if condor_status does not return as expected then the perl script
parsing it will assign the corresponding values as 0. So I would not
call this a theory, it is pretty much what the code is expected to do.
<font color='#7F7E6F'>&#62; What is the condor_status command for this case?</font>
<font color='#7F7E6F'>&#62; If this is the case, any chance that you can help fix the problem?</font>
I don&#39;t know what exactly we can fix here. If the condor_status is
timing out I dont see what the GIP can do here (you can already change
the parameter timeout and how long you want to cache it). What exactly
is a sensible value is open to debate though 0 seems to be a sensible
<div id='show_826387181' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_826387181'>option when you dont have information.

Thanks
Anand
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Cheers</font>
<font color='#7F7E6F'>&#62; Gabriele</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_826387181').click(function() {
            $('#detail_826387181').slideDown("normal");
            $('#show_826387181').hide();
            $('#hide_826387181').show();
        });
        $('#hide_826387181').click(function() {
            $('#detail_826387181').slideUp();
            $('#hide_826387181').hide();
            $('#show_826387181').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4314#1195147808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-15T17:30:08+00:00">Nov 15, 2007 05:30 PM UTC</time> by <b>garzogli@....</b><a class="anchor" name="1195147808">&nbsp;</a></div><pre>Hi Xin,
yes, you can add constraints to GIP, now. Check out &#34;Adding site defined
constraints to custom configure condor status commands&#34; at
<a href='https&#58;//twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/GenericInformationProviders#Major_Updates_for_OSG_0_8_0' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/twiki/bin/view/ReleaseDocumentation/GenericInformationProviders#Major_Updates_for_OSG_0_8_0</a>

Let us know if you have problems.
Thanks
Gabriele

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4314#1195145467'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-15T16:51:07+00:00">Nov 15, 2007 04:51 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1195145467">&nbsp;</a></div><pre>Ticket ID&#58; [rt-racf.bnl.gov #5089]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; xinzhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; BNL_ATLAS_2 fails classad validation ISSUE=4314 PROJ=71

Hi Gabriele,

That theory sounds possible. I tried several times the condor_status
command by hand, the time to get the return differs, from 40s to 3m.

By the way, I thought OSG 0.8 allows adding extra condor constraints string
in GIP. But I was not asked for any question during configure-osg.sh
process.
I used the $OLD_VDT_LOCATION variable, though. If I want to add the string,
how do I do it, re-run the configure-gip script?

Thanks,
Xin</pre></div><div class='update_description'><i onclick="document.location='4314#1195142768'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-15T16:06:08+00:00">Nov 15, 2007 04:06 PM UTC</time> by <b>garzogli@....</b><a class="anchor" name="1195142768">&nbsp;</a></div><pre>Hi Xin,
I have investigated this. It turns out that the information coming from
&#34;BNL_ATLAS_2&#34; changes with time...

This is what I&#39;ve got when I started investigating&#58;

$ condor_status -pool osg-ress-1.fnal.gov -constraints &#39;GlueSiteName ==
&#34;BNL_ATLAS_2&#34;&#39; -l | egrep -e GlueCEInfoTotalCPUs -e
GlueCEPolicyAssignedJobSlots | sort | uniq
GlueCEInfoTotalCPUs = 6141
GlueCEPolicyAssignedJobSlots = 6141
isClassadValidAreTotalSlotsAndCPUPositive = (GlueCEInfoTotalCPUs =!=
UNDEFINED && GlueCEInfoTotalCPUs &#62; 0 && GlueCEPolicyAssignedJobSlots =!=
UNDEFINED && GlueCEPolicyAssignedJobSlots &#62; 0)

A few minutes later, all values where set to 0&#58;

$ condor_status -pool osg-ress-1.fnal.gov -constraints &#39;GlueSiteName ==
&#34;BNL_ATLAS_2&#34;&#39; -l | egrep -e GlueCEInfoTotalCPUs -e
GlueCEPolicyAssignedJobSlots | sort | uniq
GlueCEInfoTotalCPUs = 0
GlueCEPolicyAssignedJobSlots = 0
isClassadValidAreTotalSlotsAndCPUPositive = (GlueCEInfoTotalCPUs =!=
UNDEFINED && GlueCEInfoTotalCPUs &#62; 0 && GlueCEPolicyAssignedJobSlots =!=
UNDEFINED && GlueCEPolicyAssignedJobSlots &#62; 0)

After a while, things were back again, but this time GlueCEInfoTotalCPUs
= 6104, instead of 6141. Were you doing work on your system around 9&#58;30 ?

In any case, people have observed this for large sites. This is the
theory (so far unproven, as far as I know)&#58; the condor command from GIP,
which gets these numbers, times out and the script sets the output to 0.
Clearly, this behavior should be fixed, either buffering the last valid
result somehow OR saying &#34;unknown&#34; in case of timeouts OR ...

<div id='show_210610301' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_210610301'>You are in a unique position to verify the &#34;theory&#34;. Maybe executing the
condor_status command from GIP by hand a few times will expose the timeout.

Anand,
is the theory still unproven?
What is the condor_status command for this case?
If this is the case, any chance that you can help fix the problem?

Cheers
Gabriele

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_210610301').click(function() {
            $('#detail_210610301').slideDown("normal");
            $('#show_210610301').hide();
            $('#hide_210610301').show();
        });
        $('#hide_210610301').click(function() {
            $('#detail_210610301').slideUp();
            $('#hide_210610301').hide();
            $('#show_210610301').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='4314#1195139169'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-15T15:06:09+00:00">Nov 15, 2007 03:06 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1195139169">&nbsp;</a></div><pre>Ticket ID&#58; [rt-racf.bnl.gov #5089]
Requestors&#58; osg@....
Queue&#58; GridServices
Owner&#58; xinzhao
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by xinzhao
Subject&#58; Open Science Grid&#58; BNL_ATLAS_2 fails classad validation ISSUE=4314 PROJ=71

Gabrielle,

I don&#39;t see anything obviously wrong with our CEmon report&#58;

<a href='http&#58;//is.grid.iu.edu/cgi-bin/show_source_data?which=BNL_ATLAS_2&source=cemon' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/cgi-bin/show_source_data?which=BNL_ATLAS_2&source=cemon</a>

It has both GlueCEInfoTotalCPUs and GlueCEPolicyAssignedJobSlots
reporting positive numbers.

Could you provide more info. on the issue you see?

Thanks,
Xin</pre></div><div class='update_description'><i onclick="document.location='4314#1195081387'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-14T23:03:07+00:00">Nov 14, 2007 11:03 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1195081387">&nbsp;</a></div><pre>Greetings,

This message has been automatically generated in response to the
creation of a trouble ticket you submitted regarding&#58;

Open Science Grid&#58; BNL_ATLAS_2 fails classad validation ISSUE=4314 PROJ=71

A summary of your ticket, which has been assigned a request ID of
[rt-racf.bnl.gov #5089], appears below.

To modify your ticket or add followups, simply reply to this email
message.  Please do not change the subject of this e-mail when
replying or you might generate a new ticket.

Thank you,
RT-RACF-GridServices@....

-------------------------------------------------------------------------

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='4314#1195081267'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-11-14T23:01:07+00:00">Nov 14, 2007 11:01 PM UTC</time> by <b>Thomas Wang</b><a class="anchor" name="1195081267">&nbsp;</a></div><pre>USATLAS Support Center,

Please see the below request from Gabriele regarding BNL_ATLAS_2 fails classad validation.
Let us know if you have any questions regarding this issue.
Thanks.

regards,
Tom

--------------------------------------------
From&#58; 	  garzogli@....
Subject&#58; 	BNL_ATLAS_2 fails classad validation
Date&#58; 	November 14, 2007 4&#58;59&#58;01 PM EST
To&#58; 	  goc@....

Hi,
BNL_ATLAS_2 (gridgk02.racf.bnl.gov&#58;2119/jobmanager-condor) has upgraded its information system to the
Glue Schema v1.3. ReSS classad validation fails because of the following test evaluating to FALSE

isClassadValidAreTotalSlotsAndCPUPositive = (GlueCEInfoTotalCPUs =!= UNDEFINED &amp;&amp; GlueCEInfoTotalCPUs &#62;
0 &amp;&amp; GlueCEPolicyAssignedJobSlots =!= UNDEFINED &amp;&amp; GlueCEPolicyAssignedJobSlots &#62; 0)

Most probably, either GlueCEInfoTotalCPUs or GlueCEPolicyAssignedJobSlots have been misconfigured when
running configure_gip directly or via configure_osg.

Cheers
Gabriele</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F4314">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 4314});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
