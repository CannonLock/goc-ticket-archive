<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[23354] Multi-core user jobs running at AGLT2 in single-core job slots</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=23354" method="post">
<div class="page-header">
    <h3><span class="muted">23354</span> / Multi-core user jobs running at AGLT2 in single-core job slots</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bob Ball</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Bob Ball</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-01-09</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/23354", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/23354?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/23354?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Multi-core%20user%20jobs%20running%20at%20AGLT2%20in%20single-core%20job%20slots%20ISSUE%3D23354%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='23354#1423503085'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-09T17:31:25+00:00">Feb 9, 2015 05:31 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1423503085">&nbsp;</a></div><pre>We run hyper-threaded cores.  The average performance of the machines is
over both HT and real cores.  If we lock jobs to a core, then we will
potentially lock it into a low performance core, and we do not wish to
do that.

We are running Condor cgroups.  BUT we have some machines that run HT,
but are not using as many job slots as cores.  cgroups will let
multi-core &#34;jobs&#34; into more cores, if more are available.  However, we
then run into other issues, where memory is limited, but swap is
available, so too many processes and you start using swap, and that load
down the machine.  Then, get a few of these that happen to land on the
same machine....  The problems escalate pretty quickly. There were
several hundred glow jobs running, and I know that I killed well over
100 of them before I said &#34;enough is enough&#34; and shot everything here
belonging to glow.

I will now remove the cap I placed at that time.

Every 5 minutes we take a snapshot on our Condor &#34;master&#34; machine, based
upon condor_status and condor_q formatted printing.  A few minutes
later, and staggered randomly over the course of a minute or so, each WN
uses the snapshot info to collect data on the running condor jobs, and
put that out to a common directory.  Back to the master, at the end of
that time, those individual files are sorted by WN name and concatenated
together into a master activity snapshot, a single .csv file (well,
really multiples, as we have MSU, UM and the combined set).   This
includes, for all running jobs, accumulated wall and cpu time, and from
cgroups rss, swap, memory and process count.  For a properly behaving,
single core job, cpu cannot exceed wall.  Still, we give a grace of 2%.
If the grace is exceeded, we have the option of killing the job.

It is all just scripted, time-synchronized fun.  If you really want to
see the scrips, I can make them available to you.  The REALLY fun part
of this is that Gabrielle Carcassi has made us a web page where we can
get plots of the saved variables from one of these snapshots.  It is
<div id='show_1876792331' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1876792331'>REAL easy to find strange outlier WN and jobs that way.

bob

On 2/9/2015 11&#58;58 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_1876792331').click(function() {
            $('#detail_1876792331').slideDown("normal");
            $('#show_1876792331').hide();
            $('#hide_1876792331').show();
        });
        $('#hide_1876792331').click(function() {
            $('#detail_1876792331').slideUp();
            $('#hide_1876792331').hide();
            $('#show_1876792331').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23354#1423501135'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-09T16:58:55+00:00">Feb 9, 2015 04:58 PM UTC</time><a class="anchor" name="1423501135">&nbsp;</a></div><pre>Hi sorry to miss this was never resolved.  I have contacted one user I suspect was doing multi core again (czhang).
Can we get turned back on and some more information about any jobs still doing multicore you catch?
I will try to get faster turn around on this type of request.
Can I see the scripts AGLT2 is using to detect this kind of multicore job?  Also can someone remind me what the background scheduler is at AGLT2?
If its condor would someone from AGLT2 want to look at adding ASSIGN_CPU_AFFINITY = true to stop misconfigured jobs from taking more cpu?  Just trying think of options...
-Nate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Nathan Yehle 899</pre></div><div class='update_description'><i onclick="document.location='23354#1420662300'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-07T20:25:00+00:00">Jan 7, 2015 08:25 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1420662300">&nbsp;</a></div><pre>Closing this ticket per request of Nate and AGLT2 implementing cgroups. Bob, if more multicore jobs land on your site, feel free to open another ticket.</pre></div><div class='update_description'><i onclick="document.location='23354#1420657231'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-07T19:00:31+00:00">Jan 7, 2015 07:00 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1420657231">&nbsp;</a></div><pre>We have implemented cgroups now at AGLT2, so this will be less of a
problem in the future.

bob

On 1/7/2015 1&#58;50 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23354#1420656615'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-07T18:50:15+00:00">Jan 7, 2015 06:50 PM UTC</time><a class="anchor" name="1420656615">&nbsp;</a></div><pre>Hi I think this can be resolved we will continue to investigate ways to track multicore users that make it onto the glidein.  I have some htcondor policy I might be able to enable to put our local pools jobs on hold so users know before they hit the remote glidein sites.
Other than that we just have to treat them on a case by case basis, sometimes they put is_resumable sometimes they just really do use 2 cores and we have to report them.
-Nate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Nathan Yehle 899</pre></div><div class='update_description'><i onclick="document.location='23354#1420481499'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-01-05T18:11:39+00:00">Jan 5, 2015 06:11 PM UTC</time><a class="anchor" name="1420481499">&nbsp;</a></div><pre>Hi Brian L,

Do u think it is worth to open an htcondor ticket to track this question&#58;

how to differentiate between jobs that are checkpointing and multi-core jobs.?

I think this is were the software team help might be needed and we can move this forward

Edgar

OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='23354#1419973394'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-30T21:03:14+00:00">Dec 30, 2014 09:03 PM UTC</time> by <b>moate@....</b><a class="anchor" name="1419973394">&nbsp;</a></div><pre>Not at the moment Elizabeth.  We lost Becky Gietzel and she was primary on
this.  It&#39;s in the queue.

-Aaron Moate

On Mon, Dec 29, 2014 at 07&#58;02&#58;00PM +0000, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62;    [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23354#1419879766'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-29T19:02:46+00:00">Dec 29, 2014 07:02 PM UTC</time> by <b>echism</b><a class="anchor" name="1419879766">&nbsp;</a></div><pre>Where are we on this? Do the glow people have anything?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23354#1419299291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-23T01:48:11+00:00">Dec 23, 2014 01:48 AM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1419299291">&nbsp;</a></div><pre>No, I seem to have missed this, that I picked up from the ticket&#58;
&#34;Bob&#58; What control do you have over the accumulation reports that you&#39;re
seeing? I ask because we&#39;ll likely have to query another attribute to
differentiate between self-checkpointing jobs and multicorejobs.&#34;

It is all just scripted queries, so I can change what is picked, probably.

bob

On 12/22/2014 11&#58;15 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23354#1419264913'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-22T16:15:13+00:00">Dec 22, 2014 04:15 PM UTC</time> by <b>echism</b><a class="anchor" name="1419264913">&nbsp;</a></div><pre>Hey Bob,

Did you get that last inquiry?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23354#1418944175'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-18T23:09:35+00:00">Dec 18, 2014 11:09 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1418944175">&nbsp;</a></div><pre>Bob&#58; What control do you have over the accumulation reports that you&#39;re seeing? I ask because we&#39;ll likely have to query another attribute to differentiate between self-checkpointing jobs and multicorejobs.</pre></div><div class='update_description'><i onclick="document.location='23354#1418936942'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-18T21:09:02+00:00">Dec 18, 2014 09:09 PM UTC</time><a class="anchor" name="1418936942">&nbsp;</a></div><pre>Hi,

Adding Nate Yehle to the cc list as I am moving to a different job on campus and won&#39;t be involved with this effort moving forwards.  To clarify, users can run self- checkpointing jobs using vanilla universe, and they designate this by using the is_resumable flag in their jobs.  It looks like what we need is a correct parameter from the HTCondor software that resets both the cputime and the walltime for any jobs that checkpoint and/or restart.

Thanks,
Becky

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Becky Gietzel 2075</pre></div><div class='update_description'><i onclick="document.location='23354#1418923699'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-18T17:28:19+00:00">Dec 18, 2014 05:28 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1418923699">&nbsp;</a></div><pre>FYI, we are in the process of implementing Condor cgroups here, so, in
the not-too-distant future, this will become irrelevant for us. Still,
users need to learn to be polite and to conform if they are going to run
on the grid, because, as far as I can tell, our use of cgroups is still
the exception, not the rule.

bob

On 12/18/2014 12&#58;22 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23354#1418923521'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-18T17:25:21+00:00">Dec 18, 2014 05:25 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1418923521">&nbsp;</a></div><pre>We don&#39;t allow standard universe jobs for anyone.  So, the whole
checkpoint thing seems to be a red herring?  These glow jobs really WERE
running multicore?

bob

On 12/18/2014 12&#58;22 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23354#1418923348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-18T17:22:28+00:00">Dec 18, 2014 05:22 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1418923348">&nbsp;</a></div><pre>Bob&#58; This shouldn&#39;t apply to vanilla universe jobs. Do you even allow standard universe jobs for the GLOW VO?</pre></div><div class='update_description'><i onclick="document.location='23354#1418768448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-16T22:20:48+00:00">Dec 16, 2014 10:20 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1418768448">&nbsp;</a></div><pre>Adding Todd M as he may have some answers for the different time counters and for some ideas on how to differentiate between jobs that are checkpointing and multi-core jobs.</pre></div><div class='update_description'><i onclick="document.location='23354#1418746961'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-16T16:22:41+00:00">Dec 16, 2014 04:22 PM UTC</time> by <b>echism</b><a class="anchor" name="1418746961">&nbsp;</a></div><pre>I don&#39;t know the answer to that question and it doesn&#39;t seem like anyone else has answered, so I&#39;ll add the software team.

Software team&#58; this is in regard to checkpointing

By the time I look at accumulations, I am no longer viewing ClassAds,
just summations of them.  So, does this apply, even for the vanilla
universe jobs we run?  How is one expected to find the real wall time if
the attribute is cleared?  Is there an equivalent cpu/sys time counter
that is also cleared?

bob</pre></div><div class='update_description'><i onclick="document.location='23354#1418073851'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-08T21:24:11+00:00">Dec 8, 2014 09:24 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1418073851">&nbsp;</a></div><pre>By the time I look at accumulations, I am no longer viewing ClassAds,
just summations of them.  So, does this apply, even for the vanilla
universe jobs we run?  How is one expected to find the real wall time if
the attribute is cleared?  Is there an equivalent cpu/sys time counter
that is also cleared?

bob

On 12/8/2014 4&#58;08 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23354#1418072915'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-08T21:08:35+00:00">Dec 8, 2014 09:08 PM UTC</time><a class="anchor" name="1418072915">&nbsp;</a></div><pre>Hi,

When looking at the offending jobs, if you see a job attribute &#34;Is_resumable = true&#34; it means that the job checkpoints.  Each time it restarts, the cputime is accumulated but the walltime starts over.  So some of the more recent jobs that looked like multicore are just checkpointing.  That&#39;s not to say this was the case for all jobs you have seen as multicore.  We are still putting in place a testbed for users to verify that their jobs are not multicore before sending them outside of local CHTC resources.

Thanks,
-Becky

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Becky Gietzel 2075</pre></div><div class='update_description'><i onclick="document.location='23354#1418072282'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-08T20:58:02+00:00">Dec 8, 2014 08:58 PM UTC</time> by <b>echism</b><a class="anchor" name="1418072282">&nbsp;</a></div><pre>Hi Becky,

Is there any news on this?

Thank you</pre></div><div class='update_description'><i onclick="document.location='23354#1417795355'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-05T16:02:35+00:00">Dec 5, 2014 04:02 PM UTC</time> by <b>echism</b><a class="anchor" name="1417795355">&nbsp;</a></div><pre>Thanks, Becky. Please send your findings when available.</pre></div><div class='update_description'><i onclick="document.location='23354#1417650211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-03T23:43:31+00:00">Dec 3, 2014 11:43 PM UTC</time><a class="anchor" name="1417650211">&nbsp;</a></div><pre>Hi,

We&#39;ll track down the offending user(s).  One of our users has jobs that look like multicore, but they are checkpointing periodically and then restarting, so the cputime looks larger than the walltime.  I suspect this was the case, but will follow up regardless.  We are also looking into some additional steps locally to address this issue.

Thanks,
Becky

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Becky Gietzel 2075</pre></div><div class='update_description'><i onclick="document.location='23354#1417640466'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-03T21:01:06+00:00">Dec 3, 2014 09:01 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1417640466">&nbsp;</a></div><pre>Just an FYI, no jobs killed in the last day or so.  So, it seems it was
a big weekend burst of jobs.  It is guaranteed to come back again
though, if the user is not notified.

I still have glow VO jobs heavily restricted here.

bob

On 12/3/2014 3&#58;51 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23354#1417639899'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-03T20:51:39+00:00">Dec 3, 2014 08:51 PM UTC</time> by <b>echism</b><a class="anchor" name="1417639899">&nbsp;</a></div><pre>Becky and Aaron,

It seems like my last update didn&#39;t go through. AGLT2 is having problems with multicore use from GLOW again.

Thank you</pre></div><div class='update_description'><i onclick="document.location='23354#1417466112'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-12-01T20:35:12+00:00">Dec 1, 2014 08:35 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1417466112">&nbsp;</a></div><pre>Please let me know when this user has been notified and the problem is
resolved.  There were hundreds of these killed here since the ticket was
opened.  In the meantime, I have severely limited the number of &#34;glow&#34;
VO jobs that can run at AGLT2.

bob

On 11/29/2014 7&#58;59 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='23354#1417265942'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-11-29T12:59:02+00:00">Nov 29, 2014 12:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1417265942">&nbsp;</a></div><pre>Since yesterday some 100 or more jobs belonging to the glow VO were killed at AGLT2 for running more cpu time than wall time in their single core job slots.  Unfortunately, I do not know how to find the specific submitting user within such jobs.  All I get back from our cron task is something like this

&#34;c-106-14&#34; &#34;2&#34; &#34;1338518.0&#34; &#34;gate02.grid.umich.edu#1338518.0#1417259419&#34; &#34;dir_916002&#34; &#34;Default&#34; null null &#34;glow.aglt2.org&#34; 4876.000000 2660 1.83
Load/wall are 183/2660 and JobId is 1338518.0
Job 1338518.0 marked for removal

In this job, in 2660 seconds of wall time, 4876 cpu seconds were accumulated.  Please, find this user and correct their job submission to run single core on the grid.

Thanks,
bob ball
Manager, AGLT2

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Bob Ball 81</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F23354">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
