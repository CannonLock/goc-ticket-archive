<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[22381] org.osg.certificates.crl-expiry - CRITICAL&#58; Probe ended with unexpected error condition</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=22381" method="post">
<div class="page-header">
    <h3><span class="muted">22381</span> / org.osg.certificates.crl-expiry - CRITICAL&#58; Probe ended with unexpected error condition</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">OUHEP_ITB</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">DOSAR</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Horst Severini</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Track in JIRA</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-09-29</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=24769">24769</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/22381", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='22381#1412026576'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-29T21:36:16+00:00">Sep 29, 2014 09:36 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1412026576">&nbsp;</a></div><pre>Hi Horst,
I turned this into SOFTWARE-1618 (<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1618' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1618</a>) and there will be a fix in the October release. I&#39;ll close this now.
-Mat</pre></div><div class='update_description'><i onclick="document.location='22381#1412003220'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-29T15:07:00+00:00">Sep 29, 2014 03:07 PM UTC</time><a class="anchor" name="1412003220">&nbsp;</a></div><pre>Hi Mat,

Have you had the chance to work on this yet?

Edgar

OSG Software

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='22381#1411675257'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-25T20:00:57+00:00">Sep 25, 2014 08:00 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1411675257">&nbsp;</a></div><pre>Hi Mat,

sure, sounds good!

So if I understand this correctly, it&#39;s just an issue of wording --
i.e., that whenever this RSV probe turns red/CRITICAL, it complains that
the &#39;Probe ended with unexpected error condition&#39;, when it should simply
say that there are outdated CRL files.

Unless there&#39;s a different problem after all, and there IS a bug in the
code which makes it exit abnormally, I don&#39;t know that ...

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='22381#1411674347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-25T19:45:47+00:00">Sep 25, 2014 07:45 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1411674347">&nbsp;</a></div><pre>I&#39;d like to nail down the cause first so I&#39;ll know what to put in the JIRA ticket but afterwards we can close this.
-Mat</pre></div><div class='update_description'><i onclick="document.location='22381#1411597630'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-24T22:27:10+00:00">Sep 24, 2014 10:27 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1411597630">&nbsp;</a></div><pre>Thanks Brian!

So I think we can close this ticket now, and possibly turn it into a JIRA
ticket?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='22381#1411597246'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-24T22:20:46+00:00">Sep 24, 2014 10:20 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1411597246">&nbsp;</a></div><pre>I agree about it not being an &#39;unexpected error&#39;. I&#39;ll talk to Mat when he gets back to see what he thinks.</pre></div><div class='update_description'><i onclick="document.location='22381#1411479200'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-23T13:33:20+00:00">Sep 23, 2014 01:33 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1411479200">&nbsp;</a></div><pre>Hi again,

since this morning, all our sites got this error again -- even the osg-3.2
site at Langston&#58;

<a href='https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.certificates.crl-expiry' target='_blank' rel='nofollow'>https&#58;//lutgw1.lunet.edu/rsv/lutgw1.lunet.edu.html#org.osg.certificates.crl-expiry</a>

So are we sure that this is just the &#39;normal&#39; and expected error
that indicates that at least one of the CRL files is more than 72h
(or whatever that number was, can&#39;t remember now) out of date?

If that&#39;s the case, then I really think we need to change the error message
and remove the &#39;unexpected&#39;, since this error is indeed very expected, right?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='22381#1411403412'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T16:30:12+00:00">Sep 22, 2014 04:30 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1411403412">&nbsp;</a></div><pre>Hi Brian,

sure, turning red and CRITICAL if you have grossly outdated CRL files
is perfectly fine and expected. What I don&#39;t like is the error

Probe ended with unexpected error condition

since that indicates an unknown problem, which I think is always
cause of concern.

Or am I just mis-reading this, and this is really the &#39;expected&#39;
error the proble should throw when there are outdated CRL files?

In that case I stronly suggest rewording it and removing the &#39;unexpected&#39;
part, since it would be an expected error, right?

In other words, I&#39;d like to make sure that there is only one issue
at hand here, and not two separate ones ...

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='22381#1411402570'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T16:16:10+00:00">Sep 22, 2014 04:16 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1411402570">&nbsp;</a></div><pre>Horst,

This looks like behavior that we would want, isn&#39;t it? If a CRL file hasn&#39;t been updated in over 72 hrs, throw an error. If a CRL file hasn&#39;t been updated between 9 and 72 hrs ago, throw a warning. Maybe you need to run fetch-crl more frequently? Adding Mat as he&#39;s the RSV expert but this strikes me as reasonable behavior.

- Brian</pre></div><div class='update_description'><i onclick="document.location='22381#1411401977'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T16:06:17+00:00">Sep 22, 2014 04:06 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1411401977">&nbsp;</a></div><pre>Hi Brian and Chris,

okay, I just moved these 8 .r0 files out of the way and re-ran the probe,
and the &#39;unexpected error condition&#39; error did in fact go away.
So something about these .r0 files must&#39;ve confused the probe.

But this error also appeared on our three production sites for a while&#58;

<a href='https&#58;//ouhep0.nhn.ou.edu&#58;8443/rsv/ouhep0.nhn.ou.edu.html#org.osg.certificates.crl-expiry' target='_blank' rel='nofollow'>https&#58;//ouhep0.nhn.ou.edu&#58;8443/rsv/ouhep0.nhn.ou.edu.html#org.osg.certificates.crl-expiry</a>
<a href='https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.certificates.crl-expiry' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu/rsv/tier2-01.ochep.ou.edu.html#org.osg.certificates.crl-expiry</a>
<a href='https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.certificates.crl-expiry' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/grid1.oscer.ou.edu.html#org.osg.certificates.crl-expiry</a>

If you scroll to the bottom of the section on each of them --
and you have to do this within the next 12h, otherwise they&#39;ll
disappear, since they&#39;ll fall off the bottom of the list! --
you&#39;ll see that we got the same error there, and then at some point
it went away again, so there is definitely a problem in the RSV code
that doesn&#39;t properly take into account some condition.

Can we turn this into a JIRA ticket?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='22381#1411398275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T15:04:35+00:00">Sep 22, 2014 03:04 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1411398275">&nbsp;</a></div><pre>Hello Horst

Do you have any updates on this?  I am still seeing UHEP_ITB as failing the CRL Expiry metric in MyOSG. When would be a good time to check back?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='22381#1411394183'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-22T13:56:23+00:00">Sep 22, 2014 01:56 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1411394183">&nbsp;</a></div><pre>I haven&#39;t looked at the RSV code but it strikes me as the same error. Let me know if removing the CRL files doesn&#39;t fix it.</pre></div><div class='update_description'><i onclick="document.location='22381#1411179671'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-20T02:21:11+00:00">Sep 20, 2014 02:21 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1411179671">&nbsp;</a></div><pre>Hi Brian,

okay, I&#39;ll try that when I get back to OU -- just getting back from CERN,
now on the plane in Dallas.

But I&#39;m not convinced that that will solve the &#39;unknown error condition&#39;.
Do you understand that one? I think that might be a different error.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='22381#1411160027'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-19T20:53:47+00:00">Sep 19, 2014 08:53 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1411160027">&nbsp;</a></div><pre>Horst, I think it&#39;s a relatively simple problem. It looks like certs got dropped out of the osg-ca-certs package in version 1.39 but since the package doesn&#39;t have any control over the old CRL files so those get left behind. You can go ahead and remove any of the CRL files (*.r0) that the RSV metric complains about as &#39;CRITICAL&#39; then run the metric again.</pre></div><div class='update_description'><i onclick="document.location='22381#1410806857'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-15T18:47:37+00:00">Sep 15, 2014 06:47 PM UTC</time><a class="anchor" name="1410806857">&nbsp;</a></div><pre>Sorry, I meant &#39;red&#39;, not &#39;read&#39; ... &#58;-)

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='22381#1410806802'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-15T18:46:42+00:00">Sep 15, 2014 06:46 PM UTC</time><a class="anchor" name="1410806802">&nbsp;</a></div><pre>Hi Brian,

okay, thanks! No, I don&#39;t think this is something that needs to be addressed immediately, since this probe isn&#39;t a critical one -- i.e., having it read doesn&#39;t get anyone penalized ...

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='22381#1410805479'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-15T18:24:39+00:00">Sep 15, 2014 06:24 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1410805479">&nbsp;</a></div><pre>Horst&#58; I&#39;ve taken this ticket but I don&#39;t think I&#39;ll have time to take a look at it for a little while. If this is a pressing issue, I can see if someone else on the software team has free cycles to take a look.</pre></div><div class='update_description'><i onclick="document.location='22381#1410804979'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-15T18:16:19+00:00">Sep 15, 2014 06:16 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1410804979">&nbsp;</a></div><pre>Hmm,

somehow the email I sent two days ago just made it into the ticket?
Strange.

Is there any update on this? The error is still in all osg-3.1 sites ...

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='22381#1410551893'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-12T19:58:13+00:00">Sep 12, 2014 07:58 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1410551893">&nbsp;</a></div><pre>Thanks Chris!

I just had a look at another osg-3.1 site&#58;

<a href='http&#58;//grid1.hpc.latech.edu&#58;8000/rsv/' target='_blank' rel='nofollow'>http&#58;//grid1.hpc.latech.edu&#58;8000/rsv/</a>

and it&#39;s also showing the same error, so it&#39;s not just us. ;)

From what I can tell, this seems to be a global osg-3.1 issue ...

Let me know what else we can do to help debug this.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='22381#1410551463'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-12T19:51:03+00:00">Sep 12, 2014 07:51 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1410551463">&nbsp;</a></div><pre>Hello Software,

I have added you to this in the hopes that you may be able to assist Horst in determining what is wrong here or maybe lead us in the right direction. Please let me know how I can help.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='22381#1410536188'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-12T15:36:28+00:00">Sep 12, 2014 03:36 PM UTC</time><a class="anchor" name="1410536188">&nbsp;</a></div><pre>Hi there,

has anyone had a chance to look at this? All osg-3.1 crl-expiry probes are still failing (at least at all our sites). What can we do to track this down?

Thanks, Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='22381#1410355635'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-10T13:27:15+00:00">Sep 10, 2014 01:27 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1410355635">&nbsp;</a></div><pre>Hi again,

this morning, it seems like not only OUHEP_ITB is having this
&#39;unexpected error condition&#39; problem, but ALL our OSG 3.1 sites&#58;

<a href='https&#58;//ouhep0.nhn.ou.edu&#58;8443/rsv/' target='_blank' rel='nofollow'>https&#58;//ouhep0.nhn.ou.edu&#58;8443/rsv/</a>
<a href='https&#58;//tier2-01.ochep.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//tier2-01.ochep.ou.edu/rsv/</a>
<a href='https&#58;//grid1.oscer.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/</a>
<a href='https&#58;//osgitb1.nhn.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//osgitb1.nhn.ou.edu/rsv/</a>

I&#39;d seen this before on our production sites, but then it went away again,
and since this metric isn&#39;t a critical one, I didn&#39;t worry about it
too much. But now I think we should really track it down and fix it. &#58;)

Let me know what else I can do to help; logs, debug tests, ...

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='22381#1410314415'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-10T02:00:15+00:00">Sep 10, 2014 02:00 AM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1410314415">&nbsp;</a></div><pre>Thanks Vince!

I just ran fetch-crl by hand, and I don&#39;t think there&#39;s a problem with that&#58;

----
[root@osgitb1 ~]# time /usr/sbin/fetch-crl
ERROR CRL retrieval for MARGI failed. 24h grace expired. CRL not updated

real    0m47.553s
user    0m3.543s
sys     0m0.930s
----

Then I ran the rsv probe by hand as well, and it still seems to have
the same problem, though&#58;

----
[root@osgitb1 ~]# time rsv-control --run org.osg.certificates.crl-expiry -u osgitb1.nhn.ou.edu

Running metric org.osg.certificates.crl-expiry&#58;

metricName&#58; org.osg.certificates.crl-expiry
metricType&#58; status
timestamp&#58; 2014-09-09 20&#58;47&#58;52 CDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE
serviceURI&#58; osgitb1.nhn.ou.edu
gatheredAt&#58; osgitb1.nhn.ou.edu
summaryData&#58; CRITICAL
detailsData&#58; CRITICAL&#58; Probe ended with unexpected error condition
2014-09-10T01&#58;47&#58;40Z
CRITICAL&#58; CRL file for CA with hash d3619baa has not been updated since 2014/06/10 12&#58;44&#58;15
CRITICAL&#58; CRL file for CA with hash 7721d4d3 has not been updated since 2014/07/09 00&#58;45&#58;53
CRITICAL&#58; CRL file for CA with hash 679cff61 has not been updated since 2014/06/10 12&#58;44&#58;25
WARNING&#58; CRL file for CA with hash 1e4f9475 has not been updated since 2014/09/07 00&#58;45&#58;51
<div id='show_863438191' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_863438191'>CRITICAL&#58; CRL file for CA with hash 2376bd8e has not been updated since 2014/07/09 00&#58;45&#58;53
CRITICAL&#58; CRL file for CA with hash dd51b42a has not been updated since 2014/07/09 00&#58;45&#58;58
CRITICAL&#58; CRL file for CA with hash 468d15b3 has not been updated since 2014/07/09 00&#58;45&#58;58
CRITICAL&#58; CRL file for CA with hash ba2f39ca has not been updated since 2014/06/10 12&#58;44&#58;15
WARNING&#58; CRL file for CA with hash 7d0d064a has not been updated since 2014/09/07 00&#58;45&#58;51
CRITICAL&#58; CRL file for CA with hash 9c3efee6 has not been updated since 2014/06/10 12&#58;44&#58;25

EOT

real    0m20.180s
user    0m0.066s
sys     0m0.024s
----

So I think there&#39;s a problem with the probe, not fetch-crl itself.

How can we dial up the verbosity of the probe, so we can figure out
why it seems to crash?

Hmm, we do seem to have a bunch of really old .r0 files, though&#58;

----
[root@osgitb1 ~]# ls -aort /etc/grid-security/certificates/ | less
total 3808
-rw-r--r-- 1 root   673 Feb 26  2014 664adba0.r0
-rw-r--r-- 1 root   673 Feb 26  2014 95009ddc.r0
-rw-r--r-- 1 root   722 Feb 26  2014 67e8acfa.r0
-rw-r--r-- 1 root   722 Feb 26  2014 081fefd0.r0
-rw-r--r-- 1 root 53957 Apr  8 06&#58;46 7cef5492.r0
-rw-r--r-- 1 root 53957 Apr  8 06&#58;46 1e12d831.r0
-rw-r--r-- 1 root  7795 Apr  8 06&#58;46 1c3f2ca8.r0
-rw-r--r-- 1 root  7795 Apr  8 06&#58;46 12d0da68.r0
-rw-r--r-- 1 root   889 Apr  8 06&#58;46 d1b603c3.r0
-rw-r--r-- 1 root   889 Apr  8 06&#58;46 0119347c.r0
-rw-r--r-- 1 root   776 Apr  8 06&#58;46 ff430c7f.r0
-rw-r--r-- 1 root   776 Apr  8 06&#58;46 d0b701c0.r0
-rw-r--r-- 1 root   707 Apr  8 06&#58;46 5e15f3bd.r0
-rw-r--r-- 1 root   707 Apr  8 06&#58;46 578010ce.r0
-rw-r--r-- 1 root 20169 Jun 10 12&#58;44 d3619baa.r0
-rw-r--r-- 1 root 20169 Jun 10 12&#58;44 ba2f39ca.r0
-rw-r--r-- 1 root   697 Jun 10 12&#58;44 9c3efee6.r0
-rw-r--r-- 1 root   697 Jun 10 12&#58;44 679cff61.r0
----

Those aren&#39;t there on tier2-01, which is running the same version
of fetch-crl. Is there something in the ITB CRL cache that&#39;s stale?

Maybe we have two different problems, one with fetch-crl, and one
with the RSV probe?

Thanks a lot,
good night,

Horst
</div><script type='text/javascript'>
        $('#show_863438191').click(function() {
            $('#detail_863438191').slideDown("normal");
            $('#show_863438191').hide();
            $('#hide_863438191').show();
        });
        $('#hide_863438191').click(function() {
            $('#detail_863438191').slideUp();
            $('#hide_863438191').hide();
            $('#show_863438191').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='22381#1410312971'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-10T01:36:11+00:00">Sep 10, 2014 01:36 AM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1410312971">&nbsp;</a></div><pre>Horst,

I took a quick look through past tickets and it appears that in some cases running fetch-crl manually can resolve this issue or will
at least point toward the source of the problem.  Do you mind giving that a shot and posting your results?

Thanks!
Vince</pre></div><div class='update_description'><i onclick="document.location='22381#1410312388'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-10T01:26:28+00:00">Sep 10, 2014 01:26 AM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1410312388">&nbsp;</a></div><pre>This issue was discovered while troubleshooting GOC Ticket 22305 with Mat.  <a href='https&#58;//ticket.grid.iu.edu/22305' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/22305</a>
Mat and Horst requested we break this off into a new ticket.</pre></div><div class='update_description'><i onclick="document.location='22381#1410311624'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-09-10T01:13:44+00:00">Sep 10, 2014 01:13 AM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1410311624">&nbsp;</a></div><pre>osgitb1&#58;
-------
osg-configure-rsv-1.0.58-3.osg31.el6.noarch
rsv-3.7.18-2.osg31.el6.noarch
rsv-consumers-3.7.18-2.osg31.el6.noarch
rsv-core-3.7.18-2.osg31.el6.noarch
rsv-metrics-3.7.18-2.osg31.el6.noarch

While we&#39;re on the topic of RSV&#58; there seem to be some problems
with osgitb1&#39;s org.osg.certificates.crl-expiry, too&#58;

----
metricName&#58; org.osg.certificates.crl-expiry
metricType&#58; status
timestamp&#58; 2014-09-05 06&#58;30&#58;20 CDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE
serviceURI&#58; osgitb1.nhn.ou.edu
gatheredAt&#58; osgitb1.nhn.ou.edu
summaryData&#58; CRITICAL
detailsData&#58; CRITICAL&#58; Probe ended with unexpected error condition
2014-09-05T11&#58;30&#58;09Z
CRITICAL&#58; CRL file for CA with hash d3619baa has not been updated since 2014/06/10 12&#58;44&#58;15
CRITICAL&#58; CRL file for CA with hash 7721d4d3 has not been updated since 2014/07/09 00&#58;45&#58;53
CRITICAL&#58; CRL file for CA with hash 679cff61 has not been updated since 2014/06/10 12&#58;44&#58;25
CRITICAL&#58; CRL file for CA with hash 2376bd8e has not been updated since 2014/07/09 00&#58;45&#58;53
CRITICAL&#58; CRL file for CA with hash dd51b42a has not been updated since 2014/07/09 00&#58;45&#58;58
CRITICAL&#58; CRL file for CA with hash 468d15b3 has not been updated since 2014/07/09 00&#58;45&#58;58
CRITICAL&#58; CRL file for CA with hash ba2f39ca has not been updated since 2014/06/10 12&#58;44&#58;15
CRITICAL&#58; CRL file for CA with hash 9c3efee6 has not been updated since 2014/06/10 12&#58;44&#58;25
----

This is an ITB site, but we&#39;re still running the same versions of the CA stuff
as far as I can tell&#58;

<div id='show_1051005972' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1051005972'>ouhep0&#58;
------
osg-ca-certs-updater-0.5-1.osg.el5
osg-ca-certs-1.40-2.osg31.el5

osgitb1&#58;
-------
osg-ca-certs-updater-0.5-1.osg.el6.noarch
osg-ca-certs-1.40-2.osg31.el6.noarch

Any ideas why the latter isn&#39;t updating properly? And what does
&#39;unexpected error condition&#39; mean, anyway? &#58;)

Should we create a separate ticket for this ITB issue?

Thanks a lot,

Horst

</div><script type='text/javascript'>
        $('#show_1051005972').click(function() {
            $('#detail_1051005972').slideDown("normal");
            $('#show_1051005972').hide();
            $('#hide_1051005972').show();
        });
        $('#hide_1051005972').click(function() {
            $('#detail_1051005972').slideUp();
            $('#hide_1051005972').hide();
            $('#show_1051005972').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F22381">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
