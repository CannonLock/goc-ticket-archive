2013-05-03 02:48:14,163 gratia.service(main) [WARNING]: Error!!! Gratia database FAILED to upgrade from 85 to 86. Here is a stack trace of the Exception. 
com.mysql.jdbc.exceptions.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`gratia`.<result 2 when explaining filename '#sql-15ad_1043'>, CONSTRAINT `#sql-15ad_1043_ibfk_1` FOREIGN KEY (`dbid`) REFERENCES `MetricRecord` (`dbid`))
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:931)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)
	at com.mysql.jdbc.Connection.execSQL(Connection.java:3277)
	at com.mysql.jdbc.Statement.executeUpdate(Statement.java:1402)
	at com.mysql.jdbc.Statement.executeUpdate(Statement.java:1317)
	at net.sf.gratia.services.Upgrade86.upgrade(Upgrade86.java:765)
	at net.sf.gratia.services.DatabaseMaintenance.Upgrade(DatabaseMaintenance.java:1306)
	at net.sf.gratia.services.CollectorService.contextInitialized(CollectorService.java:312)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3972)
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)
	at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1041)
	at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:964)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:722)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:593)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

2013-05-03 02:48:14,263 gratia.service(main) [SEVERE]: DatabaseMaintenance: FAILED to update database from 85 to 92
2013-05-03 02:48:14,276 gratia.service(main) [SEVERE]: CollectorService: The database schema was not upgraded properly.
2013-05-03 02:48:14,281 gratia.service(main) [SEVERE]: CollectorService: Manual correction required.
2013-05-03 12:40:04,410 gratia.service(main) [INFO]: CollectorService: Context Destroy Event
2013-05-03 12:40:35,964 gratia.service(main) [CONFIG]: System properties:
2013-05-03 12:40:35,964 gratia.service(main) [CONFIG]: Key: java.runtime.name value: OpenJDK Runtime Environment
2013-05-03 12:40:35,965 gratia.service(main) [CONFIG]: Key: sun.boot.library.path value: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/amd64
2013-05-03 12:40:35,965 gratia.service(main) [CONFIG]: Key: java.vm.version value: 23.7-b01
2013-05-03 12:40:35,966 gratia.service(main) [CONFIG]: Key: shared.loader value: 
2013-05-03 12:40:35,966 gratia.service(main) [CONFIG]: Key: java.vm.vendor value: Oracle Corporation
2013-05-03 12:40:35,966 gratia.service(main) [CONFIG]: Key: java.vendor.url value: http://java.oracle.com/
2013-05-03 12:40:35,967 gratia.service(main) [CONFIG]: Key: path.separator value: :
2013-05-03 12:40:35,967 gratia.service(main) [CONFIG]: Key: java.rmi.server.randomIDs value: true
2013-05-03 12:40:35,968 gratia.service(main) [CONFIG]: Key: java.vm.name value: OpenJDK 64-Bit Server VM
2013-05-03 12:40:35,968 gratia.service(main) [CONFIG]: Key: tomcat.util.buf.StringCache.byte.enabled value: true
2013-05-03 12:40:35,969 gratia.service(main) [CONFIG]: Key: file.encoding.pkg value: sun.io
2013-05-03 12:40:35,969 gratia.service(main) [CONFIG]: Key: java.util.logging.config.file value: /usr/share/tomcat6/conf/logging.properties
2013-05-03 12:40:35,970 gratia.service(main) [CONFIG]: Key: user.country value: US
2013-05-03 12:40:35,970 gratia.service(main) [CONFIG]: Key: sun.java.launcher value: SUN_STANDARD
2013-05-03 12:40:35,970 gratia.service(main) [CONFIG]: Key: sun.os.patch.level value: unknown
2013-05-03 12:40:35,971 gratia.service(main) [CONFIG]: Key: com.mchange.v2.c3p0.management.ManagementCoordinator value: com.mchange.v2.c3p0.management.NullManagementCoordinator
2013-05-03 12:40:35,971 gratia.service(main) [CONFIG]: Key: java.vm.specification.name value: Java Virtual Machine Specification
2013-05-03 12:40:35,972 gratia.service(main) [CONFIG]: Key: user.dir value: /usr/share/tomcat6
2013-05-03 12:40:35,972 gratia.service(main) [CONFIG]: Key: java.runtime.version value: 1.7.0_09-icedtea-mockbuild_2013_03_05_04_44-b00
2013-05-03 12:40:35,973 gratia.service(main) [CONFIG]: Key: java.awt.graphicsenv value: sun.awt.X11GraphicsEnvironment
2013-05-03 12:40:35,973 gratia.service(main) [CONFIG]: Key: java.endorsed.dirs value: 
2013-05-03 12:40:35,974 gratia.service(main) [CONFIG]: Key: os.arch value: amd64
2013-05-03 12:40:35,974 gratia.service(main) [CONFIG]: Key: java.io.tmpdir value: /var/cache/tomcat6/temp
2013-05-03 12:40:35,974 gratia.service(main) [CONFIG]: Key: line.separator value: 

2013-05-03 12:40:35,975 gratia.service(main) [CONFIG]: Key: java.vm.specification.vendor value: Oracle Corporation
2013-05-03 12:40:35,975 gratia.service(main) [CONFIG]: Key: java.util.logging.manager value: org.apache.juli.ClassLoaderLogManager
2013-05-03 12:40:35,976 gratia.service(main) [CONFIG]: Key: java.naming.factory.url.pkgs value: org.apache.naming
2013-05-03 12:40:35,976 gratia.service(main) [CONFIG]: Key: os.name value: Linux
2013-05-03 12:40:35,977 gratia.service(main) [CONFIG]: Key: sun.jnu.encoding value: UTF-8
2013-05-03 12:40:35,977 gratia.service(main) [CONFIG]: Key: java.library.path value: /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
2013-05-03 12:40:35,978 gratia.service(main) [CONFIG]: Key: java.specification.name value: Java Platform API Specification
2013-05-03 12:40:35,978 gratia.service(main) [CONFIG]: Key: java.class.version value: 51.0
2013-05-03 12:40:35,978 gratia.service(main) [CONFIG]: Key: sun.management.compiler value: HotSpot 64-Bit Tiered Compilers
2013-05-03 12:40:35,979 gratia.service(main) [CONFIG]: Key: os.version value: 2.6.32-358.2.1.el6.x86_64
2013-05-03 12:40:35,979 gratia.service(main) [CONFIG]: Key: user.home value: /usr/share/tomcat6
2013-05-03 12:40:35,980 gratia.service(main) [CONFIG]: Key: user.timezone value: Etc/Universal
2013-05-03 12:40:35,980 gratia.service(main) [CONFIG]: Key: catalina.useNaming value: true
2013-05-03 12:40:35,981 gratia.service(main) [CONFIG]: Key: java.awt.printerjob value: sun.print.PSPrinterJob
2013-05-03 12:40:35,981 gratia.service(main) [CONFIG]: Key: java.specification.version value: 1.7
2013-05-03 12:40:35,981 gratia.service(main) [CONFIG]: Key: file.encoding value: UTF-8
2013-05-03 12:40:35,982 gratia.service(main) [CONFIG]: Key: catalina.home value: /usr/share/tomcat6
2013-05-03 12:40:35,982 gratia.service(main) [CONFIG]: Key: user.name value: tomcat
2013-05-03 12:40:35,983 gratia.service(main) [CONFIG]: Key: java.class.path value: :/usr/share/tomcat6/bin/bootstrap.jar:/usr/share/tomcat6/bin/tomcat-juli.jar:/usr/share/java/commons-daemon.jar
2013-05-03 12:40:35,983 gratia.service(main) [CONFIG]: Key: com.sun.management.jmxremote value: 
2013-05-03 12:40:35,984 gratia.service(main) [CONFIG]: Key: java.naming.factory.initial value: org.apache.naming.java.javaURLContextFactory
2013-05-03 12:40:35,984 gratia.service(main) [CONFIG]: Key: package.definition value: sun.,java.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper.
2013-05-03 12:40:35,985 gratia.service(main) [CONFIG]: Key: java.vm.specification.version value: 1.7
2013-05-03 12:40:35,985 gratia.service(main) [CONFIG]: Key: sun.arch.data.model value: 64
2013-05-03 12:40:35,985 gratia.service(main) [CONFIG]: Key: java.home value: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre
2013-05-03 12:40:35,986 gratia.service(main) [CONFIG]: Key: sun.java.command value: org.apache.catalina.startup.Bootstrap start
2013-05-03 12:40:35,986 gratia.service(main) [CONFIG]: Key: java.specification.vendor value: Oracle Corporation
2013-05-03 12:40:35,987 gratia.service(main) [CONFIG]: Key: user.language value: en
2013-05-03 12:40:35,987 gratia.service(main) [CONFIG]: Key: awt.toolkit value: sun.awt.X11.XToolkit
2013-05-03 12:40:35,988 gratia.service(main) [CONFIG]: Key: java.vm.info value: mixed mode
2013-05-03 12:40:35,988 gratia.service(main) [CONFIG]: Key: java.version value: 1.7.0_09-icedtea
2013-05-03 12:40:35,988 gratia.service(main) [CONFIG]: Key: java.ext.dirs value: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/ext:/usr/java/packages/lib/ext
2013-05-03 12:40:35,989 gratia.service(main) [CONFIG]: Key: sun.boot.class.path value: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/resources.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/rt.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/jsse.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/jce.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/charsets.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/netx.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/plugin.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/rhino.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/jfr.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/classes
2013-05-03 12:40:35,989 gratia.service(main) [CONFIG]: Key: java.vendor value: Oracle Corporation
2013-05-03 12:40:35,990 gratia.service(main) [CONFIG]: Key: server.loader value: 
2013-05-03 12:40:35,990 gratia.service(main) [CONFIG]: Key: catalina.base value: /usr/share/tomcat6
2013-05-03 12:40:35,991 gratia.service(main) [CONFIG]: Key: file.separator value: /
2013-05-03 12:40:35,991 gratia.service(main) [CONFIG]: Key: java.vendor.url.bug value: http://bugreport.sun.com/bugreport/
2013-05-03 12:40:35,992 gratia.service(main) [CONFIG]: Key: common.loader value: ${catalina.base}/lib,${catalina.base}/lib/*.jar,${catalina.home}/lib,${catalina.home}/lib/*.jar
2013-05-03 12:40:35,992 gratia.service(main) [CONFIG]: Key: sun.cpu.endian value: little
2013-05-03 12:40:35,992 gratia.service(main) [CONFIG]: Key: sun.io.unicode.encoding value: UnicodeLittle
2013-05-03 12:40:35,993 gratia.service(main) [CONFIG]: Key: package.access value: sun.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper.,sun.beans.
2013-05-03 12:40:35,993 gratia.service(main) [CONFIG]: Key: sun.cpu.isalist value: 
2013-05-03 12:40:35,994 gratia.service(main) [CONFIG]: Service properties:
2013-05-03 12:40:35,994 gratia.service(main) [CONFIG]: Key: service.lifetime.TableStatisticsDaily value: UNLIMITED
2013-05-03 12:40:35,995 gratia.service(main) [CONFIG]: Key: service.rmi.port value: 17000
2013-05-03 12:40:35,995 gratia.service(main) [CONFIG]: Key: service.recordProcessor.threads value: 1
2013-05-03 12:40:35,996 gratia.service(main) [CONFIG]: Key: service.registration.level value: FINE
2013-05-03 12:40:35,996 gratia.service(main) [CONFIG]: Key: service.voms.connections value: voms-servers
2013-05-03 12:40:35,997 gratia.service(main) [CONFIG]: Key: gratia.database.wantStoredProcedures value: 1
2013-05-03 12:40:35,997 gratia.service(main) [CONFIG]: Key: max.housekeeping.nrecords value: 20000
2013-05-03 12:40:35,998 gratia.service(main) [CONFIG]: Key: service.administration.numLogs value: 30
2013-05-03 12:40:35,998 gratia.service(main) [CONFIG]: Key: service.lifetime.MetricRecord.RawXML value: 1 month
2013-05-03 12:40:35,998 gratia.service(main) [CONFIG]: Key: service.service.logfile value: /gratia.log
2013-05-03 12:40:35,999 gratia.service(main) [CONFIG]: Key: service.datapump.chunksize value: 30000
2013-05-03 12:40:35,999 gratia.service(main) [CONFIG]: Key: monitor.backlog.history value: 1
2013-05-03 12:40:36,000 gratia.service(main) [CONFIG]: Key: service.vdt.key.file value: /etc/grid-security/http/key.pem
2013-05-03 12:40:36,000 gratia.service(main) [CONFIG]: Key: service.rmiservlet.logfile value: /gratia-rmi-servlet.log
2013-05-03 12:40:36,001 gratia.service(main) [CONFIG]: Key: service.replication.wait value: 1
2013-05-03 12:40:36,001 gratia.service(main) [CONFIG]: Key: service.vdt.cert.file value: /etc/grid-security/http/cert.pem
2013-05-03 12:40:36,002 gratia.service(main) [CONFIG]: Key: service.lifetime.DupRecord.CutoffDate value: 1 month
2013-05-03 12:40:36,002 gratia.service(main) [CONFIG]: Key: monitor.q.size value: 1
2013-05-03 12:40:36,002 gratia.service(main) [CONFIG]: Key: [gratia] value: 
2013-05-03 12:40:36,003 gratia.service(main) [CONFIG]: Key: service.registration.numLogs value: 30
2013-05-03 12:40:36,003 gratia.service(main) [CONFIG]: Key: service.security.log.level value: INFO
2013-05-03 12:40:36,004 gratia.service(main) [CONFIG]: Key: service.reporting.staticreports value: gratia-reports/MenuConfig/StaticReports.xml
2013-05-03 12:40:36,004 gratia.service(main) [CONFIG]: Key: service.lifetime.ComputeElementRecord value: 6 months
2013-05-03 12:40:36,005 gratia.service(main) [CONFIG]: Key: service.admin.DN.1 value: /DC=org/DC=doegrids/OU=People/CN=Tanya Levshina 508822
2013-05-03 12:40:36,005 gratia.service(main) [CONFIG]: Key: service.security.logfile value: /gratia-security.log
2013-05-03 12:40:36,006 gratia.service(main) [CONFIG]: Key: service.admin.DN.0 value: /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Soichi Hayashi 238
2013-05-03 12:40:36,006 gratia.service(main) [CONFIG]: Key: service.max.logsize value: 250000000
2013-05-03 12:40:36,006 gratia.service(main) [CONFIG]: Key: service.cachesize.Connection value: 1000
2013-05-03 12:40:36,007 gratia.service(main) [CONFIG]: Key: service.lifetime.BacklogStatisticsDaily value: UNLIMITED
2013-05-03 12:40:36,007 gratia.service(main) [CONFIG]: Key: service.security.maxlog value: 10000000
2013-05-03 12:40:36,008 gratia.service(main) [CONFIG]: Key: service.rmi.rmibind value: //localhost:17000
2013-05-03 12:40:36,008 gratia.service(main) [CONFIG]: Key: max.q.size value: 10000
2013-05-03 12:40:36,009 gratia.service(main) [CONFIG]: Key: service.administration.console value: 0
2013-05-03 12:40:36,009 gratia.service(main) [CONFIG]: Key: monitor.smtp.user value: EMAIL-USER-NAME
2013-05-03 12:40:36,009 gratia.service(main) [CONFIG]: Key: gratia.services.version value: v1.13-3.osg.el6
2013-05-03 12:40:36,010 gratia.service(main) [CONFIG]: Key: gratia.database.useJobUsageSiteName value: 0
2013-05-03 12:40:36,010 gratia.service(main) [CONFIG]: Key: service.initial.servlets value: ON
2013-05-03 12:40:36,011 gratia.service(main) [CONFIG]: Key: service.reporting.logfile value: /gratia-reporting.log
2013-05-03 12:40:36,011 gratia.service(main) [CONFIG]: Key: monitor.subject value: EMAIL-SUBJECT
2013-05-03 12:40:36,012 gratia.service(main) [CONFIG]: Key: service.reporting.maxlog value: 10000000
2013-05-03 12:40:36,012 gratia.service(main) [CONFIG]: Key: service.administration.level value: FINE
2013-05-03 12:40:36,012 gratia.service(main) [CONFIG]: Key: service.registration.maxlog value: 10000000
2013-05-03 12:40:36,013 gratia.service(main) [CONFIG]: Key: gratia.service.safeStart value: 0
2013-05-03 12:40:36,013 gratia.service(main) [CONFIG]: Key: service.lifetime.MasterServiceSummary value: UNLIMITED
2013-05-03 12:40:36,014 gratia.service(main) [CONFIG]: Key: gratia.database.wantSummaryTable value: 1
2013-05-03 12:40:36,014 gratia.service(main) [CONFIG]: Key: service.lifetime.Trace.add_JUR_to_summary value: 3 months
2013-05-03 12:40:36,015 gratia.service(main) [CONFIG]: Key: service.registration.console value: 0
2013-05-03 12:40:36,015 gratia.service(main) [CONFIG]: Key: monitor.smtp.authentication.required value: false
2013-05-03 12:40:36,015 gratia.service(main) [CONFIG]: Key: service.lifetime.BacklogStatisticsHourly value: 1 year
2013-05-03 12:40:36,016 gratia.service(main) [CONFIG]: Key: service.lifetime.Subcluster value: UNLIMITED
2013-05-03 12:40:36,016 gratia.service(main) [CONFIG]: Key: service.lifetime.TableStatisticsSnapshots value: 1 day
2013-05-03 12:40:36,017 gratia.service(main) [CONFIG]: Key: service.mysql.user value: gratia
2013-05-03 12:40:36,017 gratia.service(main) [CONFIG]: Key: service.probe.monitor.wait value: 1000
2013-05-03 12:40:36,018 gratia.service(main) [CONFIG]: Key: monitor.table.history value: 1
2013-05-03 12:40:36,018 gratia.service(main) [CONFIG]: Key: service.mysql.rootpassword value: ################################################################
2013-05-03 12:40:36,019 gratia.service(main) [CONFIG]: Key: service.lifetime.Trace value: 6 months
2013-05-03 12:40:36,019 gratia.service(main) [CONFIG]: Key: service.rmiservlet.maxlog value: 10000000
2013-05-03 12:40:36,019 gratia.service(main) [CONFIG]: Key: service.lifetime.DupRecord value: UNLIMITED
2013-05-03 12:40:36,020 gratia.service(main) [CONFIG]: Key: service.ca.certificates value: /etc/grid-security/certificates/
2013-05-03 12:40:36,020 gratia.service(main) [CONFIG]: Key: service.lifetime.JobUsageRecord value: 1 year
2013-05-03 12:40:36,021 gratia.service(main) [CONFIG]: Key: service.rmiservlet.numLogs value: 30
2013-05-03 12:40:36,021 gratia.service(main) [CONFIG]: Key: service.lifetime.StorageElementRecord value: UNLIMITED
2013-05-03 12:40:36,021 gratia.service(main) [CONFIG]: Key: service.autoregister.pem value: 1
2013-05-03 12:40:36,022 gratia.service(main) [CONFIG]: Key: service.reporting.menuconfig value: gratia-reports/MenuConfig/UserConfig_osg.xml
2013-05-03 12:40:36,022 gratia.service(main) [CONFIG]: Key: service.logging.dailyLogging value: 1
2013-05-03 12:40:36,023 gratia.service(main) [CONFIG]: Key: service.lifetime.JobUsageRecord.RawXML value: 1 month
2013-05-03 12:40:36,023 gratia.service(main) [CONFIG]: Key: service.rmi.service value: /gratia
2013-05-03 12:40:36,023 gratia.service(main) [CONFIG]: Key: service.reporting.static.folder value: gratia-reports/reports-static
2013-05-03 12:40:36,024 gratia.service(main) [CONFIG]: Key: monitor.recordProcessor.threads value: false
2013-05-03 12:40:36,024 gratia.service(main) [CONFIG]: Key: service.use.selfgenerated.certs value: 0
2013-05-03 12:40:36,025 gratia.service(main) [CONFIG]: Key: service.ca.crls value: /etc/grid-security/certificates/
2013-05-03 12:40:36,025 gratia.service(main) [CONFIG]: Key: tableStatistics.snapshots.wait value: 5
2013-05-03 12:40:36,026 gratia.service(main) [CONFIG]: Key: service.service.numLogs value: 30
2013-05-03 12:40:36,026 gratia.service(main) [CONFIG]: Key: service.security.numLogs value: 30
2013-05-03 12:40:36,026 gratia.service(main) [CONFIG]: Key: maintain.recordsPerDirectory value: 10000
2013-05-03 12:40:36,027 gratia.service(main) [CONFIG]: Key: monitor.to.address.0 value: TO-EMAIL-ADDRESS
2013-05-03 12:40:36,027 gratia.service(main) [CONFIG]: Key: service.logging.useLog4j value: 1
2013-05-03 12:40:36,028 gratia.service(main) [CONFIG]: Key: monitor.smtp.server value: YOUR-SMTP-SERVER
2013-05-03 12:40:36,028 gratia.service(main) [CONFIG]: Key: service.service.console value: 0
2013-05-03 12:40:36,028 gratia.service(main) [CONFIG]: Key: service.security.console value: 0
2013-05-03 12:40:36,029 gratia.service(main) [CONFIG]: Key: min.housekeeping.nrecords value: 2000
2013-05-03 12:40:36,029 gratia.service(main) [CONFIG]: Key: service.reporting.reports.folder value: gratia-reports/reports
2013-05-03 12:40:36,030 gratia.service(main) [CONFIG]: Key: service.reporting.numLogs value: 30
2013-05-03 12:40:36,030 gratia.service(main) [CONFIG]: Key: service.rmiservlet.console value: 0
2013-05-03 12:40:36,030 gratia.service(main) [CONFIG]: Key: service.mysql.url value: jdbc:mysql://localhost:3306/gratia
2013-05-03 12:40:36,031 gratia.service(main) [CONFIG]: Key: monitor.from.address value: FROM-EMAIL-ADDRESS
2013-05-03 12:40:36,031 gratia.service(main) [CONFIG]: Key: maintain.history.compress value: 24
2013-05-03 12:40:36,032 gratia.service(main) [CONFIG]: Key: service.lifetime.StorageElement value: UNLIMITED
2013-05-03 12:40:36,032 gratia.service(main) [CONFIG]: Key: service.lifetime.DupRecord.Duplicate value: 1 month
2013-05-03 12:40:36,033 gratia.service(main) [CONFIG]: Key: service.lifetime.TableStatisticsHourly value: 1 year
2013-05-03 12:40:36,033 gratia.service(main) [CONFIG]: Key: service.service.maxlog value: 10000000
2013-05-03 12:40:36,033 gratia.service(main) [CONFIG]: Key: service.reporting.console value: 0
2013-05-03 12:40:36,034 gratia.service(main) [CONFIG]: Key: service.rmiservlet.level value: FINE
2013-05-03 12:40:36,034 gratia.service(main) [CONFIG]: Key: service.cachesize.Software value: 1000
2013-05-03 12:40:36,035 gratia.service(main) [CONFIG]: Key: service.initial.housekeeping value: DISABLE
2013-05-03 12:40:36,035 gratia.service(main) [CONFIG]: Key: service.datapump.trace value: 0
2013-05-03 12:40:36,035 gratia.service(main) [CONFIG]: Key: service.service.level value: FINE
2013-05-03 12:40:36,036 gratia.service(main) [CONFIG]: Key: service.administration.logfile value: /gratia-administration.log
2013-05-03 12:40:36,036 gratia.service(main) [CONFIG]: Key: service.open.connection value: http://rsv-itb.grid.iu.edu:8880
2013-05-03 12:40:36,036 gratia.service(main) [CONFIG]: Key: use.report.authentication value: true
2013-05-03 12:40:36,037 gratia.service(main) [CONFIG]: Key: service.lifetime.DupRecord.SQLError value: 1 year
2013-05-03 12:40:36,037 gratia.service(main) [CONFIG]: Key: service.reporting.user value: reader
2013-05-03 12:40:36,038 gratia.service(main) [CONFIG]: Key: service.initial.recordProcessor value: ON
2013-05-03 12:40:36,038 gratia.service(main) [CONFIG]: Key: service.rmi.rmilookup value: rmi://localhost:17000
2013-05-03 12:40:36,038 gratia.service(main) [CONFIG]: Key: maintain.history.checkInterval value: 6 h
2013-05-03 12:40:36,039 gratia.service(main) [CONFIG]: Key: service.registration.logfile value: /gratia-registration.log
2013-05-03 12:40:36,039 gratia.service(main) [CONFIG]: Key: service.lifetime.BacklogStatisticsSnapshots value: 1 day
2013-05-03 12:40:36,040 gratia.service(main) [CONFIG]: Key: service.lifetime.ComputeElement value: 6 months
2013-05-03 12:40:36,040 gratia.service(main) [CONFIG]: Key: service.security.level value: 0
2013-05-03 12:40:36,040 gratia.service(main) [CONFIG]: Key: service.lifetime.DupRecord.ExpirationDate value: 1 month
2013-05-03 12:40:36,041 gratia.service(main) [CONFIG]: Key: gratia.database.wantSummaryTrigger value: 1
2013-05-03 12:40:36,041 gratia.service(main) [CONFIG]: Key: service.administration.maxlog value: 10000000
2013-05-03 12:40:36,042 gratia.service(main) [CONFIG]: Key: backlogStatistics.snapshots.wait value: 15
2013-05-03 12:40:36,042 gratia.service(main) [CONFIG]: Key: service.initial.replication value: ON
2013-05-03 12:40:36,042 gratia.service(main) [CONFIG]: Key: gratia.database.wantNodeSummary value: 0
2013-05-03 12:40:36,043 gratia.service(main) [CONFIG]: Key: gratia.reporting.version value: v1.13-3.osg.el6
2013-05-03 12:40:36,043 gratia.service(main) [CONFIG]: Key: service.secure.connection value: https://rsv-itb.grid.iu.edu:8443
2013-05-03 12:40:36,044 gratia.service(main) [CONFIG]: Key: service.lifetime.MetricRecord value: 36 months
2013-05-03 12:40:36,044 gratia.service(main) [CONFIG]: Key: service.reporting.level value: FINE
2013-05-03 12:40:36,044 gratia.service(main) [CONFIG]: Key: service.reporting.logging value: true
2013-05-03 12:40:36,045 gratia.service(main) [CONFIG]: Key: service.lifetime.MasterServiceSummaryHourly value: 5 days
2013-05-03 12:40:36,045 gratia.service(main) [CONFIG]: Key: maintain.history.log value: 14
2013-05-03 12:40:36,045 gratia.service(main) [CONFIG]: Key: service.mysql.driver value: com.mysql.jdbc.Driver
2013-05-03 12:40:36,046 gratia.service(main) [CONFIG]: Key: monitor.recordProcessor.wait value: 60
2013-05-03 12:40:36,046 gratia.service(main) [INFO]: Certificate security level: 0
2013-05-03 12:40:36,050 gratia.service(main) [INFO]: RMI Registry Created: rsv-itb.grid.iu.edu:17000
2013-05-03 12:40:36,061 gratia.service(main) [INFO]: CollectorService: RMI Service Started
2013-05-03 12:40:36,068 gratia.service(main) [INFO]: DatabaseMaintenance: initialized
2013-05-03 12:40:36,383 gratia.service(main) [INFO]: DatabaseMaintenance: current database version(85) intended database version(92)
2013-05-03 12:40:36,384 gratia.service(main) [INFO]: CollectorService: doing initial cleanup
2013-05-03 12:40:39,356 gratia.service(main) [INFO]: Table conversion to INNODB complete
2013-05-03 12:40:39,357 gratia.service(main) [INFO]: CollectorService: starting Hibernate
2013-05-03 12:40:41,355 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.TableStatisticsDaily of UNLIMITED
2013-05-03 12:40:41,356 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.MetricRecord.RawXML of 1 MONTH
2013-05-03 12:40:41,356 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.DupRecord.CutoffDate of 1 MONTH
2013-05-03 12:40:41,356 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.ComputeElementRecord of 6 MONTHS
2013-05-03 12:40:41,357 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.BacklogStatisticsDaily of UNLIMITED
2013-05-03 12:40:41,357 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.MasterServiceSummary of UNLIMITED
2013-05-03 12:40:41,357 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.Trace.add_JUR_to_summary of 3 MONTHS
2013-05-03 12:40:41,358 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.BacklogStatisticsHourly of 1 YEAR
2013-05-03 12:40:41,358 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.Subcluster of UNLIMITED
2013-05-03 12:40:41,358 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.TableStatisticsSnapshots of 1 DAY
2013-05-03 12:40:41,359 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.Trace of 6 MONTHS
2013-05-03 12:40:41,359 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.DupRecord of UNLIMITED
2013-05-03 12:40:41,359 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.JobUsageRecord of 1 YEAR
2013-05-03 12:40:41,359 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.StorageElementRecord of UNLIMITED
2013-05-03 12:40:41,360 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.JobUsageRecord.RawXML of 1 MONTH
2013-05-03 12:40:41,360 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.StorageElement of UNLIMITED
2013-05-03 12:40:41,360 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.DupRecord.Duplicate of 1 MONTH
2013-05-03 12:40:41,361 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.TableStatisticsHourly of 1 YEAR
2013-05-03 12:40:41,361 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.DupRecord.SQLError of 1 YEAR
2013-05-03 12:40:41,361 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.BacklogStatisticsSnapshots of 1 DAY
2013-05-03 12:40:41,362 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.ComputeElement of 6 MONTHS
2013-05-03 12:40:41,362 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.DupRecord.ExpirationDate of 1 MONTH
2013-05-03 12:40:41,362 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.MetricRecord of 36 MONTHS
2013-05-03 12:40:41,363 gratia.service(main) [FINE]: ExpirationDateCalculator found lifetime property service.lifetime.MasterServiceSummaryHourly of 5 DAYS
2013-05-03 12:40:44,152 gratia.service(main) [INFO]: HibernateWrapper: Hibernate Services Started
2013-05-03 12:40:44,153 gratia.service(main) [INFO]: CollectorService: checking defaults in DB
2013-05-03 12:40:44,187 gratia.service(main) [INFO]: CollectorService: checking indexes on DB tables
2013-05-03 12:40:44,187 gratia.service(main) [INFO]: DatabaseMaintenance: checking indexes on tables.
2013-05-03 12:40:53,212 gratia.service(main) [INFO]: DatabaseMaintenance: table index checking complete.
2013-05-03 12:40:53,212 gratia.service(main) [INFO]: CollectorService: check / upgrade schema to current version
2013-05-03 12:40:53,230 gratia.service(main) [INFO]: DatabaseMaintenance: starting Upgrade check - current version: 85 supported version: 92
2013-05-03 12:40:53,241 gratia.service(main) [FINE]: Upgrade86 - Beginning database schema upgrade from version 85 to version 86
2013-05-03 12:43:10,394 gratia.service(main) [WARNING]: Error!!! Gratia database FAILED to upgrade from 85 to 86. Here is a stack trace of the Exception. 
com.mysql.jdbc.exceptions.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`gratia`.<result 2 when explaining filename '#sql-15ad_2334'>, CONSTRAINT `#sql-15ad_2334_ibfk_1` FOREIGN KEY (`dbid`) REFERENCES `MetricRecord` (`dbid`))
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:931)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)
	at com.mysql.jdbc.Connection.execSQL(Connection.java:3277)
	at com.mysql.jdbc.Statement.executeUpdate(Statement.java:1402)
	at com.mysql.jdbc.Statement.executeUpdate(Statement.java:1317)
	at net.sf.gratia.services.Upgrade86.upgrade(Upgrade86.java:765)
	at net.sf.gratia.services.DatabaseMaintenance.Upgrade(DatabaseMaintenance.java:1306)
	at net.sf.gratia.services.CollectorService.contextInitialized(CollectorService.java:312)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3972)
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)
	at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1041)
	at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:964)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:722)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
	at org.apache.catalina.core.StandardService.start(StandardService.java:516)
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
	at org.apache.catalina.startup.Catalina.start(Catalina.java:593)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

2013-05-03 12:43:10,395 gratia.service(main) [SEVERE]: DatabaseMaintenance: FAILED to update database from 85 to 92
2013-05-03 12:43:10,395 gratia.service(main) [SEVERE]: CollectorService: The database schema was not upgraded properly.
2013-05-03 12:43:10,396 gratia.service(main) [SEVERE]: CollectorService: Manual correction required.
