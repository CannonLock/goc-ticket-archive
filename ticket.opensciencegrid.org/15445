<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[15445] Transfers from NET2_DATADISK are failing with &#34;Communication error on send&#34;</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=15445" method="post">
<div class="page-header">
    <h3><span class="muted">15445</span> / Transfers from NET2_DATADISK are failing with &#34;Communication error on send&#34;</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Michal.Svatos </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Michal.Svatos</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls"></div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-06-06</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=94677">94677</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=23393">23393</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/15445", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/15445?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/15445?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Transfers%20from%20NET2_DATADISK%20are%20failing%20with%20%26%2334%3BCommunication%20error%20on%20send%26%2334%3B%20ISSUE%3D15445%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='15445#1372000586'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-23T15:16:26+00:00">Jun 23, 2013 03:16 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1372000586">&nbsp;</a></div><pre>Greetings,

To summarize&#58;

These errors were caused by our atlas.bu.edu SRM incorrectly not being in the
OSG BDII. FTS3 then had the right host (presumably from AGIS) but did not have
the port number, thus causing all transfers to fail with &#34;gfal2&#34; related errors
and only for sonar tests.

Thanks to FTS3/sonar, there is a workaround for this that has been in place for
days. With this fix, the errors have stopped for several days. We will continue
to work with OSG to get our BDII entry fixed. I will close this ticket in the
mean time.

- Saul
-- by youssef@.... at Sun Jun 23 15&#58;16&#58;13 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1371717693'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-20T08:41:33+00:00">Jun 20, 2013 08:41 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371717693">&nbsp;</a></div><pre>Hi Michail,
FYI from out fts3 node&#58;
rpm -q gfal2-core
gfal2-core-2.2.2-10.el6.x86_64
and
Infosys=lcgbdii.gridpp.rl.ac.uk&#58;2170

-- by Brian Davies at Thu Jun 20 08&#58;40&#58;44 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1371670091'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-19T19:28:11+00:00">Jun 19, 2013 07:28 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371670091">&nbsp;</a></div><pre>On Wed Jun 19 04&#58;34&#58;19 2013, osg-goc-rest wrote&#58;

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; we are still investigating why FTS2 transfers on the contrary are OK.</font>
<font color='#7F7E6F'>&#62; but for NET2&#58; please add atlas.bu.edu endpoint in the BDII</font>
<font color='#7F7E6F'>&#62;</font>

Hi Alessandro,

I can confirm that atlas.bu.edu is no longer in our BDII, post move. We&#39;re
working with OSG to fix it.

Sorry - I didn&#39;t even think to look at the BDII. I thought that ATLAS had no
BDII dependence at all anymore and it was all from AGIS.

- Saul

<font color='#7F7E6F'>&#62; -- by alessandro.di.girolamo at Wed Jun 19 08&#58;32&#58;49 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Wed Jun 19 08&#58;33&#58;49 UTC 2013</font>
-- by youssef@.... at Wed Jun 19 19&#58;28&#58;00 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1371631550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-19T08:45:50+00:00">Jun 19, 2013 08:45 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371631550">&nbsp;</a></div><pre>It was a safe guess, just checked FTS2 t0-export at CERN and services.xml contains

&#60;service name=&#34;httpg&#58;//atlas.bu.edu&#58;8443/srm/v2/server&#34;&#62;
&#60;parameters&#62;
&#60;endpoint&#62;httpg&#58;//atlas.bu.edu&#58;8443/srm/v2/server&#60;/endpoint&#62;
&#60;type&#62;SRM&#60;/type&#62;
&#60;version&#62;2.2.0&#60;/version&#62;
&#60;site&#62;BU_ATLAS_TIER2&#60;/site&#62;
&#60;wsdl&#62;<a href='http&#58;//sdm.lbl.gov/srm-wg/srm.v2.2.wsdl&#60' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/srm-wg/srm.v2.2.wsdl&#60</a>;/wsdl&#62;
&#60;volist&#62;
&#60;vo&#62;VO&#58;atlas&#60;/vo&#62;
&#60;vo&#62;VO&#58;cdf&#60;/vo&#62;
&#60;vo&#62;VO&#58;glow&#60;/vo&#62;
&#60;vo&#62;VO&#58;gridunesp&#60;/vo&#62;
&#60;vo&#62;VO&#58;mis&#60;/vo&#62;
&#60;vo&#62;VO&#58;ops&#60;/vo&#62;
&#60;vo&#62;VO&#58;osg&#60;/vo&#62;
&#60;vo&#62;atlas&#60;/vo&#62;
&#60;vo&#62;cdf&#60;/vo&#62;
&#60;vo&#62;glow&#60;/vo&#62;
&#60;vo&#62;gridunesp&#60;/vo&#62;
&#60;vo&#62;mis&#60;/vo&#62;
&#60;vo&#62;ops&#60;/vo&#62;
&#60;vo&#62;osg&#60;/vo&#62;
&#60;/volist&#62;
&#60;param name=&#34;VO&#58; atlas&#58;SEMountPoint&#34;&#62;/&#60;/param&#62;
&#60;/parameters&#62;
&#60;/service&#62;

meaning that sometime in the past (before FTS3 came into the picture) this SE was publishing itself and FTS2 already has cached the info, which is not the case know since this SE is no longer published in the BDII.

Michail

-- by Michail Salichos at Wed Jun 19 08&#58;44&#58;46 UTC 2013

<div id='show_1133285780' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1133285780'>GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a>
</div><script type='text/javascript'>
        $('#show_1133285780').click(function() {
            $('#detail_1133285780').slideDown("normal");
            $('#show_1133285780').hide();
            $('#hide_1133285780').show();
        });
        $('#hide_1133285780').click(function() {
            $('#detail_1133285780').slideUp();
            $('#hide_1133285780').hide();
            $('#show_1133285780').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15445#1371631069'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-19T08:37:49+00:00">Jun 19, 2013 08:37 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371631069">&nbsp;</a></div><pre>Could you pls point me to an FTS2 instance in which transfers are good so as to check?

All I can think of is the host was published at some point in the past, FTS2 cached(services.xml) the endpoint url and reusing it without checking the BDII

Michail

-- by Michail Salichos at Wed Jun 19 08&#58;37&#58;21 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1371630829'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-19T08:33:49+00:00">Jun 19, 2013 08:33 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371630829">&nbsp;</a></div><pre>Ciao, indeed that what we noticed here too....
[lxvoadm05] /afs/cern.ch/user/d/digirola &#62; ldapsearch -LLL -h $LCG_GFAL_INFOSYS -x -b &#34;o=grid&#34; &#39;(&(objectClass=GlueService)(GlueServiceEndpoint=*atlas.bu.edu*))&#39;
[lxvoadm05] /afs/cern.ch/user/d/digirola &#62; ldapsearch -LLL -h $LCG_GFAL_INFOSYS -x -b &#34;o=grid&#34; &#39;(&(objectClass=GlueService)(GlueServiceEndpoint=*bu.edu*))&#39;
dn&#58; GlueServiceUniqueID=httpg&#58;//atlas-net2.bu.edu&#58;8443/srm/v2/server,Mds-Vo-na
me=BU_ATLAS_Tier2,Mds-Vo-name=local,o=grid
GlueServiceStartTime&#58; 1970-01-01T00&#58;00&#58;00Z
GlueServiceStatusInfo&#58; OK
objectClass&#58; GlueKey
objectClass&#58; GlueSchemaVersion
objectClass&#58; GlueService
objectClass&#58; GlueTop
GlueServiceUniqueID&#58; httpg&#58;//atlas-net2.bu.edu&#58;8443/srm/v2/server
GlueServiceAccessControlRule&#58; cdf
GlueServiceAccessControlRule&#58; VO&#58;cdf
GlueServiceAccessControlRule&#58; ops
GlueServiceAccessControlRule&#58; VO&#58;ops
GlueServiceAccessControlRule&#58; atlas
GlueServiceAccessControlRule&#58; VO&#58;atlas
GlueServiceAccessControlRule&#58; hcc
GlueServiceAccessControlRule&#58; VO&#58;hcc
GlueServiceAccessControlRule&#58; mis
GlueServiceAccessControlRule&#58; VO&#58;mis
GlueServiceAccessControlRule&#58; osg
GlueServiceAccessControlRule&#58; VO&#58;osg
GlueServiceAccessControlRule&#58; glow
GlueServiceAccessControlRule&#58; VO&#58;glow
GlueServiceEndpoint&#58; httpg&#58;//atlas-net2.bu.edu&#58;8443/srm/v2/server
GlueServiceVersion&#58; 2.2.0
GlueSchemaVersionMinor&#58; 3
GlueServiceStatus&#58; OK
GlueServiceName&#58; httpg&#58;//atlas-net2.bu.edu&#58;8443/srm/v2/server
GlueServiceType&#58; SRM
GlueServiceWSDL&#58; <a href='http&#58;//sdm.lbl.gov/srm-wg/srm.v2.2.wsdl' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/srm-wg/srm.v2.2.wsdl</a>
GlueServiceSemantics&#58; <a href='http&#58;//sdm.lbl.gov/srm-wg/doc/SRM.v2.2.pdf' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/srm-wg/doc/SRM.v2.2.pdf</a>
GlueForeignKey&#58; GlueSiteUniqueID=BU_ATLAS_Tier2
<div id='show_725060309' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_725060309'>GlueServiceOwner&#58; OSG
GlueServiceAccessPointURL&#58; httpg&#58;//atlas-net2.bu.edu&#58;8443/srm/v2/server
GlueSchemaVersionMajor&#58; 1
GlueServiceURI&#58; httpg&#58;//atlas-net2.bu.edu&#58;8443/srm/v2/server

we are still investigating why FTS2 transfers on the contrary are OK. but for NET2&#58; please add atlas.bu.edu endpoint in the BDII

-- by alessandro.di.girolamo at Wed Jun 19 08&#58;32&#58;49 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a>
</div><script type='text/javascript'>
        $('#show_725060309').click(function() {
            $('#detail_725060309').slideDown("normal");
            $('#show_725060309').hide();
            $('#hide_725060309').show();
        });
        $('#hide_725060309').click(function() {
            $('#detail_725060309').slideUp();
            $('#hide_725060309').hide();
            $('#show_725060309').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15445#1371630649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-19T08:30:49+00:00">Jun 19, 2013 08:30 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371630649">&nbsp;</a></div><pre>As a proof of saying, CERN FTS3 pilot just received a transfer job from
<a href='srm&#58;//atlas.bu.edu/srm/v2/server?...' target='_blank' rel='nofollow'>srm&#58;//atlas.bu.edu/srm/v2/server?...</a>
to
<a href='srm&#58;//sdrm.t1.grid.kiae.ru&#58;8443/srm/managerv2?' target='_blank' rel='nofollow'>srm&#58;//sdrm.t1.grid.kiae.ru&#58;8443/srm/managerv2?</a>

Did you notice the port is missing from atlas.bu.edu surl? The error message is (port missing)&#58;
Communication error on send, err&#58; [SE][Ls][] httpg&#58;//atlas.bu.edu/srm/managerv2&#58; C.....

atlas.bu.edu is not published in the BDII, so there is no way for FTS3 in knowing what&#39;s the port number of SRM endpoint url

Michail

-- by Michail Salichos at Wed Jun 19 08&#58;30&#58;03 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1371625480'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-19T07:04:40+00:00">Jun 19, 2013 07:04 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371625480">&nbsp;</a></div><pre>The only way to throttle down the traffic with FTS3 is by reducing the number of active for an endpoint to 1, meaning, at any given time there should be no more than one active transfer.

Michail

-- by Michail Salichos at Wed Jun 19 07&#58;03&#58;41 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1371588804'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-18T20:53:24+00:00">Jun 18, 2013 08:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371588804">&nbsp;</a></div><pre>Hi,

I was thinking of just reducing the number of errors per hour so that Michail,
Brian and I can debug the problem at our leisure without causing so many errors
that shifters blacklist NET2_DATDISK.

I&#39;m also actually curious if there are nice new ways to throttle down this
traffic with FTS3 that aren&#39;t available in FTS2.

- Saul

On Tue Jun 18 13&#58;57&#58;20 2013, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; Hello,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Reducing the number of active transfers won&#39;t help, the problem lies</font>
<font color='#7F7E6F'>&#62; elsewhere.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The source surl is</font>
<font color='#7F7E6F'>&#62; <a href='srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=...' target='_blank' rel='nofollow'>srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=...</a></font>
<font color='#7F7E6F'>&#62; but the SRM endpoint url resolved as</font>
<font color='#7F7E6F'>&#62; Communication error on send, err&#58; [SE][Ls][]</font>
<font color='#7F7E6F'>&#62; httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running.</font>
<font color='#7F7E6F'>&#62; Notice that the port 8443 is missing from httpg url, that why you</font>
<font color='#7F7E6F'>&#62; are getting connection errors.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; What is puzzling me is that I just submitted a transfer using RAL FTS3</font>
<font color='#7F7E6F'>&#62; instance and SRM endpoint url is resolved correctly&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//www-ftsmon.gridpp.rl.ac.uk/fts3/ftsmon/jobs/744141bf-d925-4ef6-' target='_blank' rel='nofollow'>http&#58;//www-ftsmon.gridpp.rl.ac.uk/fts3/ftsmon/jobs/744141bf-d925-4ef6-</a></font>
<font color='#7F7E6F'>&#62; 99b8-9e22be545893</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Failed to get source file size&#58;</font>
<font color='#7F7E6F'>&#62;</font>
[gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-
<div id='show_1689118814' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1689118814'><font color='#7F7E6F'>&#62; ifce</font>
<font color='#7F7E6F'>&#62; err&#58; Permission denied, err&#58; [SE][Ls][SRM_AUTHORIZATION_FAILURE]</font>
<font color='#7F7E6F'>&#62; httpg&#58;//atlas.bu.edu&#58;8443/srm/v2/server&#58; not</font>
<font color='#7F7E6F'>&#62; mapped./DC=ch/DC=cern/OU=Organic</font>
<font color='#7F7E6F'>&#62; Units/OU=Users/CN=msalicho/CN=709008/CN=Michail Salichos</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; The error is normal and the SRM endpoint url is resolved correctly</font>
<font color='#7F7E6F'>&#62; (httpg&#58;//atlas.bu.edu&#58;8443/srm/v2/server)</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Brian, could you pls check in one of FTS3 hosts&#58;</font>
<font color='#7F7E6F'>&#62; rpm -q gfal2-core (it should be gfal2-core-2.2.2-10.el6.x86_64)</font>
<font color='#7F7E6F'>&#62; also, send me Infosys variable from /etc/fts3/fts3config</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Regards,</font>
<font color='#7F7E6F'>&#62; Michail</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by Michail Salichos at Tue Jun 18 17&#58;56&#58;17 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Tue Jun 18 17&#58;56&#58;54 UTC 2013</font>
-- by youssef@.... at Tue Jun 18 20&#58;53&#58;13 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393
</div><script type='text/javascript'>
        $('#show_1689118814').click(function() {
            $('#detail_1689118814').slideDown("normal");
            $('#show_1689118814').hide();
            $('#hide_1689118814').show();
        });
        $('#hide_1689118814').click(function() {
            $('#detail_1689118814').slideUp();
            $('#hide_1689118814').hide();
            $('#show_1689118814').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15445#1371578214'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-18T17:56:54+00:00">Jun 18, 2013 05:56 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371578214">&nbsp;</a></div><pre>Hello,

Reducing the number of active transfers won&#39;t help, the problem lies elsewhere.

The source surl is
<a href='srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=...' target='_blank' rel='nofollow'>srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=...</a>
but the SRM endpoint url resolved as
Communication error on send, err&#58; [SE][Ls][] httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running.
Notice that the port  8443 is  missing from  httpg url, that why you are getting connection errors.

What is puzzling me is that I just submitted a transfer using RAL FTS3 instance and SRM endpoint url is resolved correctly&#58;

<a href='http&#58;//www-ftsmon.gridpp.rl.ac.uk/fts3/ftsmon/jobs/744141bf-d925-4ef6-99b8-9e22be545893' target='_blank' rel='nofollow'>http&#58;//www-ftsmon.gridpp.rl.ac.uk/fts3/ftsmon/jobs/744141bf-d925-4ef6-99b8-9e22be545893</a>

Failed to get source file size&#58; [gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-ifce err&#58; Permission denied, err&#58; [SE][Ls][SRM_AUTHORIZATION_FAILURE] httpg&#58;//atlas.bu.edu&#58;8443/srm/v2/server&#58; not mapped./DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=msalicho/CN=709008/CN=Michail Salichos

The error is normal and the SRM endpoint url is resolved correctly (httpg&#58;//atlas.bu.edu&#58;8443/srm/v2/server)

Brian, could you pls check in one of FTS3 hosts&#58;
rpm -q gfal2-core (it should be gfal2-core-2.2.2-10.el6.x86_64)
also, send me Infosys variable from /etc/fts3/fts3config

Regards,
Michail

-- by Michail Salichos at Tue Jun 18 17&#58;56&#58;17 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1371574550'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-18T16:55:50+00:00">Jun 18, 2013 04:55 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371574550">&nbsp;</a></div><pre>Changed CC to brian.davies@....;atlas-adc-cloud-UK@....;Michail.Salichos@....

-- by alessandro.di.girolamo at Tue Jun 18 16&#58;55&#58;28 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1371480015'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-17T14:40:15+00:00">Jun 17, 2013 02:40 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371480015">&nbsp;</a></div><pre>100% failure rate, will blacklist it again&#58;

<a href='https&#58;//savannah.cern.ch/support/?138030' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/support/?138030</a>

failure example&#58;
================
<a href='http&#58;//dashb-atlas-data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306171320&date.interval=0&date.to=201306171420&grouping.src=%28cloud' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306171320&date.interval=0&date.to=201306171420&grouping.src=%28cloud</a>,site,token%29&m.content=%28r_eff,s_eff,s_thr,t_eff,t_err,t_suc,t_thr%29&src.cloud=%28%22US%22%29&src.site=%28%22NET2%22%29&tab=details
------------------------
2013-06-17 14&#58;17&#58;46	step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528	#394	FAILED_TRANSFER
GUID&#58;	84ad41ed-e361-4ed5-82ef-9744a2aa0f66
ATTEMPT&#58;	29
TOOL ID&#58;	DQ2
SRC SURL&#58;	<a href='srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=/gpfs1/atlasdatadisk/step09/AOD/NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528' target='_blank' rel='nofollow'>srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=/gpfs1/atlasdatadisk/step09/AOD/NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528</a>
DEST SURL&#58;	<a href='srm&#58;//lcg-dpm01.hep.ucl.ac.uk&#58;8446/srm/managerv2?SFN=/dpm/hep.ucl.ac.uk/home/atlas/atlasdatadisk/rucio/step09/98/df/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528' target='_blank' rel='nofollow'>srm&#58;//lcg-dpm01.hep.ucl.ac.uk&#58;8446/srm/managerv2?SFN=/dpm/hep.ucl.ac.uk/home/atlas/atlasdatadisk/rucio/step09/98/df/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528</a>
TRANSFER ID&#58;	0423e7f6-7990-4570-bbf6-a32ee5a5421f
TRANSFER SERVICE&#58;	<a href='https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443/glite-data-transfer-fts/services/FileTransfer' target='_blank' rel='nofollow'>https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443/glite-data-transfer-fts/services/FileTransfer</a>
ERROR MSG&#58;	[FTS] FTS State [Failed] FTS Retries [0] Reason [Failed to get source file size&#58; [gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-ifce err&#58; Communication error on send, err&#58; [SE][Ls][] httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running on lcgfts06.gridpp.rl.ac.uk reports Error reading token data&#58; Connection closed] Duration [11]

--------------------

-- by kai.leffhalm at Mon Jun 17 14&#58;27&#58;45 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1371479953'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-17T14:39:13+00:00">Jun 17, 2013 02:39 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371479953">&nbsp;</a></div><pre>Right.

These are all FTS3 errors (you can tell by the references to &#34;gfal&#34;).

What I&#39;d like to do is either turn off the FTS3 tests or (better) reduce the
rate to, say, at most 10 per hour to help the FTS3 guys debug whatever is going
wrong without causing our entire NET2_DATADISK to get blacklisted. Brian Davies
made a request along these lines&#58;

<a href='https&#58;//savannah.cern.ch/support/?138095' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/support/?138095</a>

but I think people might have not noticed with software week happening.

- Saul

On Mon Jun 17 10&#58;28&#58;19 2013, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; 100% failure rate, will blacklist it again&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//savannah.cern.ch/support/?138030' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/support/?138030</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; failure example&#58;</font>
<font color='#7F7E6F'>&#62; ================</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; http&#58;//dashb-atlas-</font>
<font color='#7F7E6F'>&#62;</font>
data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306171320&date.interval=0&date.to=201306171420&grouping.src=%28cloud,site,token%29&m.content=%28r_eff,s_eff,s_thr,t_eff,t_err,t_suc,t_thr%29&src.cloud=%28%22US%22%29&src.site=%28%22NET2%22%29&tab=details
<font color='#7F7E6F'>&#62; ------------------------</font>
<font color='#7F7E6F'>&#62; 2013-06-17</font>
<font color='#7F7E6F'>&#62; 14&#58;17&#58;46</font>
<font color='#7F7E6F'>&#62; step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528</font>
<font color='#7F7E6F'>&#62; #394 FAILED_TRANSFER</font>
<font color='#7F7E6F'>&#62; GUID&#58; 84ad41ed-e361-4ed5-82ef-9744a2aa0f66</font>
<font color='#7F7E6F'>&#62; ATTEMPT&#58; 29</font>
<font color='#7F7E6F'>&#62; TOOL ID&#58; DQ2</font>
<font color='#7F7E6F'>&#62; SRC</font>
<div id='show_288479637' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_288479637'><font color='#7F7E6F'>&#62; SURL&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<a href='srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=/gpfs1/atlasdatadisk/step09/AOD/NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528' target='_blank' rel='nofollow'>srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=/gpfs1/atlasdatadisk/step09/AOD/NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528</a>
<font color='#7F7E6F'>&#62; DEST</font>
<font color='#7F7E6F'>&#62; SURL&#58; srm&#58;//lcg-</font>
<font color='#7F7E6F'>&#62;</font>
dpm01.hep.ucl.ac.uk&#58;8446/srm/managerv2?SFN=/dpm/hep.ucl.ac.uk/home/atlas/atlasdatadisk/rucio/step09/98/df/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528
<font color='#7F7E6F'>&#62; TRANSFER ID&#58; 0423e7f6-7990-4570-bbf6-a32ee5a5421f</font>
<font color='#7F7E6F'>&#62; TRANSFER</font>
<font color='#7F7E6F'>&#62; SERVICE&#58; <a href='https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443/glite-data-transfer-' target='_blank' rel='nofollow'>https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443/glite-data-transfer-</a></font>
<font color='#7F7E6F'>&#62; fts/services/FileTransfer</font>
<font color='#7F7E6F'>&#62; ERROR MSG&#58; [FTS] FTS State [Failed] FTS Retries [0] Reason [Failed to</font>
<font color='#7F7E6F'>&#62; get source file size&#58;</font>
<font color='#7F7E6F'>&#62;</font>
[gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-
<font color='#7F7E6F'>&#62; ifce</font>
<font color='#7F7E6F'>&#62; err&#58; Communication error on send, err&#58; [SE][Ls][]</font>
<font color='#7F7E6F'>&#62; httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running on</font>
<font color='#7F7E6F'>&#62; lcgfts06.gridpp.rl.ac.uk reports Error reading token data&#58; Connection</font>
<font color='#7F7E6F'>&#62; closed] Duration [11]</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; --------------------</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by kai.leffhalm at Mon Jun 17 14&#58;26&#58;52 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; SUM tests are still succeeding, whitlisting it for a test</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by kai.leffhalm at Mon Jun 17 12&#58;46&#58;44 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Mon Jun 17 14&#58;27&#58;47 UTC 2013</font>
-- by youssef@.... at Mon Jun 17 14&#58;39&#58;03 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393
</div><script type='text/javascript'>
        $('#show_288479637').click(function() {
            $('#detail_288479637').slideDown("normal");
            $('#show_288479637').hide();
            $('#hide_288479637').show();
        });
        $('#hide_288479637').click(function() {
            $('#detail_288479637').slideUp();
            $('#hide_288479637').hide();
            $('#show_288479637').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='15445#1371479267'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-17T14:27:47+00:00">Jun 17, 2013 02:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371479267">&nbsp;</a></div><pre>100% failure rate, will blacklist it again&#58;

<a href='https&#58;//savannah.cern.ch/support/?138030' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/support/?138030</a>

failure example&#58;
================
<a href='http&#58;//dashb-atlas-data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306171320&date.interval=0&date.to=201306171420&grouping.src=%28cloud' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306171320&date.interval=0&date.to=201306171420&grouping.src=%28cloud</a>,site,token%29&m.content=%28r_eff,s_eff,s_thr,t_eff,t_err,t_suc,t_thr%29&src.cloud=%28%22US%22%29&src.site=%28%22NET2%22%29&tab=details
------------------------
2013-06-17 14&#58;17&#58;46	step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528	#394	FAILED_TRANSFER
GUID&#58;	84ad41ed-e361-4ed5-82ef-9744a2aa0f66
ATTEMPT&#58;	29
TOOL ID&#58;	DQ2
SRC SURL&#58;	<a href='srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=/gpfs1/atlasdatadisk/step09/AOD/NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528' target='_blank' rel='nofollow'>srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=/gpfs1/atlasdatadisk/step09/AOD/NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528</a>
DEST SURL&#58;	<a href='srm&#58;//lcg-dpm01.hep.ucl.ac.uk&#58;8446/srm/managerv2?SFN=/dpm/hep.ucl.ac.uk/home/atlas/atlasdatadisk/rucio/step09/98/df/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528' target='_blank' rel='nofollow'>srm&#58;//lcg-dpm01.hep.ucl.ac.uk&#58;8446/srm/managerv2?SFN=/dpm/hep.ucl.ac.uk/home/atlas/atlasdatadisk/rucio/step09/98/df/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0001._0001_1286528528</a>
TRANSFER ID&#58;	0423e7f6-7990-4570-bbf6-a32ee5a5421f
TRANSFER SERVICE&#58;	<a href='https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443/glite-data-transfer-fts/services/FileTransfer' target='_blank' rel='nofollow'>https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443/glite-data-transfer-fts/services/FileTransfer</a>
ERROR MSG&#58;	[FTS] FTS State [Failed] FTS Retries [0] Reason [Failed to get source file size&#58; [gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-ifce err&#58; Communication error on send, err&#58; [SE][Ls][] httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running on lcgfts06.gridpp.rl.ac.uk reports Error reading token data&#58; Connection closed] Duration [11]

--------------------

-- by kai.leffhalm at Mon Jun 17 14&#58;26&#58;52 UTC 2013

SUM tests are still succeeding, whitlisting it for a test

-- by kai.leffhalm at Mon Jun 17 12&#58;46&#58;44 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1371221122'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-14T14:45:22+00:00">Jun 14, 2013 02:45 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371221122">&nbsp;</a></div><pre>Hi Kai,

I had some hope due to a fix that we made yesterday (which fixed a user&#39;s
dq2-get problem), but outgoing FTS3 transfers to the UK and RU cloud are still
all failing the same way

[FTS] FTS State [Failed] FTS Retries [0] Reason [Failed to get source file
size&#58;
[gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-ifce
err&#58; Communication error on send, err&#58; [SE][Ls][]
httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running on
lcgfts05.gridpp.rl.ac.uk reports Error reading token data&#58; Connection closed]
Duration [11]

- Saul

On Fri Jun 14 05&#58;06&#58;18 2013, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; Hi functional tests started succeeding yesterday 17&#58;000 utc, any</font>
<font color='#7F7E6F'>&#62; change? Should we try setting it online again?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Cheers</font>
<font color='#7F7E6F'>&#62; Kai</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by kai.leffhalm at Fri Jun 14 09&#58;04&#58;57 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Fri Jun 14 09&#58;05&#58;32 UTC 2013</font>
-- by youssef@.... at Fri Jun 14 14&#58;45&#58;12 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1371200732'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-14T09:05:32+00:00">Jun 14, 2013 09:05 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1371200732">&nbsp;</a></div><pre>Hi functional tests started succeeding yesterday 17&#58;000 utc, any change? Should we try setting it online again?

Cheers
Kai

-- by kai.leffhalm at Fri Jun 14 09&#58;04&#58;57 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1370747803'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-09T03:16:43+00:00">Jun 9, 2013 03:16 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370747803">&nbsp;</a></div><pre>Hi Again,

I briefly tried turning outgoing transfers from NET2_DATADISK. The previous
errors returned

[FTS] FTS State [Failed] FTS Retries [0] Reason [Failed to get source file
size&#58;
[gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-ifce
err&#58; Communication error on send, err&#58; [SE][Ls][]
httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running on
lcgfts05.gridpp.rl.ac.uk reports Error reading token data&#58; Connection closed]
Duration [11]

Note that transfers from NET2_DATADISK to non-UK sites work and transfers from
NET2_&#60;others&#62; also works to UK sites. For instance, tranfers from
NET2_LOCALGROUPDISK to UKI-SOUTHGRID-BHAM-HEP work fine&#58;

<a href='http&#58;//dashb-atlas-data.cern.ch/ddm2/#d.dst.cloud=%22UK%22&d.dst.site=%22UKI-NORTHGRID-LANCS-HEP%22&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&date.interval=720&grouping.dst=' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-data.cern.ch/ddm2/#d.dst.cloud=%22UK%22&d.dst.site=%22UKI-NORTHGRID-LANCS-HEP%22&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&date.interval=720&grouping.dst=</a>(cloud,site)&grouping.src=(cloud,site,token)&samples=true&src.cloud=(%22US%22)&src.site=(%22NET2%22)

DATADISK and LOCALGROUP disk are just two directories in the file system here,
so there&#39;s really no reason to expect a difference. The error messages are
exactly like the ones that I pointed out previously in the thread where it
turned out that some UK sites were using FTS3 for transfers.

I&#39;ve turned outgoing tranfers back OFF for NET2_DATADISK. Could someone from
the UK cloud please comment?

- Saul & John
NET2
-- by youssef@.... at Sun Jun 09 03&#58;16&#58;33 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1370651936'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-08T00:38:56+00:00">Jun 8, 2013 12:38 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370651936">&nbsp;</a></div><pre>Hi Michal,

The other DDM problem that we had today was apparently unrelated (a GPFS file
system issue). I&#39;ve started up the DDM endpoints that I had blacklisted,
leaving DATADISK outgoing off as you have set it. We can wait for comments from
the UK guys and re-address the issue on Monday if necessary. - Saul

On Fri Jun 07 15&#58;12&#58;19 2013, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; I agree that it is caused by FTS3 test (I have found old ticket -</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=93660' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=93660</a> - and the error</font>
<font color='#7F7E6F'>&#62; message</font>
<font color='#7F7E6F'>&#62; is practically the same). But I still could not let it just keep</font>
<font color='#7F7E6F'>&#62; failing. Hence the ticket and blacklisting.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by Michal.Svatos at Fri Jun 07 19&#58;10&#58;38 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Fri Jun 07 19&#58;11&#58;25 UTC 2013</font>
-- by youssef@.... at Sat Jun 08 00&#58;38&#58;47 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1370632285'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T19:11:25+00:00">Jun 7, 2013 07:11 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370632285">&nbsp;</a></div><pre>I agree that it is caused by FTS3 test (I have found old ticket - <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=93660' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=93660</a> - and the error message is practically the same). But I still could not let it just keep failing. Hence the ticket and blacklisting.

-- by Michal.Svatos at Fri Jun 07 19&#58;10&#58;38 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1370631050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T18:50:50+00:00">Jun 7, 2013 06:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370631050">&nbsp;</a></div><pre>On Fri Jun 07 14&#58;26&#58;19 2013, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; I blacklist datadisk for now</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by Michal.Svatos at Fri Jun 07 18&#58;24&#58;33 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Fri Jun 07 18&#58;25&#58;22 UTC 2013</font>

OK thanks. Actually we just had a problem with GPFS causing our SRM to hang for
a few minutes. It&#39;s fixed now, but there will be a bunch of errors.

I&#39;m going to turn off all of our DDM endpoints and turn things back on slowly,
just to limit the damage if we don&#39;t understand what&#39;s going on.

I wouldn&#39;t have thought that this had anything to do with the original UK
problem, but the timing is suspicious.

- Saul
-- by youssef@.... at Fri Jun 07 18&#58;50&#58;41 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1370629522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T18:25:22+00:00">Jun 7, 2013 06:25 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370629522">&nbsp;</a></div><pre>I blacklist datadisk for now

-- by Michal.Svatos at Fri Jun 07 18&#58;24&#58;33 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1370629282'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T18:21:22+00:00">Jun 7, 2013 06:21 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370629282">&nbsp;</a></div><pre>adding Brian Davies and UK cloud support in the CC
Changed CC to brian.davies@....;atlas-adc-cloud-UK@....

-- by Michal.Svatos at Fri Jun 07 18&#58;20&#58;42 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1370626024'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T17:27:04+00:00">Jun 7, 2013 05:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370626024">&nbsp;</a></div><pre>Hi Michal,

The problem persists, as you say, but only to the UK sites.

The same symptoms happened on May 2, 2013, also to UK sites. This was
eventually tracked down to using a test version of FTS3 in the UK (I&#39;m not sure
whether it was intentional or not). Could you ask the UK cloud guys to check if
the same thing is going on? Here is what happened last time&#58;

<a href='https&#58;//ticket.opensciencegrid.org/goc/14847?sort=up&' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/goc/14847?sort=up&</a>

- Saul

On Fri Jun 07 12&#58;44&#58;05 2013, youssef@.... wrote&#58;
<font color='#7F7E6F'>&#62; On Fri Jun 07 12&#58;24&#58;18 2013, osg-goc-rest wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; hi,</font>
<font color='#7F7E6F'>&#62; &#62; could you recheck it. In the 20 minutes since it was whitelisted</font>
<font color='#7F7E6F'>&#62; &#62; NET2_DATADISK caused more than 200 transfer failures.</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; http&#58;//dashb-atlas-</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62;</font>
data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306071520&date.interval=0&date.to=201306071620&grouping.src=%28cloud,site,token%29&m.content=%28t_err,t_suc%29&samples=true&src.cloud=%28%22US%22%29&src.site=%28%22NET2%22%29&tab=details
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; -- by Michal.Svatos at Fri Jun 07 16&#58;22&#58;45 UTC 2013</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; &#62; -- by OSG-GOC at Fri Jun 07 16&#58;23&#58;14 UTC 2013</font>
-- by youssef@.... at Fri Jun 07 17&#58;26&#58;55 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1370623470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T16:44:30+00:00">Jun 7, 2013 04:44 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370623470">&nbsp;</a></div><pre>On Fri Jun 07 12&#58;24&#58;18 2013, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; hi,</font>
<font color='#7F7E6F'>&#62; could you recheck it. In the 20 minutes since it was whitelisted</font>
<font color='#7F7E6F'>&#62; NET2_DATADISK caused more than 200 transfer failures.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; http&#58;//dashb-atlas-</font>
<font color='#7F7E6F'>&#62;</font>
data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306071520&date.interval=0&date.to=201306071620&grouping.src=%28cloud,site,token%29&m.content=%28t_err,t_suc%29&samples=true&src.cloud=%28%22US%22%29&src.site=%28%22NET2%22%29&tab=details
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by Michal.Svatos at Fri Jun 07 16&#58;22&#58;45 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Fri Jun 07 16&#58;23&#58;14 UTC 2013</font>
-- by youssef@.... at Fri Jun 07 16&#58;44&#58;05 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1370622877'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T16:34:37+00:00">Jun 7, 2013 04:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370622877">&nbsp;</a></div><pre>Hi,

That&#39;s a bit strange. I&#39;m watching our logs now and not seeing any errors. -
Saul

On Fri Jun 07 12&#58;24&#58;18 2013, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; hi,</font>
<font color='#7F7E6F'>&#62; could you recheck it. In the 20 minutes since it was whitelisted</font>
<font color='#7F7E6F'>&#62; NET2_DATADISK caused more than 200 transfer failures.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; http&#58;//dashb-atlas-</font>
<font color='#7F7E6F'>&#62;</font>
data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306071520&date.interval=0&date.to=201306071620&grouping.src=%28cloud,site,token%29&m.content=%28t_err,t_suc%29&samples=true&src.cloud=%28%22US%22%29&src.site=%28%22NET2%22%29&tab=details
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by Michal.Svatos at Fri Jun 07 16&#58;22&#58;45 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Fri Jun 07 16&#58;23&#58;14 UTC 2013</font>
-- by youssef@.... at Fri Jun 07 16&#58;34&#58;27 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1370622194'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T16:23:14+00:00">Jun 7, 2013 04:23 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370622194">&nbsp;</a></div><pre>hi,
could you recheck it. In the 20 minutes since it was whitelisted NET2_DATADISK caused more than 200 transfer failures.

<a href='http&#58;//dashb-atlas-data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306071520&date.interval=0&date.to=201306071620&grouping.src=%28cloud' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306071520&date.interval=0&date.to=201306071620&grouping.src=%28cloud</a>,site,token%29&m.content=%28t_err,t_suc%29&samples=true&src.cloud=%28%22US%22%29&src.site=%28%22NET2%22%29&tab=details

-- by Michal.Svatos at Fri Jun 07 16&#58;22&#58;45 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1370620570'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T15:56:10+00:00">Jun 7, 2013 03:56 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370620570">&nbsp;</a></div><pre>Greetings,

I suspect that the errors are caused by authentication failures possibly due to
our bestman2 not picking up the latest CRLs, possibly due to the bug in JGlobus
mentioned in this recent ticket&#58;

<a href='https&#58;//ticket.opensciencegrid.org/goc/14752?expandall=true&sort=up&' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/goc/14752?expandall=true&sort=up&</a>

neither the error messages nor the bestman2 logs make this completely clear,
but we&#39;ve restarted bestman2 which is likely to cause the problem to go away.
It doesn&#39;t have anything to do with DATADISK as such. I&#39;ve unblacklisted
NET2_DATADISK so we can watch. Feel free to re-blacklist it if the errors
reappear.

- Saul & John

On Fri Jun 07 03&#58;25&#58;18 2013, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; datadisk blacklisted as source</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//savannah.cern.ch/support/index.php?138030' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/support/index.php?138030</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by Michal.Svatos at Fri Jun 07 07&#58;23&#58;22 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Fri Jun 07 07&#58;24&#58;23 UTC 2013</font>
-- by youssef@.... at Fri Jun 07 15&#58;56&#58;01 UTC 2013

GOCTX Source&#58; BNL Ticket&#58; Queue=NETier2 ID=23393</pre></div><div class='update_description'><i onclick="document.location='15445#1370589863'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-07T07:24:23+00:00">Jun 7, 2013 07:24 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370589863">&nbsp;</a></div><pre>datadisk blacklisted as source
<a href='https&#58;//savannah.cern.ch/support/index.php?138030' target='_blank' rel='nofollow'>https&#58;//savannah.cern.ch/support/index.php?138030</a>

-- by Michal.Svatos at Fri Jun 07 07&#58;23&#58;22 UTC 2013

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a></pre></div><div class='update_description'><i onclick="document.location='15445#1370551965'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-06T20:52:45+00:00">Jun 6, 2013 08:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370551965">&nbsp;</a></div><pre>In the last hour, there are more than 300 transfers from NET2_DATADISK (0% efficiency). Other spacetokens have 100% efficiency. Transfers from NET2_DATADISK are failing with the following error&#58;

[FTS] FTS State [Failed] FTS Retries [0] Reason [Failed to get source file size&#58; [gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-ifce err&#58; Communication error on send, err&#58; [SE][Ls][] httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running on lcgfts06.gridpp.rl.ac.uk reports Error reading token data&#58; Connection closed] Duration [11]

example of failed transfer&#58;
2013-06-06 20&#58;25&#58;05	step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0002._0001_1286528528	#394	FAILED_TRANSFER
GUID&#58;	2860561e-45da-4af9-a08a-53a5796ac229
ATTEMPT&#58;	2
TOOL ID&#58;	DQ2
SRC SURL&#58;	<a href='srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=/gpfs1/atlasdatadisk/step09/AOD/NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0002._0001_1286528528' target='_blank' rel='nofollow'>srm&#58;//atlas.bu.edu&#58;8443/srm/v2/server?SFN=/gpfs1/atlasdatadisk/step09/AOD/NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0002._0001_1286528528</a>
DEST SURL&#58;	<a href='srm&#58;//t2se01.physics.ox.ac.uk&#58;8446/srm/managerv2?SFN=/dpm/physics.ox.ac.uk/home/atlas/atlasdatadisk/rucio/step09/bf/9b/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0002._0001_1286528528' target='_blank' rel='nofollow'>srm&#58;//t2se01.physics.ox.ac.uk&#58;8446/srm/managerv2?SFN=/dpm/physics.ox.ac.uk/home/atlas/atlasdatadisk/rucio/step09/bf/9b/step09.50000030.sonar_1.sonar.AOD.NET2_DATADISK._lb0002._0001_1286528528</a>
TRANSFER ID&#58;	31a921a5-2ee0-4095-b3f2-242952da5e9c
TRANSFER SERVICE&#58;	<a href='https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443/glite-data-transfer-fts/services/FileTransfer' target='_blank' rel='nofollow'>https&#58;//lcgfts3.gridpp.rl.ac.uk&#58;8443/glite-data-transfer-fts/services/FileTransfer</a>
ERROR MSG&#58;	[FTS] FTS State [Failed] FTS Retries [0] Reason [Failed to get source file size&#58; [gfal2_stat][gfal_plugin_statG][gfal_srm_statG][gfal_statG_srmv2__generic_internal][gfal_srm_ls_internal]srm-ifce err&#58; Communication error on send, err&#58; [SE][Ls][] httpg&#58;//atlas.bu.edu/srm/managerv2&#58; CGSI-gSOAP running on lcgfts06.gridpp.rl.ac.uk reports Error reading token data&#58; Connection closed] Duration [11]
ACTIVITY&#58;	Functional Test

<a href='http&#58;//dashb-atlas-data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306061930&date.interval=0&date.to=201306062030&grouping.src=%28cloud' target='_blank' rel='nofollow'>http&#58;//dashb-atlas-data.cern.ch/dashboard/ddm2/#d.error_code=394&d.src.cloud=%22US%22&d.src.site=%22NET2%22&d.src.token=%22DATADISK%22&d.state=FAILED_TRANSFER&date.from=201306061930&date.interval=0&date.to=201306062030&grouping.src=%28cloud</a>,site,token%29&m.content=%28t_err,t_suc%29&src.cloud=%28%22US%22%29&src.site=%28%22NET2%22%29&tab=details

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=94677</a>

[Ticket History]
Sent TEAM notification mail to mail address augustin@....;youssef@....;Subject&#58; Transfers from NET2_DATADISK are failing with &#34;Communication error on send&#34;
Ticket Type&#58; TEAM
CC&#58;
-- by Michal.Svatos at Thu Jun 06 20&#58;51&#58;45 UTC 2013</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F15445">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 15445});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
