<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[23929] osg-info-services not publishing on BDII after DNS alias removal</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=23929" method="post">
<div class="page-header">
    <h3><span class="muted">23929</span> / osg-info-services not publishing on BDII after DNS alias removal</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Samir Cury Siqueira</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">CIT_CMS_T2B</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Samir Cury Siqueira</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">None</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2015-03-04</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Tim Cartwright <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/23929", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/23929?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/23929?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20osg-info-services%20not%20publishing%20on%20BDII%20after%20DNS%20alias%20removal%20ISSUE%3D23929%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='23929#1425410606'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-03T19:23:26+00:00">Mar 3, 2015 07:23 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1425410606">&nbsp;</a></div><pre>OK, thanks Samir, and good luck with the rest!</pre></div><div class='update_description'><i onclick="document.location='23929#1425406225'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-03T18:10:25+00:00">Mar 3, 2015 06:10 PM UTC</time><a class="anchor" name="1425406225">&nbsp;</a></div><pre>Hi Tim,

I did some more checks and if there&#39;s anything left is not related to BDII. Feel free to close the ticket. Thanks to all involved.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1425307896'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-03-02T14:51:36+00:00">Mar 2, 2015 02:51 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1425307896">&nbsp;</a></div><pre>Hm, as of 8&#58;48 a.m. CST Monday morning, following the link below shows three failures. So data is getting through but maybe there are some smaller issues to correct?

I am fine with keeping this ticket open *for a little while*. But it is not clear if there is any further work for OSG to take at this time, so if the situation holds I would like to close the ticket to reduce noise on our end.</pre></div><div class='update_description'><i onclick="document.location='23929#1425087347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-28T01:35:47+00:00">Feb 28, 2015 01:35 AM UTC</time><a class="anchor" name="1425087347">&nbsp;</a></div><pre>Et voila &#58;

<a href='http&#58;//myosg.grid.iu.edu/rggipstatus/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showresource=on&gip_status_attrs_showcemondata=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=02%2F03%2F2015&end_type=now&end_date=02%2F03%2F2015&site=on&site_sel%5B%5D=10064&gridtype=on&gridtype_1=on&service=on&service_sel%5B%5D=1&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rggipstatus/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showresource=on&gip_status_attrs_showcemondata=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=02%2F03%2F2015&end_type=now&end_date=02%2F03%2F2015&site=on&site_sel%5B%5D=10064&gridtype=on&gridtype_1=on&service=on&service_sel%5B%5D=1&active_value=1&disable_value=1</a>

Apparently everything looks good until the WLCG BDII. For now CMS&#39;s monitoring service is still not picking up the CE &#58;

<a href='https&#58;//sam-cms-prod.cern.ch/nagios/cgi-bin/status.cgi?host=cit-gatekeeper2.ultralight.org&style=detail' target='_blank' rel='nofollow'>https&#58;//sam-cms-prod.cern.ch/nagios/cgi-bin/status.cgi?host=cit-gatekeeper2.ultralight.org&style=detail</a>

So if by CERN&#39;s Monday morning it&#39;s not yet in place I&#39;ll submit a GGUS ticket to the SAM Team. I guess that we could even close this ticket but maybe leave it open just in case I need to ask something to forward to the SAM team.

Thanks a lot to everyone looking into this.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1424989354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-26T22:22:34+00:00">Feb 26, 2015 10:22 PM UTC</time><a class="anchor" name="1424989354">&nbsp;</a></div><pre>Sure. The DNS configuration was changed few minutes after my last post. As of now it still didn&#39;t update. Not surprising as it might take up to 24~48h to update it everywhere else. So if everything goes fine we will see the BDII entry, the CE and tests coming back up by tomorrow/weekend.

I will keep an eye here and update the ticket when I see that the DNS is fine in a number of places and report what changes.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1424986832'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-26T21:40:32+00:00">Feb 26, 2015 09:40 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1424986832">&nbsp;</a></div><pre>Wow, good catch Samir! I totally did not think of reverse DNS being broken, but that would certainly do it.

Could you please follow up in this ticket once the DNS issues have been corrected and let us know how things are going?</pre></div><div class='update_description'><i onclick="document.location='23929#1424973822'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-26T18:03:42+00:00">Feb 26, 2015 06:03 PM UTC</time><a class="anchor" name="1424973822">&nbsp;</a></div><pre>That should be it...

Looks like that when DNS admins changed the configuration they also introduced this problem - wrong rDNS. I don&#39;t expect anything to work well before that is fixed. I&#39;m surprised that SSL worked at all. I will ping our DNS admin. Thanks!

[root@t2-headnode-new ~]# nslookup cit-gatekeeper2.ultralight.org
Server&#58;		10.3.1.2
Address&#58;	10.3.1.2#53

Non-authoritative answer&#58;
Name&#58;	cit-gatekeeper2.ultralight.org
Address&#58; 198.32.44.15

[root@t2-headnode-new ~]# nslookup 198.32.44.15
Server&#58;		10.3.1.2
Address&#58;	10.3.1.2#53

Non-authoritative answer&#58;
15.44.32.198.in-addr.arpa	name = cithep15.ultralight.org.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1424973546'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-26T17:59:06+00:00">Feb 26, 2015 05:59 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1424973546">&nbsp;</a></div><pre>Kyle&#58; I thought I noticed that CEMon was still enabled in the cit-gatekeeper2 configuration, but I was not sure. The files in .../cemon_raw_incoming/..., are they for CEMon data only? Or does osg-info-services data go there as well?</pre></div><div class='update_description'><i onclick="document.location='23929#1424973438'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-26T17:57:18+00:00">Feb 26, 2015 05:57 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1424973438">&nbsp;</a></div><pre>Adding myself, but just so that I see updates when they happen. Mat is still the OSG Software team owner of this ticket.</pre></div><div class='update_description'><i onclick="document.location='23929#1424973316'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-26T17:55:16+00:00">Feb 26, 2015 05:55 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1424973316">&nbsp;</a></div><pre>Mat,

While I look around, I do see this data coming in&#58; <a href='http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/cithep15.ultralight.org' target='_blank' rel='nofollow'>http&#58;//is.grid.iu.edu/data/cemon_raw_incoming/cithep15.ultralight.org</a> which seems to be the same IP address and it contains data for cit-gatekeeper2... just with the wrong name...

-Kyle</pre></div><div class='update_description'><i onclick="document.location='23929#1424907624'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-25T23:40:24+00:00">Feb 25, 2015 11:40 PM UTC</time><a class="anchor" name="1424907624">&nbsp;</a></div><pre>At around 10&#58;50 AM PST.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1424907120'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-25T23:32:00+00:00">Feb 25, 2015 11:32 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1424907120">&nbsp;</a></div><pre>This is odd. The new run for cit-gatekeeper2.ultralight.org shows that it uploaded successfully. GOC folks, can you tell me if you saw anything from that host in your logs? Samir, can you tell us what time you ran osg-info-services so they can narrow down their search?
Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='23929#1424890167'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-25T18:49:27+00:00">Feb 25, 2015 06:49 PM UTC</time><a class="anchor" name="1424890167">&nbsp;</a></div><pre>Sure. they&#39;re attached &#58;  gatekeeper2-info-service.txt, xeon-info-service.txt

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1424882758'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-25T16:45:58+00:00">Feb 25, 2015 04:45 PM UTC</time><a class="anchor" name="1424882758">&nbsp;</a></div><pre>Hi Samir,

Can you please run osg-info-services and attach the output please?

Edgar
OSG Software Support

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='23929#1424818503'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-24T22:55:03+00:00">Feb 24, 2015 10:55 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1424818503">&nbsp;</a></div><pre>Not profile (although that&#39;s helpful too). osg-info-services output, like your &#34;ce-info-services-malfunction.txt&#34;.

-Mat</pre></div><div class='update_description'><i onclick="document.location='23929#1424712697'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-23T17:31:37+00:00">Feb 23, 2015 05:31 PM UTC</time><a class="anchor" name="1424712697">&nbsp;</a></div><pre>Sorry for the delay, was in a conference. Here are the profiles for both CEs. Note that cit-gatekeeper2 might have older configuration style, but that is legacy configuration that was working up to the day that we changed the DNS.

Files are attached and called xeon.txt and cit-gatekeeper2.txt.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1424377343'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-19T20:22:23+00:00">Feb 19, 2015 08:22 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1424377343">&nbsp;</a></div><pre>Hi Samir,

Can you post the output from a new run of osg-info-services on cit-gatekeeper2 and the output from a run on xeon so I can compare the two?

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='23929#1424299228'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-18T22:40:28+00:00">Feb 18, 2015 10:40 PM UTC</time><a class="anchor" name="1424299228">&nbsp;</a></div><pre>Hi Matyas,

Even though the upload worked, I&#39;m still not seeing the BDII data &#58;

<a href='http&#58;//myosg.grid.iu.edu/rggipstatus/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showresource=on&gip_status_attrs_showcemondata=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=02%2F03%2F2015&end_type=now&end_date=02%2F03%2F2015&site=on&site_sel%5B%5D=10064&gridtype=on&gridtype_1=on&service=on&service_sel%5B%5D=1&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rggipstatus/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showresource=on&gip_status_attrs_showcemondata=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=02%2F03%2F2015&end_type=now&end_date=02%2F03%2F2015&site=on&site_sel%5B%5D=10064&gridtype=on&gridtype_1=on&service=on&service_sel%5B%5D=1&active_value=1&disable_value=1</a>

I noticed that another CE that was just deployed was reporting correctly, and that there was a discrepancy on the info-services and GIP packages &#58;

[root@xeon config.d]# rpm -qa |egrep &#34;gip|info-services&#34;
gip-1.3.11-4.osg32.el6.noarch
osg-info-services-1.0.1-1.osg32.el6.noarch
osg-configure-gip-1.0.67-1.osg32.el6.noarch

in cit-gatekeeper2 &#58;

[root@cit-gatekeeper2 ~]# rpm -qa |egrep &#34;gip|info-services&#34;
osg-configure-gip-1.0.61-5.osg32.el6.noarch
osg-info-services-1.0.1-1.osg32.el6.noarch
gip-1.3.10-7.osg32.el6.noarch

I updated to the latest &#58;

[root@cit-gatekeeper2 config.d]# rpm -qa |egrep &#34;gip|info-services&#34;
gip-1.3.11-4.osg32.el6.noarch
osg-info-services-1.0.1-1.osg32.el6.noarch
osg-configure-gip-1.0.67-1.osg32.el6.noarch

Ran osg-configure -c (after applying the workaround for the known issue &#58; <a href='https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/Release3220' target='_blank' rel='nofollow'>https&#58;//twiki.opensciencegrid.org/bin/view/Documentation/Release3/Release3220</a>)

But still see nothing in the BDII page. I also applied your fix to cron.

Ideas?

Thanks,
Samir
<div id='show_837891364' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_837891364'>
by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira
</div><script type='text/javascript'>
        $('#show_837891364').click(function() {
            $('#detail_837891364').slideDown("normal");
            $('#show_837891364').hide();
            $('#hide_837891364').show();
        });
        $('#hide_837891364').click(function() {
            $('#detail_837891364').slideUp();
            $('#hide_837891364').hide();
            $('#show_837891364').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='23929#1424297039'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-18T22:03:59+00:00">Feb 18, 2015 10:03 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1424297039">&nbsp;</a></div><pre>Hi Samir,

You should edit /etc/cron.d/osg-info-services and change
*/10 * * * * root [ ! -f /var/lock/subsys/osg-info-services ] || /bin/sh -c &#39;perl -e &#34;sleep rand 300&#34; && /usr/sbin/osg-info-services &#62;/dev/null 2&#62;&1&#39;
to
*/10 * * * * root [ ! -f /var/lock/subsys/osg-info-services ] || /bin/sh -c &#39;perl -e &#34;sleep rand 300&#34; && http_proxy= /usr/sbin/osg-info-services &#62;/dev/null 2&#62;&1&#39;

Your changes should be preserved across updates. I&#39;ll open a JIRA ticket to make it that way by default.

-Mat</pre></div><div class='update_description'><i onclick="document.location='23929#1424289284'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-18T19:54:44+00:00">Feb 18, 2015 07:54 PM UTC</time><a class="anchor" name="1424289284">&nbsp;</a></div><pre>Hi Matyas,

Good idea. The upload seems to work for all servers now &#58;

CEMonUploader&#58;INFO osg-info-services&#58;926&#58;  All SEs found&#58; cit-se.ultralight.org
CEMonUploader&#58;INFO osg-info-services&#58;995&#58;  Creating ClassAds related to CE cit-gatekeeper2.ultralight.org&#58;2119/jobmanager-condor-default
CEMonUploader&#58;INFO osg-info-services&#58;1031&#58;  	SE adjacent to CE&#58; cit-se.ultralight.org
CEMonUploader&#58;INFO osg-info-services&#58;1051&#58;  		SA adjacent to SE&#58; default
CEMonUploader&#58;INFO osg-info-services&#58;489&#58;  Generated 270 ClassAds for endpoints <a href='https&#58;//osg-ress-1.fnal.gov&#58;8443/ig/services/CEInfoCollector' target='_blank' rel='nofollow'>https&#58;//osg-ress-1.fnal.gov&#58;8443/ig/services/CEInfoCollector</a>
CEMonUploader&#58;INFO osg-info-services&#58;416&#58;  Uploading output to <a href='https&#58;//osg-ress-1.fnal.gov&#58;8443/ig/services/CEInfoCollector' target='_blank' rel='nofollow'>https&#58;//osg-ress-1.fnal.gov&#58;8443/ig/services/CEInfoCollector</a>
CEMonUploader&#58;INFO osg-info-services&#58;416&#58;  Uploading output to <a href='http&#58;//is1.grid.iu.edu&#58;14001' target='_blank' rel='nofollow'>http&#58;//is1.grid.iu.edu&#58;14001</a>
CEMonUploader&#58;INFO osg-info-services&#58;416&#58;  Uploading output to <a href='http&#58;//is2.grid.iu.edu&#58;14001' target='_blank' rel='nofollow'>http&#58;//is2.grid.iu.edu&#58;14001</a>

But note that this proxy setting is only valid for the root environment &#58;

[root@cit-gatekeeper2 ~]# cat .bashrc
export http_proxy=<a href='http&#58;//newman.ultralight.org&#58;3128' target='_blank' rel='nofollow'>http&#58;//newman.ultralight.org&#58;3128</a>

And the services that need/are configured to use it. Not the case with info-services cron service, as far as I can tell. Anyway, I guess that this manual upload will also show if there are local or upstream problems. I still see &#34;Incoming Data (Age 387&#58;39&#58;52)&#34; but most likely we have to give it some time.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1424286796'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-18T19:13:16+00:00">Feb 18, 2015 07:13 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1424286796">&nbsp;</a></div><pre>Hi Samir,

Can you try disabling your proxy before running osg-info-services?  I think it may be interfering&#58; notice how the upload to osg-ress-1.fnal.gov (via https) worked, but the uploads to is1.grid.iu.edu and is2.grid.iu.edu (via plain http) failed.

(unset http_proxy; osg-info-services)

-Mat</pre></div><div class='update_description'><i onclick="document.location='23929#1423851261'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-13T18:14:21+00:00">Feb 13, 2015 06:14 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1423851261">&nbsp;</a></div><pre>Hello Matyas,

Could you please review this and provide and update or please indicate when you will have time to do so? Please let me know if there is anything I can do to assist.

Thanks,

Chris</pre></div><div class='update_description'><i onclick="document.location='23929#1423682365'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-11T19:19:25+00:00">Feb 11, 2015 07:19 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1423682365">&nbsp;</a></div><pre>Has anyone had a chance to look at this?  The CE in question has not been able to report to the BDII for the past week.

Thanks,

Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='23929#1423511889'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-09T19:58:09+00:00">Feb 9, 2015 07:58 PM UTC</time><a class="anchor" name="1423511889">&nbsp;</a></div><pre>Not sure if you get notified, but I just uploaded the profile.

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1423499456'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-09T16:30:56+00:00">Feb 9, 2015 04:30 PM UTC</time><a class="anchor" name="1423499456">&nbsp;</a></div><pre>Hi Tim, I&#39;m sending the profile soon, but that was one of the things I needed to change for it to even pass RSV - otherwise SSL wouldn&#39;t even work. I had to rename it in a number of places too including /etc/osg/config.d/* . But there it was in a couple of files only. More soon.

For the record &#58; Factory job submission and everything else works, only BDII reporting seems to be failing currently.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1423497673'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-09T16:01:13+00:00">Feb 9, 2015 04:01 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1423497673">&nbsp;</a></div><pre>Samir&#58; Just out of curiosity, what hostname does the host certificate on the renamed CE use? Is it possible that you have a host certificate based on the old name? If so, that would cause communication failures.</pre></div><div class='update_description'><i onclick="document.location='23929#1423496150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-09T15:35:50+00:00">Feb 9, 2015 03:35 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1423496150">&nbsp;</a></div><pre>Sorry, Samir, we missed this one late last week. We will start looking into it today, though. In the meantime, could you run the osg-system-profiler on your renamed CE and attach its output?</pre></div><div class='update_description'><i onclick="document.location='23929#1423252828'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-06T20:00:28+00:00">Feb 6, 2015 08:00 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1423252828">&nbsp;</a></div><pre>Hello Software Team,

I just wanted to ping you guys to make sure you saw my last post. Please let me know if and how I can help.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='23929#1423148443'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-05T15:00:43+00:00">Feb 5, 2015 03:00 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1423148443">&nbsp;</a></div><pre>Software Team has been added for review. Sorry for the delay, I thought they were added when the ticket was submitted.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='23929#1423067357'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-04T16:29:17+00:00">Feb 4, 2015 04:29 PM UTC</time><a class="anchor" name="1423067357">&nbsp;</a></div><pre>As the response time of tickets like this could be up to a week unless explicitly requested, I&#39;d like to request some attention here as it seems that even though this CE is performing pretty well running CMS/OSG jobs, CMS SAM is affected on the other CE, by what it seems to be a central problem &#58;

<a href='https&#58;//hypernews.cern.ch/HyperNews/CMS/get/comp-ops/2077/1/1/1.html' target='_blank' rel='nofollow'>https&#58;//hypernews.cern.ch/HyperNews/CMS/get/comp-ops/2077/1/1/1.html</a>

But ultimately not having CE redundancy is leading to site unavailability (even though jobs seem to be running happily). Summarizing - this issue is causing service outage and might classify for the quicker response time SLA.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><div class='update_description'><i onclick="document.location='23929#1423011953'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-02-04T01:05:53+00:00">Feb 4, 2015 01:05 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1423011953">&nbsp;</a></div><pre>Dear OSG Software,

We were trying do to something simple here - update the DNS alias cit-gatekeeper2.ultralight.org to an actual A record. This also came with an IP migration. I was able to handle all the effects I expected with the DNS propagation changes, as well as changing the old name in many places (host cert, OIM) to the new one. Ok.

After the DNS propagation all looked ok, except BDII reporting, and it&#39;s still not ok &#58;

<a href='http&#58;//myosg.grid.iu.edu/rggipstatus/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showresource=on&gip_status_attrs_showcemondata=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=02%2F03%2F2015&end_type=now&end_date=02%2F03%2F2015&site=on&site_sel%5B%5D=10064&gridtype=on&gridtype_1=on&service=on&service_sel%5B%5D=1&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rggipstatus/index?summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showtestresults=on&gip_status_attrs_showresource=on&gip_status_attrs_showcemondata=on&downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=02%2F03%2F2015&end_type=now&end_date=02%2F03%2F2015&site=on&site_sel%5B%5D=10064&gridtype=on&gridtype_1=on&service=on&service_sel%5B%5D=1&active_value=1&disable_value=1</a>

I actually got some issues such as old jobs filling GRAM logs with too much messages and filling /var , which actually made osg-info-services to fail (tested by hand). Yesterday I was still able to run info-services by hand and see the usual output - same as a healthy CE.

Today, after fixing few problems, I tried again but it doesn&#39;t really want to update. I grepped /etc/osg/config.d for &#34;cithep252.ultralight.org&#34; (old name) but didn&#39;t find any reference, only the new name. I updated the name in OIM (it was listing the old one before) and no matter how much I run osg-info-services, I&#39;m not getting BDII to work.

How can I debug this further? I&#39;m sending full debug output for reference.

Maybe some central database needs to be updated? Just in case &#58;

old name &#58; cithep252.ultralight.org
new name &#58; cit-gatekeeper2.ultralight.org

Note that the new name already existed, but as an alias. The old name no longer is resolved.

Thanks,
Samir

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=samir/CN=695732/CN=Samir Cury Siqueira</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F23929">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 23929});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
