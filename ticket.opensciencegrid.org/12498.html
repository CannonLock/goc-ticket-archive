<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[12498] Gratia collector displaying error message &#34;File of VOMS servers does not exist&#34;</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12498" method="post">
<div class="page-header">
    <h3><span class="muted">12498</span> / Gratia collector displaying error message &#34;File of VOMS servers does not exist&#34;</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Soichi Hayashi</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Soichi Hayashi</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">GRATIA Dev</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-06-07</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">FNAL (Prod)&nbsp;<a target="_blank" href="https://fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810">INC000000295810</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/12498", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12498#1371481659'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-17T15:07:39+00:00">Jun 17, 2013 03:07 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1371481659">&nbsp;</a></div><pre>I have managed to migrate all records from rsv to rsv1. I am closing this ticket.</pre></div><div class='update_description'><i onclick="document.location='12498#1370271162'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-03T14:52:42+00:00">Jun 3, 2013 02:52 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1370271162">&nbsp;</a></div><pre>Yes, this is still an issue.

I still don&#39;t have a working hack to get old Gratia collector data moved over to the new version. I have spent too much time on this, so I&#39;ve placed this in the back burner for now, and I will work on it later this month.

Currently, if our production RSV collector to go down, we have no capability to re-install, nor upgrade to the new version immediately without losing past data.</pre></div><div class='update_description'><i onclick="document.location='12498#1370270860'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-06-03T14:47:40+00:00">Jun 3, 2013 02:47 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1370270860">&nbsp;</a></div><pre>Hi - Is this still an issue?
Brian
-- by brianmck at Mon Jun 03 14&#58;46&#58;34 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810</a></pre></div><div class='update_description'><i onclick="document.location='12498#1368127183'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-09T19:19:43+00:00">May 9, 2013 07:19 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1368127183">&nbsp;</a></div><pre>Tanya,

I did following to copy data from old RSV to new RSV.

1) Install new version of RSV on rsv-itb.
2) Do *data only* dump of MetricRecord and MetricRecord_Xml tables. Like &#34;mysqldump -u root --no-create-info gratia MetricRecord MetricRecord_Xml&#34;
3) Load SQL dump on rsv-itb.
4) Set the replication on rsv (to rsv-itb) with the DBID that of the last record in SQL dump.

This approach seems work, although I am sure it creates some internal inconsistency..

I believe this approach is creates less issue compared to other methods. Do you agree?</pre></div><div class='update_description'><i onclick="document.location='12498#1367851646'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-06T14:47:26+00:00">May 6, 2013 02:47 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1367851646">&nbsp;</a></div><pre>reply from&#58; tlevshin@....

You can try to run post-install manually as root and see the errors it will produce. If you just dump databases you will have problem with various permissions.
Please let me know the error post-install produces and I will help you to modify the permissions.

Thanks,
Tanya
On May 3, 2013, at 8&#58;36 AM, Fermilab Service Desk wrote&#58;

<font color='#7F7E6F'>&#62; Incident INC000000295810 comments have been updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Last update&#58;</font>
<font color='#7F7E6F'>&#62; 2013-05-03 08&#58;35&#58;15 CDT - cd-srv-goc-ops (Additional comments)</font>
<font color='#7F7E6F'>&#62; I have run the same install script that was able to setup everything correctly. Please note, I have *dropped* the Gratia DB on rsv-itb prior to the dump&load DB content from rsv-itb, so whaterver post-install did to Gratia DB is lost.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I see some error messages in gratia.log, but I don&#39;t think they came from post-install. I have attached it with this ticket.</font>
<font color='#7F7E6F'>&#62; -- by Soichi Hayashi at Fri May 03 13&#58;34&#58;12 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Incident State&#58; Work in Progress</font>
<font color='#7F7E6F'>&#62; Caller&#58; cd-srv-goc-ops</font>
<font color='#7F7E6F'>&#62; Assignment Group&#58; Gratia Support and Development</font>
<font color='#7F7E6F'>&#62; Assigned To&#58;</font>
<font color='#7F7E6F'>&#62; Summary&#58;</font>
<font color='#7F7E6F'>&#62; [by Soichi Hayashi]</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;ve followed following documentation in order to install a Gratia collector.</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; When I visited the following admin interface,</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html' target='_blank' rel='nofollow'>https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I saw following message.</font>
<font color='#7F7E6F'>&#62; &#62; File of VOMS servers does not exist&#58; /var/lib/gratia-service/voms-servers</font>
<font color='#7F7E6F'>&#62; &#62; Please contact your administrator to check your installation.</font>
<div id='show_264736883' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_264736883'><font color='#7F7E6F'>&#62; &#62; Additional administrative services are not available until this is resolved.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you assist me with troubleshooting this installation issue?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Soichi</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [META Information]</font>
<font color='#7F7E6F'>&#62; Application issue with type&#58; gratia_dev</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Ticket Origin]</font>
<font color='#7F7E6F'>&#62; <a href='12498.html#1344882881' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=12498#1344882881</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Ref&#58;MSG1146312</font>

Tanya Levshina
tlevshin@....
-- by tlevshin at Mon May 06 14&#58;46&#58;32 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810</a>
</div><script type='text/javascript'>
        $('#show_264736883').click(function() {
            $('#detail_264736883').slideDown("normal");
            $('#show_264736883').hide();
            $('#hide_264736883').show();
        });
        $('#hide_264736883').click(function() {
            $('#detail_264736883').slideUp();
            $('#hide_264736883').hide();
            $('#show_264736883').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12498#1367851536'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-06T14:45:36+00:00">May 6, 2013 02:45 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1367851536">&nbsp;</a></div><pre>reply from&#58; tlevshin@....

Hi Soichi,
<font color='#7F7E6F'>&#62;  /var/lib/gratia-service/voms-servers</font>
is ran by cron , it is possible that when you try to access the page the cron have not ran yet. Try again and see if you have different results.
Thanks,
Tanya
On May 3, 2013, at 8&#58;38 AM, Fermilab Service Desk wrote&#58;

<font color='#7F7E6F'>&#62; Incident INC000000295810 comments have been updated.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Last update&#58;</font>
<font color='#7F7E6F'>&#62; 2013-05-03 08&#58;37&#58;17 CDT - cd-srv-goc-ops (Additional comments)</font>
<font color='#7F7E6F'>&#62; I found MySQL rootpass logged in gratia.log, so I have masked it.. Shouldn&#39;t this be hidden in the log?</font>
<font color='#7F7E6F'>&#62; -- by Soichi Hayashi at Fri May 03 13&#58;36&#58;30 UTC 2013</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Incident State&#58; Work in Progress</font>
<font color='#7F7E6F'>&#62; Caller&#58; cd-srv-goc-ops</font>
<font color='#7F7E6F'>&#62; Assignment Group&#58; Gratia Support and Development</font>
<font color='#7F7E6F'>&#62; Assigned To&#58;</font>
<font color='#7F7E6F'>&#62; Summary&#58;</font>
<font color='#7F7E6F'>&#62; [by Soichi Hayashi]</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;ve followed following documentation in order to install a Gratia collector.</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; When I visited the following admin interface,</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html' target='_blank' rel='nofollow'>https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I saw following message.</font>
<font color='#7F7E6F'>&#62; &#62; File of VOMS servers does not exist&#58; /var/lib/gratia-service/voms-servers</font>
<font color='#7F7E6F'>&#62; &#62; Please contact your administrator to check your installation.</font>
<font color='#7F7E6F'>&#62; &#62; Additional administrative services are not available until this is resolved.</font>
<font color='#7F7E6F'>&#62;</font>
<div id='show_2098827748' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2098827748'><font color='#7F7E6F'>&#62; Can you assist me with troubleshooting this installation issue?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Soichi</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [META Information]</font>
<font color='#7F7E6F'>&#62; Application issue with type&#58; gratia_dev</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Ticket Origin]</font>
<font color='#7F7E6F'>&#62; <a href='12498.html#1344882881' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=12498#1344882881</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Ref&#58;MSG1146315</font>
<font color='#7F7E6F'>&#62; &#60;gratia.log&#62;</font>

Tanya Levshina
tlevshin@....
-- by tlevshin at Mon May 06 14&#58;44&#58;36 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810</a>
</div><script type='text/javascript'>
        $('#show_2098827748').click(function() {
            $('#detail_2098827748').slideDown("normal");
            $('#show_2098827748').hide();
            $('#hide_2098827748').show();
        });
        $('#hide_2098827748').click(function() {
            $('#detail_2098827748').slideUp();
            $('#hide_2098827748').hide();
            $('#show_2098827748').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12498#1367588190'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-03T13:36:30+00:00">May 3, 2013 01:36 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1367588190">&nbsp;</a></div><pre>I found MySQL rootpass logged in gratia.log, so I have masked it.. Shouldn&#39;t this be hidden in the log?</pre></div><div class='update_description'><i onclick="document.location='12498#1367588052'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-03T13:34:12+00:00">May 3, 2013 01:34 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1367588052">&nbsp;</a></div><pre>I have run the same install script that was able to setup everything correctly. Please note, I have *dropped* the Gratia DB on rsv-itb prior to the dump&load DB content from rsv-itb, so whaterver post-install did to Gratia DB is lost.

I see some error messages in gratia.log, but I don&#39;t think they came from post-install. I have attached it with this ticket.</pre></div><div class='update_description'><i onclick="document.location='12498#1367585660'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-03T12:54:20+00:00">May 3, 2013 12:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1367585660">&nbsp;</a></div><pre>reply from&#58; tlevshin@....

Hi Soichi,

Are you sure that you have installed everything correctly? This message indicates that post-install script that is executed on the first tomcat start up failed. Please look carefully in gratia.log
Thanks,
Tanya
________________________________
From&#58; Fermilab Service Desk [fermi@....]
Sent&#58; Friday, May 03, 2013 7&#58;50 AM
To&#58; V. Daniel Elvira; Hyun Woo Kim; Philippe G Canal; Tanya Levshina
Subject&#58; Incident INC000000295810 updated -- Gratia collector displaying error message &#34;File of VOMS servers does not exist&#34;

Incident INC000000295810&#60;<a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=fb699eca70bbac003f8307429cc30b10%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true&#62' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=fb699eca70bbac003f8307429cc30b10%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true&#62</a>; comments have been updated.

Last update&#58;
2013-05-03 07&#58;49&#58;14 CDT - cd-srv-goc-ops (Additional comments)
dump&load from rsv.grid to rsv-itb.grid didn&#39;t work.

After about 24 hours of hibernate migration, gratia finally started, but when I access the web UI, I get following error message in the log

<font color='#7F7E6F'>&#62; com.mysql.jdbc.exceptions.MySQLSyntaxErrorException&#58; Table &#39;gratia.TableStatisticsSnapshots&#39; doesn&#39;t exist</font>
<font color='#7F7E6F'>&#62; com.mysql.jdbc.exceptions.MySQLSyntaxErrorException&#58; Unknown column &#39;ValueType&#39; in &#39;where clause&#39;</font>

It looks like getting the replication working is the only way to migrate from old gratia to new gratia (?)

Is there any idea to try to get the replication working again on rsv.grid.iu.edu?
-- by Soichi Hayashi at Fri May 03 12&#58;48&#58;10 UTC 2013

________________________________
Incident State&#58; Work in Progress
Caller&#58; cd-srv-goc-ops
Assignment Group&#58; Gratia Support and Development
Assigned To&#58;
Summary&#58;
<div id='show_846148286' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_846148286'>[by Soichi Hayashi]

I&#39;ve followed following documentation in order to install a Gratia collector.
<font color='#7F7E6F'>&#62; <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService</a></font>

When I visited the following admin interface,
<font color='#7F7E6F'>&#62; <a href='https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html' target='_blank' rel='nofollow'>https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html</a></font>

I saw following message.
<font color='#7F7E6F'>&#62; File of VOMS servers does not exist&#58; /var/lib/gratia-service/voms-servers</font>
<font color='#7F7E6F'>&#62; Please contact your administrator to check your installation.</font>
<font color='#7F7E6F'>&#62; Additional administrative services are not available until this is resolved.</font>

Can you assist me with troubleshooting this installation issue?

Thanks,
Soichi

</div><script type='text/javascript'>
        $('#show_846148286').click(function() {
            $('#detail_846148286').slideDown("normal");
            $('#show_846148286').hide();
            $('#hide_846148286').show();
        });
        $('#hide_846148286').click(function() {
            $('#detail_846148286').slideUp();
            $('#hide_846148286').hide();
            $('#show_846148286').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12498#1367585290'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-03T12:48:10+00:00">May 3, 2013 12:48 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1367585290">&nbsp;</a></div><pre>dump&load from rsv.grid to rsv-itb.grid didn&#39;t work.

After about 24 hours of hibernate migration, gratia finally started, but when I access the web UI, I get following error message in the log

<font color='#7F7E6F'>&#62; com.mysql.jdbc.exceptions.MySQLSyntaxErrorException&#58; Table &#39;gratia.TableStatisticsSnapshots&#39; doesn&#39;t exist</font>
<font color='#7F7E6F'>&#62; com.mysql.jdbc.exceptions.MySQLSyntaxErrorException&#58; Unknown column &#39;ValueType&#39; in &#39;where clause&#39;</font>

It looks like getting the replication working is the only way to migrate from old gratia to new gratia (?)

Is there any idea to try to get the replication working again on rsv.grid.iu.edu?</pre></div><div class='update_description'><i onclick="document.location='12498#1367516820'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T17:47:00+00:00">May 2, 2013 05:47 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1367516820">&nbsp;</a></div><pre>reply from&#58; tlevshin@....

Hi,
I am adding Steve Timm to this ticket. He has a lot of experience with replication and upgrade.
Tanya
________________________________
From&#58; Fermilab Service Desk [fermi@....]
Sent&#58; Thursday, May 02, 2013 12&#58;42 PM
To&#58; V. Daniel Elvira; Hyun Woo Kim; Philippe G Canal; Tanya Levshina
Subject&#58; Incident INC000000295810 updated -- Gratia collector displaying error message &#34;File of VOMS servers does not exist&#34;

Incident INC000000295810&#60;<a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=fb699eca70bbac003f8307429cc30b10%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true&#62' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=fb699eca70bbac003f8307429cc30b10%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true&#62</a>; comments have been updated.

Last update&#58;
2013-05-02 12&#58;42&#58;14 CDT - cd-srv-goc-ops (Additional comments)
Does anyone have any idea about what I can do to troubleshoot this?

If I can&#39;t get the replication to work, then my next alternative is to dump gratia DB and copy & load it into MySQL on the new instance. This process takes about 14 hours, and after that, Gratia&#39;s hibernate will try to upgrade the DB schema which takes another 14 - 24 hours (or more) to do. I am not even sure if such dump & load method works across a huge Gratia version upgrade.. I will try and see what happens.

Still, I&#39;d really like the rsv &#62; rsv-itb replication to work so that we can migrate to the new version more smoothly.
-- by Soichi Hayashi at Thu May 02 17&#58;41&#58;49 UTC 2013

________________________________
Incident State&#58; Work in Progress
Caller&#58; cd-srv-goc-ops
Assignment Group&#58; Gratia Support and Development
Assigned To&#58;
Summary&#58;
[by Soichi Hayashi]

I&#39;ve followed following documentation in order to install a Gratia collector.
<font color='#7F7E6F'>&#62; <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService</a></font>

When I visited the following admin interface,
<font color='#7F7E6F'>&#62; <a href='https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html' target='_blank' rel='nofollow'>https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html</a></font>
<div id='show_1094951523' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1094951523'>
I saw following message.
<font color='#7F7E6F'>&#62; File of VOMS servers does not exist&#58; /var/lib/gratia-service/voms-servers</font>
<font color='#7F7E6F'>&#62; Please contact your administrator to check your installation.</font>
<font color='#7F7E6F'>&#62; Additional administrative services are not available until this is resolved.</font>

Can you assist me with troubleshooting this installation issue?

Thanks,
Soichi

</div><script type='text/javascript'>
        $('#show_1094951523').click(function() {
            $('#detail_1094951523').slideDown("normal");
            $('#show_1094951523').hide();
            $('#hide_1094951523').show();
        });
        $('#hide_1094951523').click(function() {
            $('#detail_1094951523').slideUp();
            $('#hide_1094951523').hide();
            $('#show_1094951523').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12498#1367516509'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-02T17:41:49+00:00">May 2, 2013 05:41 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1367516509">&nbsp;</a></div><pre>Does anyone have any idea about what I can do to troubleshoot this?

If I can&#39;t get the replication to work, then my next alternative is to dump gratia DB and copy & load it into MySQL on the new instance. This process takes about 14 hours, and after that, Gratia&#39;s hibernate will try to upgrade the DB schema which takes another 14 - 24 hours (or more) to do. I am not even sure if such dump & load method works across a huge Gratia version upgrade.. I will try and see what happens.

Still, I&#39;d really like the rsv &#62; rsv-itb replication to work so that we can migrate to the new version more smoothly.</pre></div><div class='update_description'><i onclick="document.location='12498#1367417431'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T14:10:31+00:00">May 1, 2013 02:10 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1367417431">&nbsp;</a></div><pre>Yes, the message seems &#34;fatal&#34; - since I am not receiving any records on rsv-itb.grid.iu.edu. Previously, when I reset the starting DBID to that of &#34;SELECT min(dbid) from MetricRecord_XML&#34;, the replication started working again.</pre></div><div class='update_description'><i onclick="document.location='12498#1367416844'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T14:00:44+00:00">May 1, 2013 02:00 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1367416844">&nbsp;</a></div><pre>reply from&#58; pcanal@....

Hi,

Yes, you should be able to replicate even without the Xml table content.   Are the messages below really &#39;fatal&#39;?

Philippe.

On 5/1/13 8&#58;54 AM, Fermilab Service Desk wrote&#58;
<font color='#7F7E6F'>&#62; Incident INC000000295810</font>
<font color='#7F7E6F'>&#62; &#60;<a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=fb699eca70bbac003f8307429cc30b10%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true&#62' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do%3Fsys_id=fb699eca70bbac003f8307429cc30b10%26sysparm_stack=incident_list.do%3Fsysparm_query=active=true&#62</a>;</font>
<font color='#7F7E6F'>&#62; comments have been updated.</font>
<font color='#7F7E6F'>&#62; *Last update&#58;*</font>
<font color='#7F7E6F'>&#62; 2013-05-01 08&#58;53&#58;30 CDT - cd-srv-goc-ops (Additional comments)</font>
<font color='#7F7E6F'>&#62; (I am re-opening this ticket)</font>
<font color='#7F7E6F'>&#62; Gratia Support,</font>
<font color='#7F7E6F'>&#62; I am trying to migrate our old Gratia collector (rsv.grid.iu.edu) running on RHEL5 to the latest version of Gratia on RHEL6. The</font>
<font color='#7F7E6F'>&#62; new instance will be called rsv1.grid.iu.edu.</font>
<font color='#7F7E6F'>&#62; I was hoping that I can setup an empty rsv1.grid.iu.edu and use Gratia replication to fill all current data stored in</font>
<font color='#7F7E6F'>&#62; rsv.grid.iu.edu. However, we&#39;ve been truncating MetricRecord_Xml table (to save disk space), and as discussed in this ticket,</font>
<font color='#7F7E6F'>&#62; Gratia replication will fail if I set the replication DBID to 1 with following error message.</font>
<font color='#7F7E6F'>&#62; ...</font>
<font color='#7F7E6F'>&#62; 2013-05-01 13&#58;44&#58;44,807 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58;</font>
<font color='#7F7E6F'>&#62; Received Null XML&#58; dbid&#58; 460512</font>
<font color='#7F7E6F'>&#62; 2013-05-01 13&#58;44&#58;44,809 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58;</font>
<font color='#7F7E6F'>&#62; Received Null XML&#58; dbid&#58; 460516</font>
<font color='#7F7E6F'>&#62; 2013-05-01 13&#58;44&#58;44,811 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58;</font>
<font color='#7F7E6F'>&#62; Received Null XML&#58; dbid&#58; 460517</font>
<font color='#7F7E6F'>&#62; 2013-05-01 13&#58;44&#58;44,813 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58;</font>
<font color='#7F7E6F'>&#62; Received Null XML&#58; dbid&#58; 460518</font>
<font color='#7F7E6F'>&#62; 2013-05-01 13&#58;44&#58;44,814 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58;</font>
<font color='#7F7E6F'>&#62; Received Null XML&#58; dbid&#58; 460521</font>
<font color='#7F7E6F'>&#62; ...</font>
<font color='#7F7E6F'>&#62; Is there a way to work around this issue? Without the records in XML table, is the data completely lost? Or is there a way to</font>
<font color='#7F7E6F'>&#62; recreate XML table from MetricRecord table?</font>
<div id='show_558083180' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_558083180'><font color='#7F7E6F'>&#62; Thanks</font>
<font color='#7F7E6F'>&#62; -- by Soichi Hayashi at Wed May 01 13&#58;53&#58;00 UTC 2013</font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; *Incident State&#58;* Work in Progress</font>
<font color='#7F7E6F'>&#62; *Caller&#58;* cd-srv-goc-ops</font>
<font color='#7F7E6F'>&#62; *Assignment Group&#58;* Gratia Support and Development</font>
<font color='#7F7E6F'>&#62; *Assigned To&#58;*</font>
<font color='#7F7E6F'>&#62; *Summary&#58;*</font>
<font color='#7F7E6F'>&#62; [by Soichi Hayashi]</font>
<font color='#7F7E6F'>&#62; I&#39;ve followed following documentation in order to install a Gratia collector.</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService</a></font>
<font color='#7F7E6F'>&#62; When I visited the following admin interface,</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html' target='_blank' rel='nofollow'>https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html</a></font>
<font color='#7F7E6F'>&#62; I saw following message.</font>
<font color='#7F7E6F'>&#62; &#62; File of VOMS servers does not exist&#58; /var/lib/gratia-service/voms-servers</font>
<font color='#7F7E6F'>&#62; &#62; Please contact your administrator to check your installation.</font>
<font color='#7F7E6F'>&#62; &#62; Additional administrative services are not available until this is resolved.</font>
<font color='#7F7E6F'>&#62; Can you assist me with troubleshooting this installation issue?</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Soichi</font>
<font color='#7F7E6F'>&#62; [META Information]</font>
<font color='#7F7E6F'>&#62; Application issue with type&#58; gratia_dev</font>
<font color='#7F7E6F'>&#62; [Ticket Origin]</font>
<font color='#7F7E6F'>&#62; <a href='12498.html#1344882881' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=12498#1344882881</a></font>
<font color='#7F7E6F'>&#62; ------------------------------------------------------------------------------------------------------------------------------------</font>
<font color='#7F7E6F'>&#62; Ref&#58;MSG1137228</font>
-- by pcanal at Wed May 01 13&#58;59&#58;03 UTC 2013

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810</a>
</div><script type='text/javascript'>
        $('#show_558083180').click(function() {
            $('#detail_558083180').slideDown("normal");
            $('#show_558083180').hide();
            $('#hide_558083180').show();
        });
        $('#hide_558083180').click(function() {
            $('#detail_558083180').slideUp();
            $('#hide_558083180').hide();
            $('#show_558083180').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12498#1367416380'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-05-01T13:53:00+00:00">May 1, 2013 01:53 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1367416380">&nbsp;</a></div><pre>(I am re-opening this ticket)

Gratia Support,

I am trying to migrate our old Gratia collector (rsv.grid.iu.edu) running on RHEL5 to the latest version of Gratia on RHEL6. The new instance will be called rsv1.grid.iu.edu.

I was hoping that I can setup an empty rsv1.grid.iu.edu and use Gratia replication to fill all current data stored in rsv.grid.iu.edu. However, we&#39;ve been truncating MetricRecord_Xml table (to save disk space), and as discussed in this ticket, Gratia replication will fail if I set the replication DBID to 1 with following error message.

...
2013-05-01 13&#58;44&#58;44,807 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 460512
2013-05-01 13&#58;44&#58;44,809 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 460516
2013-05-01 13&#58;44&#58;44,811 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 460517
2013-05-01 13&#58;44&#58;44,813 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 460518
2013-05-01 13&#58;44&#58;44,814 gratia.service(Thread-2469) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 460521
...

Is there a way to work around this issue? Without the records in XML table, is the data completely lost? Or is there a way to recreate XML table from MetricRecord table?

Thanks</pre></div><div class='update_description'><i onclick="document.location='12498#1346263104'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-29T17:58:24+00:00">Aug 29, 2012 05:58 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1346263104">&nbsp;</a></div><pre>Closing this ticket.</pre></div><div class='update_description'><i onclick="document.location='12498#1346263050'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-29T17:57:30+00:00">Aug 29, 2012 05:57 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1346263050">&nbsp;</a></div><pre>rsv-itb.grid.iu.edu shows &#34;Gratia Services Version&#58; v1.13-3.osg.el5&#34;

It&#39;s running on RHEL 5.8 (Tikanga)</pre></div><div class='update_description'><i onclick="document.location='12498#1346260090'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-29T17:08:10+00:00">Aug 29, 2012 05:08 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1346260090">&nbsp;</a></div><pre>Hi Soichi,

Is this a node that is running 1.13.3? Is it sl5 or sl6?
Also, could you please close this ticket and start a new one? The subject of the ticket is not related to the problem.

Thanks,
Tanya

On Aug 29, 2012, at 8&#58;18 AM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12498#1346251176'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-29T14:39:36+00:00">Aug 29, 2012 02:39 PM UTC</time><a class="anchor" name="1346251176">&nbsp;</a></div><pre>Can this ticket be closed.

We have resolved the original problem.
And have also resolved an unrelated, to this ticket, Replication issue.

Open a new ticket related to this inode/disk space issue.

It is getting too confusing.

Thanks
John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='12498#1346246291'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-29T13:18:11+00:00">Aug 29, 2012 01:18 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1346246291">&nbsp;</a></div><pre>Greetings,

We have observed a new difficulty on our rsv-itb machine. It is consuming a large number of inodes and disk space.
We have traced this to /var/lib/gratia-service/data. One of the directories there contains the following&#58;

(/var/lib/gratia-service/data/old-2012082806)
drwxr-xr-x   2 tomcat tomcat 36864 Aug 28 06&#58;18 thread0-49
-rw-r--r--   1 tomcat tomcat     0 Aug 29 07&#58;49 thread0-49.tar.bz2
drwxr-xr-x   2 tomcat tomcat 57344 Aug 28 06&#58;27 thread0-50
-rw-r--r--   1 tomcat tomcat     0 Aug 29 07&#58;49 thread0-50.tar.bz2
drwxr-xr-x   2 tomcat tomcat 57344 Aug 28 06&#58;43 thread0-51
-rw-r--r--   1 tomcat tomcat     0 Aug 29 07&#58;49 thread0-51.tar.bz2
drwxr-xr-x   2 tomcat tomcat 36864 Aug 28 06&#58;59 thread0-52
-rw-r--r--   1 tomcat tomcat     0 Aug 29 07&#58;49 thread0-52.tar.bz2

Looks to us like the tar/compression is failing leaving behind many, small uncompressed files.

Scott</pre></div><div class='update_description'><i onclick="document.location='12498#1346079510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-27T14:58:30+00:00">Aug 27, 2012 02:58 PM UTC</time><a class="anchor" name="1346079510">&nbsp;</a></div><pre>Soichi,

I believe replication was working.  It was just starting at the beginning
dbid = 0 as you requested but it was not finding any MetricRecord_Xml records
to send and was filling up log files letting you know.

What makes you believe anything has been fixed with Gratia housekeeping with
the latest release?  Did Tanya fix something in that area?

From what I can see housekeeping defaults to 1 month&#39;s worth of MetricRecord_Xml
table entries.  So if you start up a MetricRecord replication again always do
a &#39;select min(dbid) from MetricRecord_Xml&#39; to set the dbid to start with.

John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='12498#1346079100'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-27T14:51:40+00:00">Aug 27, 2012 02:51 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1346079100">&nbsp;</a></div><pre>(Adding Scott for FYI)

John,

I&#39;ve reset the DBID to 74723341 and replication is now working. I have to monitor the data that are replicated to see if they contain valid data, but so far so good.

On our current production RSV collector, we have a script in place to periodically prune old records from MetricRecord_Xml because the Gratia&#39;s housekeeping features doesn&#39;t work properly and it was filling up our disk space. This is one of the reason why I am eager to get our Gratia collector upgraded.

Once I confirm that correct data is replicated, I will close this ticket.

Thanks!
Soichi</pre></div><div class='update_description'><i onclick="document.location='12498#1346077735'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-27T14:28:55+00:00">Aug 27, 2012 02:28 PM UTC</time><a class="anchor" name="1346077735">&nbsp;</a></div><pre>Soichi,

Try setting the DBID to 74723341 in Replication for those MetricRecords.
From what I can see the MetricRecord_Xml is only kept for 1 month and
I am guessing that is what it is having a problem with.

I think you will still see some errors regarding null xml (if I am guessing
correctly) but some should replicate.

John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='12498#1345843748'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T21:29:08+00:00">Aug 24, 2012 09:29 PM UTC</time> by <b>John Weigand</b><a class="anchor" name="1345843748">&nbsp;</a></div><pre>Look at the database records for that dbid in the set of MetricsReords
tables... there are 4 of them.... I believe it is the MetricRecord_Xml
that gets passed with replication.  I don&#39;t know that much about the
MetricsRecords.
That was something that was added into the database by the RSV folks, I
think.  Could be you have some corrupt data.

John Weigand

On 08/24/12 3&#58;27 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12498#1345840024'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T20:27:04+00:00">Aug 24, 2012 08:27 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345840024">&nbsp;</a></div><pre>I&#39;ve removed it via Gratia admin GUI, then added new replication with the same host. I then clicked the &#34;Test&#34; button and saw &#34;Test Succeeded !!&#34;, so I clicked the start button.

As far as I can tell, it&#39;s doing the same thing as before. The record counter is never incremented, and I am seeing the same error messages inside /usr/local/rsv-gratia-collector/tomcat/v55/logs/gratia.log

2012-08-24 20&#58;26&#58;00,727 gratia.service(Thread-3917) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 73686
2012-08-24 20&#58;26&#58;00,729 gratia.service(Thread-3917) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 73706
2012-08-24 20&#58;26&#58;00,730 gratia.service(Thread-3917) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 73707
2012-08-24 20&#58;26&#58;00,770 gratia.service(Thread-3917) [INFO]&#58; ReplicationDataPump #9 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 73718

Soichi</pre></div><div class='update_description'><i onclick="document.location='12498#1345839489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T20:18:09+00:00">Aug 24, 2012 08:18 PM UTC</time><a class="anchor" name="1345839489">&nbsp;</a></div><pre>Soichi,

Why don&#39;t you delete that entry
and then re-create it.

John

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='12498#1345838968'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T20:09:28+00:00">Aug 24, 2012 08:09 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345838968">&nbsp;</a></div><pre>mysql&#62; select * from Replication;
+---------------+------------+---------+----------+---------------------------------+------------------+-----------+------+----------+-----------+--------------+------------+
| replicationid | registered | running | security | openconnection                  | secureconnection | frequency | dbid | rowcount | probename | recordtable  | bundleSize |
+---------------+------------+---------+----------+---------------------------------+------------------+-----------+------+----------+-----------+--------------+------------+
|             8 |          0 |       0 |        0 | <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a> |                  |         1 |    0 |        0 | All       | MetricRecord |          0 |
+---------------+------------+---------+----------+---------------------------------+------------------+-----------+------+----------+-----------+--------------+------------+
1 row in set (0.00 sec)

I had to stop the replication since it was filling up the disk with the error message.</pre></div><div class='update_description'><i onclick="document.location='12498#1345837986'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T19:53:06+00:00">Aug 24, 2012 07:53 PM UTC</time><a class="anchor" name="1345837986">&nbsp;</a></div><pre>Can you do a select * from Replication?

John

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='12498#1345837084'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T19:38:04+00:00">Aug 24, 2012 07:38 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345837084">&nbsp;</a></div><pre>Correct.

I don&#39;t know what JobUsageRecords are for, but we primarily use MetricRecord table.

mysql&#62; select max(dbid), count(*) from MetricRecord;
+-----------+----------+
| max(dbid) | count(*) |
+-----------+----------+
|  75640334 | 36515636 |
+-----------+----------+
1 row in set (2 min 12.54 sec)

We also use various other MetricRecord related tables.</pre></div><div class='update_description'><i onclick="document.location='12498#1345836987'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T19:36:27+00:00">Aug 24, 2012 07:36 PM UTC</time><a class="anchor" name="1345836987">&nbsp;</a></div><pre>Are you sure you area using the right database?
I am seeing zero JobUsageRecords which means you have an
empty database for the most part.

Use the mysql client to query.

John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='12498#1345836669'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T19:31:09+00:00">Aug 24, 2012 07:31 PM UTC</time><a class="anchor" name="1345836669">&nbsp;</a></div><pre>You have no JobUsageRecords?

john

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='12498#1345836534'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T19:28:54+00:00">Aug 24, 2012 07:28 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345836534">&nbsp;</a></div><pre>John, on rsv.grid.iu.edu, it shows that it&#39;s NULL.

mysql&#62; select max(dbid), count(*) from JobUsageRecord;
+-----------+----------+
| max(dbid) | count(*) |
+-----------+----------+
|      NULL |        0 |
+-----------+----------+
1 row in set (0.00 sec)</pre></div><div class='update_description'><i onclick="document.location='12498#1345836079'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T19:21:19+00:00">Aug 24, 2012 07:21 PM UTC</time><a class="anchor" name="1345836079">&nbsp;</a></div><pre>Soichi,

What&#39;s the max dbid in the JobUsageRecord?

John Weigand

-- by John Weigand</pre></div><div class='update_description'><i onclick="document.location='12498#1345835473'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T19:11:13+00:00">Aug 24, 2012 07:11 PM UTC</time> by <b>Tanya Levshina</b><a class="anchor" name="1345835473">&nbsp;</a></div><pre>Hi Soichi,

For some reason I&#39;ve missed your response. I have not get any update on this ticket until now.
We will try to figure out what is going with replication and let you know.
Thanks,
Tanya

On Aug 24, 2012, at 12&#58;54 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12498#1345830849'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-24T17:54:09+00:00">Aug 24, 2012 05:54 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345830849">&nbsp;</a></div><pre>(CC-ing GRATIA-OPERATION@....)

Gratia Operations,

Is there someone who could help me with my metric replication issue?

Thanks!
Soichi</pre></div><div class='update_description'><i onclick="document.location='12498#1345478403'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-20T16:00:03+00:00">Aug 20, 2012 04:00 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345478403">&nbsp;</a></div><pre>I found following log entry inside /usr/local/rsv-gratia-collector/tomcat/v55/logs/gratia.log

2012-08-20 15&#58;49&#58;21,669 gratia.service(Thread-3512) [INFO]&#58; ReplicationDataPump #8 (All to <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>)&#58; Received Null XML&#58; dbid&#58; 469355

I tried to add more verbose logging on the rsv-itb.grid.iu.edu, but so far I am not seeing anything useful. Could it be that the version mismatch is too large between rsv.grid.iu.edu and rsv-itb.grid.iu.edu?

Soichi</pre></div><div class='update_description'><i onclick="document.location='12498#1345468678'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-20T13:17:58+00:00">Aug 20, 2012 01:17 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345468678">&nbsp;</a></div><pre>Can someone from Gratia softwareteam help me with this issue?</pre></div><div class='update_description'><i onclick="document.location='12498#1345038746'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-15T13:52:26+00:00">Aug 15, 2012 01:52 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1345038746">&nbsp;</a></div><pre>Tanya,

I have now v1.13 installed on rsv-itb.grid.iu.edu. It seems to be receiving records from our test clients, but I am having setting up the replication from rsv.grid.iu.edu.

On rsv.grid.iu.edu, I have following replication entries setup.

Remote Host&#58;	 <a href='http&#58;//rsv-itb.grid.iu.edu&#58;8880' target='_blank' rel='nofollow'>http&#58;//rsv-itb.grid.iu.edu&#58;8880</a>
Registered &#58;No
Running&#58; Yes
Srcurity&#58; No
Probe Name&#58; All
Check Interval(m)&#58; 1
DBID&#58; 75115804
Row Count&#58; 0
Bundle Size&#58; 0

When I click &#34;test&#34;, I see a message; &#34;Test Succeeded !!&#34;

However, after waiting for several hours, the row count stayed 0, and I don&#39;t see any records replicated to rsv-itb.grid.iu.edu. I am running v1.06.14 on rsv.grid.iu.edu.

How can I find out why rsv.grid.iu.edu is not sending records?

Soichi</pre></div><div class='update_description'><i onclick="document.location='12498#1344900790'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-13T23:33:10+00:00">Aug 13, 2012 11:33 PM UTC</time> by <b>Soichi Hayashi</b><a class="anchor" name="1344900790">&nbsp;</a></div><pre>Tanya,

Thank you for the reply. I have updated &#34;service.admin.DN.0&#34;, and manually ran /usr/share/gratia/voms-server.sh. Now the original error message disappeared, and I can access the administration pages.

I have installed gratia-service from osg-release, which is currently v1.12. I will upgrade it tomorrow. Where can I find the release note?

By the way, I had to set log level for gratia.log inside service-configuration.properties to be SEVERE. Even with log level set to WARNING, it output all records received via metric replication, and it was filling up the disk space. If this expected?

I&#39;ve noticed that Gratia service is populating DupRecord table. What is this used for? As far as I know, the only table I really care about is MetricRecord table. Is there a way to disable populating DupRecord table?

<font color='#7F7E6F'>&#62; DupRecord                   | InnoDB |      10 | Compact    | 1463464 |          12248 | 17925406720 |               0 |     98861056 |         0 |        1117503 | 2012-08-13 18&#58;17&#58;26 | NULL        | NULL       | latin1_swedish_ci |     NULL |                | InnoDB free&#58; 7168 kB                                                             |</font></pre></div><div class='update_description'><i onclick="document.location='12498#1344883587'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-13T18:46:27+00:00">Aug 13, 2012 06:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1344883587">&nbsp;</a></div><pre>reply from&#58; tlevshin@....

Hi Soichi,

Please do the following&#58;
from documentation&#58;

You should also configure the administrative login to Gratia service at this time. Please read the detailed instructions in /etc/gratia/collector/service-configuration.properties under # ##########  Administrative login section.

you have to modify
service.admin.DN.0 = &#60;DN&#62;
e.g&#58;

service.admin.DN.0=/DC=org/DC=doegrids/OU=People/CN=Tanya Levshina 508821

you have several admin you should add

...DN.1=
...DN.2

also check what time is set in /etc/cron.d/voms-server.cron
42 1 * * * root /usr/share/gratia/voms-server.sh  &#62;/dev/null 2&#62;&1

You can either change time or execute  /usr/share/gratia/voms-server.sh manually.

BTW, are you installing the newest release 1.13.3 (in osg-testing)? It will go in production tomorrow.
Please let me know,
Thanks,
Tanya

On Aug 13, 2012, at 1&#58;36 PM, Fermilab Service Desk wrote&#58;

<font color='#7F7E6F'>&#62; Gratia Support and Development Team,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Incident INC000000295810 created at 2012-08-13 13&#58;35&#58;09 CDT has been assigned to your group.</font>
<div id='show_1978672539' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1978672539'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Short Description&#58; Gratia collector displaying error message &#34;File of VOMS servers does not exist&#34;</font>
<font color='#7F7E6F'>&#62; Caller&#58; cd-srv-goc-ops</font>
<font color='#7F7E6F'>&#62; Categorization&#58;</font>
<font color='#7F7E6F'>&#62; Priority&#58; 3 - Medium</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Summary&#58; [by Soichi Hayashi]</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I&#39;ve followed following documentation in order to install a Gratia collector.</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; When I visited the following admin interface,</font>
<font color='#7F7E6F'>&#62; &#62; <a href='https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html' target='_blank' rel='nofollow'>https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I saw following message.</font>
<font color='#7F7E6F'>&#62; &#62; File of VOMS servers does not exist&#58; /var/lib/gratia-service/voms-servers</font>
<font color='#7F7E6F'>&#62; &#62; Please contact your administrator to check your installation.</font>
<font color='#7F7E6F'>&#62; &#62; Additional administrative services are not available until this is resolved.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Can you assist me with troubleshooting this installation issue?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; Soichi</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [META Information]</font>
<font color='#7F7E6F'>&#62; Application issue with type&#58; gratia_dev</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Ticket Origin]</font>
<font color='#7F7E6F'>&#62; <a href='12498.html#1344882881' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=12498#1344882881</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Additional Comments&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Ref&#58;MSG0571580</font>
-- by tlevshin at Mon Aug 13 18&#58;44&#58;58 UTC 2012

GOCTX Source&#58; <a href='https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810' target='_blank' rel='nofollow'>https&#58;//fermi.service-now.com/nav_to.do?uri=incident.do?sys_id=INC000000295810</a>
</div><script type='text/javascript'>
        $('#show_1978672539').click(function() {
            $('#detail_1978672539').slideDown("normal");
            $('#show_1978672539').hide();
            $('#hide_1978672539').show();
        });
        $('#hide_1978672539').click(function() {
            $('#detail_1978672539').slideUp();
            $('#hide_1978672539').hide();
            $('#show_1978672539').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12498#1344882881'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-13T18:34:41+00:00">Aug 13, 2012 06:34 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1344882881">&nbsp;</a></div><pre>[by Soichi Hayashi]

I&#39;ve followed following documentation in order to install a Gratia collector.
<font color='#7F7E6F'>&#62; <a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/InstallGratiaService</a></font>

When I visited the following admin interface,
<font color='#7F7E6F'>&#62; <a href='https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html' target='_blank' rel='nofollow'>https&#58;//rsv-itb.grid.iu.edu&#58;8443/gratia-administration/index.html</a></font>

I saw following message.
<font color='#7F7E6F'>&#62; File of VOMS servers does not exist&#58; /var/lib/gratia-service/voms-servers</font>
<font color='#7F7E6F'>&#62; Please contact your administrator to check your installation.</font>
<font color='#7F7E6F'>&#62; Additional administrative services are not available until this is resolved.</font>

Can you assist me with troubleshooting this installation issue?

Thanks,
Soichi</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12498">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
