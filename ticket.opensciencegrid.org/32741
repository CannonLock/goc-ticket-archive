<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[32741] BNL FTS server in trouble again</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=32741" method="post">
<div class="page-header">
    <h3><span class="muted">32741</span> / BNL FTS server in trouble again</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">tomas.javurek </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">tomas.javurek</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Critical</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-02-24</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=126749">126749</a> <span class="muted"> / Ticket Exchange</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=27023">27023</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/32741", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/32741?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/32741?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20BNL%20FTS%20server%20in%20trouble%20again%20ISSUE%3D32741%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='32741#1489449627'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-03-14T00:00:27+00:00">Mar 14, 2017 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1489449627">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by GGUS SYSTEM at Mon Mar 13 23&#58;59&#58;11 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1488186887'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-27T09:14:47+00:00">Feb 27, 2017 09:14 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488186887">&nbsp;</a></div><pre>I am going to close this ticket. Discussion can continue here&#58;
GGUS Ticket #126834It is not alarm situation anymore.

-- by tomas.javurek at Mon Feb 27 09&#58;14&#58;11 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1488181485'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-27T07:44:45+00:00">Feb 27, 2017 07:44 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1488181485">&nbsp;</a></div><pre>I tried to set shares on Friday, but it seems that they are still not set. Shall I try again with the curl command&#58;

curl <a href='https&#58;//fts.usatlas.bnl.gov&#58;8446/config/activity_shares' target='_blank' rel='nofollow'>https&#58;//fts.usatlas.bnl.gov&#58;8446/config/activity_shares</a> -H &#34;Content-Type&#58; application/json&#34; -X POST -d &#39;{&#34;vo&#34;&#58;&#34;atlas&#34;,&#34;active&#34;&#58;true,&#34;share&#34;&#58;[{&#34;data brokering&#34;&#58;0.3},{&#34;data consolidation&#34;&#58;0.2},{&#34;default&#34;&#58;0.02},{&#34;express&#34;&#58;0.4},{&#34;functional test&#34;&#58;0.2},{&#34;production&#34;&#58;0.5},{&#34;data rebalancing&#34;&#58;0.5},{&#34;production input&#34;&#58;0.25},{&#34;production output&#34;&#58;0.25},{&#34;recovery&#34;&#58;0.4},{&#34;staging&#34;&#58;0.5},{&#34;t0 export&#34;&#58;0.7},{&#34;t0 tape&#34;&#58;0.7},{&#34;user subscriptions&#34;&#58;0.1}]}&#39; -E &#34;${X509_USER_PROXY}&#34; --cacert &#34;${X509_USER_PROXY}&#34; --capath &#34;/etc/grid-security/certificates&#34;

-- by tomas.javurek at Mon Feb 27 07&#58;44&#58;07 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487975805'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-24T22:36:45+00:00">Feb 24, 2017 10:36 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487975805">&nbsp;</a></div><pre>Hello.

This was fixed after talking to the FTS developer by increasing the size of
varchar column in one of the table.

Hiro
-- by hiroito at Fri Feb 24 22&#58;36&#58;31 UTC 2017

GOCTX Source&#58; BNL Ticket&#58; Queue=StorageManagement ID=27023</pre></div><div class='update_description'><i onclick="document.location='32741#1487947940'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-24T14:52:20+00:00">Feb 24, 2017 02:52 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487947940">&nbsp;</a></div><pre>Hello.

No. it was caused by someone inscerting the share/activity which I have
reported that it breaks for some reason. Anyway, the service was restored
earlier after removing the activity.

Hiro
-- by hiroito at Fri Feb 24 14&#58;52&#58;00 UTC 2017

GOCTX Source&#58; BNL Ticket&#58; Queue=StorageManagement ID=27023</pre></div><div class='update_description'><i onclick="document.location='32741#1487947608'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-24T14:46:48+00:00">Feb 24, 2017 02:46 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487947608">&nbsp;</a></div><pre>Hi Iris,

Have you done something? I removed the activity config, but it didn&#39;t seem to unblock the server. However, now it is running again.
Do you have a Skype, GTalk or CERN account (for Mattermost) so we can iterate over there?

-- by Alejandro Alvarez at Fri Feb 24 14&#58;46&#58;27 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487946915'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-24T14:35:15+00:00">Feb 24, 2017 02:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487946915">&nbsp;</a></div><pre>Hi Alejandro,

Hiro is on vacation right now. Please let me know which files you would like to
check in FTS server. I am happy to check them for you.

Regards,
Iris

On Fri Feb 24 08&#58;15&#58;15 2017, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; Alejandro Alvarez has subscribed to this ticket.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Neither can I, and I do not have access to the machine.</font>
<font color='#7F7E6F'>&#62; I am applying exactly the same config but for dteam at CERN and it</font>
<font color='#7F7E6F'>&#62; works just fine. I have no idea what&#39;s happening at BNL.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; -- by Alejandro Alvarez at Fri Feb 24 13&#58;13&#58;32 UTC 2017</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></font>
<font color='#7F7E6F'>&#62; -- by OSG-GOC at Fri Feb 24 13&#58;14&#58;36 UTC 2017</font>
-- by iriswu at Fri Feb 24 14&#58;34&#58;57 UTC 2017

GOCTX Source&#58; BNL Ticket&#58; Queue=StorageManagement ID=27023</pre></div><div class='update_description'><i onclick="document.location='32741#1487942076'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-24T13:14:36+00:00">Feb 24, 2017 01:14 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487942076">&nbsp;</a></div><pre>Alejandro Alvarez has subscribed to this ticket.

Neither can I, and I do not have access to the machine.
I am applying exactly the same config but for dteam at CERN and it works just fine. I have no idea what&#39;s happening at BNL.

-- by Alejandro Alvarez at Fri Feb 24 13&#58;13&#58;32 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487929705'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-24T09:48:25+00:00">Feb 24, 2017 09:48 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487929705">&nbsp;</a></div><pre>Hello Alejandro,

I got Internal Server errror using both the link&#58;
<a href='https&#58;//fts.usatlas.bnl.gov&#58;8449/fts3/ftsmon/#/config/activities?vo=&source_se=&dest_se=&time_window=1' target='_blank' rel='nofollow'>https&#58;//fts.usatlas.bnl.gov&#58;8449/fts3/ftsmon/#/config/activities?vo=&source_se=&dest_se=&time_window=1</a>

or curl&#58;
[root@rucio-nagios-prod-02 ~]# curl <a href='https&#58;//fts.usatlas.bnl.gov&#58;8446/config/activity_shares' target='_blank' rel='nofollow'>https&#58;//fts.usatlas.bnl.gov&#58;8446/config/activity_shares</a> -H &#34;Content-Type&#58; application/json&#34; -E &#34;${X509_USER_PROXY}&#34; --cacert &#34;${X509_USER_PROXY}&#34; --capath &#34;/etc/grid-security/certificates&#34;

&#60;html&#62;
&#60;head&#62;
&#60;title&#62;Server Error&#60;/title&#62;

&#60;/head&#62;
&#60;body&#62;
&#60;h1&#62;Server Error&#60;/h1&#62;
An internal server error occurred

&#60;/body&#62;
&#60;/html&#62;

-- by tomas.javurek at Fri Feb 24 09&#58;47&#58;43 UTC 2017

Andrea Manzi has subscribed to this ticket.

-- by Andrea Manzi at Fri Feb 24 09&#58;04&#58;08 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487923161'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-24T07:59:21+00:00">Feb 24, 2017 07:59 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487923161">&nbsp;</a></div><pre>Hi Tomas,

Indeed, there are no activities configured. The curl command looks right to me.

-- by Alejandro Alvarez at Fri Feb 24 07&#58;58&#58;40 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487922677'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-24T07:51:17+00:00">Feb 24, 2017 07:51 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487922677">&nbsp;</a></div><pre>I can not load the link [1] that I posted in previous message. Can somebody check please?

CRC shifter

-- by tomas.javurek at Fri Feb 24 07&#58;50&#58;43 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487853406'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T12:36:46+00:00">Feb 23, 2017 12:36 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487853406">&nbsp;</a></div><pre>Hello Alejandro,

I see this [1] empty that I understand that we are still not using shares. According to my notes, the correct way to configure that is [2]. Can you please confirm? If the curl command is correct, do we agree to proceed in this way?

Tomas.

[1]
<a href='https&#58;//fts.usatlas.bnl.gov&#58;8449/fts3/ftsmon/#/config/activities?vo=&source_se=&dest_se=&time_window=1' target='_blank' rel='nofollow'>https&#58;//fts.usatlas.bnl.gov&#58;8449/fts3/ftsmon/#/config/activities?vo=&source_se=&dest_se=&time_window=1</a>

[2]
curl <a href='https&#58;//fts.usatlas.bnl.gov&#58;8446/config/activity_shares' target='_blank' rel='nofollow'>https&#58;//fts.usatlas.bnl.gov&#58;8446/config/activity_shares</a> -H &#34;Content-Type&#58; application/json&#34; -X POST -d &#39;{&#34;vo&#34;&#58;&#34;atlas&#34;,&#34;active&#34;&#58;true,&#34;share&#34;&#58;[{&#34;data brokering&#34;&#58;0.3},{&#34;data consolidation&#34;&#58;0.2},{&#34;default&#34;&#58;0.02},{&#34;express&#34;&#58;0.4},{&#34;functional test&#34;&#58;0.2},{&#34;production&#34;&#58;0.5},{&#34;data rebalancing&#34;&#58;0.5},{&#34;production input&#34;&#58;0.25},{&#34;production output&#34;&#58;0.25},{&#34;recovery&#34;&#58;0.4},{&#34;staging&#34;&#58;0.5},{&#34;t0 export&#34;&#58;0.7},{&#34;t0 tape&#34;&#58;0.7},{&#34;user subscriptions&#34;&#58;0.1}]}&#39; -E &#34;${X509_USER_PROXY}&#34; --cacert &#34;${X509_USER_PROXY}&#34; --capath &#34;/etc/grid-security/certificates&#34;

-- by tomas.javurek at Thu Feb 23 12&#58;36&#58;27 UTC 2017

Alejandro Alvarez has subscribed to this ticket.

-- by Alejandro Alvarez at Thu Feb 23 10&#58;51&#58;31 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487845420'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T10:23:40+00:00">Feb 23, 2017 10:23 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487845420">&nbsp;</a></div><pre>Hi Hiro,

To reduce the size of the bring online logs, edit /etc/init.d/fts-bringonline.
You will see probably a line like &#34;export CGSI_TRACE=1&#34;. Set it to 1 and restart the daemon. This way you won&#39;t get a dump of the srm request/response.

It is handy for debugging, but with this rate is is just way too much, and, as you say, almost of no use to find anything.

About the activity, from here
<a href='https&#58;//fts.usatlas.bnl.gov&#58;8449/fts3/ftsmon/#/statistics/servers?vo=&source_se=&dest_se=&time_window=1' target='_blank' rel='nofollow'>https&#58;//fts.usatlas.bnl.gov&#58;8449/fts3/ftsmon/#/statistics/servers?vo=&source_se=&dest_se=&time_window=1</a>

I see for staging they are all more or less the same. Actually fts302.usatlas.bnl.gov seems to be the one with the least staging requests assigned.

In any case, the staging part is known to be not very well performant in that (and previous) versions. The database execution plan can get really really bad, which slows down the other nodes even if they are underloaded, because it is the DB the bottleneck.

FTS 3.6 should improve this situation. On a DB running on a VM with just 16 GB of RAM we have run up to 700k staging with no problems (the DB CPU a bit overworked, but functional). If BNL can&#39;t keep the pace, the only thing I can suggest is for atlas to reduce the amount of staging operations put into BNL, or move part of it to the CERN Pilot, which is running this latest version.

I am surprised about the error due to the activity shares, though. Maybe it is just best if Atlas can set the values the usual way, via REST.

Cheers.

-- by Alejandro Alvarez at Thu Feb 23 10&#58;23&#58;08 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487844880'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T10:14:40+00:00">Feb 23, 2017 10:14 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487844880">&nbsp;</a></div><pre>We registered some transfers. Some of the actions perhaps helped.

CRC, Atlas.

-- by tomas.javurek at Thu Feb 23 10&#58;14&#58;11 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a></pre></div><div class='update_description'><i onclick="document.location='32741#1487842010'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T09:26:50+00:00">Feb 23, 2017 09:26 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487842010">&nbsp;</a></div><pre>Hello.

Actually, by adding this to db, I can&#39;t start the fts service due to
the
following error.   I just removed it from db.  And, it works fine.
Can
FTS devs advise ?

INFO    Thu Feb 23 04&#58;09&#58;19 2017; Starting WebService
INFO    Thu Feb 23 04&#58;09&#58;19 2017; Soap service 29 IP&#58;192.12.15.65
Port&#58;8443
ERR     Thu Feb 23 04&#58;09&#58;22 2017; Exception in
TransfersService&#58;getFiles
getReadyTransfers&#58; Caught exception getFilesNumPerActivity&#58; Caught
exception getActivityShareConf&#58; Caught exception bad lexical cast&#58;
source type value could not be interpreted as target
ERR     Thu Feb 23 04&#58;09&#58;22 2017; Exception in
TransfersService&#58;getFiles
getReadyTransfers&#58; Caught exception getFilesNumPerActivity&#58; Caught
exception getActivityShareConf&#58; Caught exception bad lexical cast&#58;
source type value could not be interpreted as target
terminate called after throwing an instance of &#39;terminate called after
throwing an instance of &#39;fts3&#58;&#58;common&#58;&#58;UserError&#39;
fts3&#58;&#58;common&#58;&#58;UserError&#39;
what()&#58;  getReadyTransfers&#58; Caught exception
getFilesNumPerActivity&#58;
Caught exception getActivityShareConf&#58; Caught exception bad lexical
cast&#58; source type value could not be interpreted as target  what()&#58;
getReadyTransfers&#58; Caught exception getFilesNumPerActivity&#58; Caught
exception getActivityShareConf&#58; Caught exception bad lexical cast&#58;
source type value could not be interpreted as target

ERR     Thu Feb 23 04&#58;09&#58;22 2017; Exception in
TransfersService&#58;getFiles
getReadyTransfers&#58; Caught exception getFilesNumPerActivity&#58; Caught
<div id='show_737849506' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_737849506'>exception getActivityShareConf&#58; Caught exception bad lexical cast&#58;
source type value could not be interpreted as target
terminate called recursively
/usr/lib64/libfts_common.so.3(_ZN4fts36common5panic13get_backtraceEi+0x2f)[0x7f39f558f93f]
ERR     Thu Feb 23 04&#58;09&#58;22 2017; Exception in
TransfersService&#58;getFiles
getReadyTransfers&#58; Caught exception getFilesNumPerActivity&#58; Caught
exception getActivityShareConf&#58; Caught exception bad lexical cast&#58;
source type value could not be interpreted as target
/usr/lib64/libfts_common.so.3(_ZN4fts36common5panic13get_backtraceEi+0x2f)[0x7f39f558f93f]
6
Stack trace&#58;
Caught signal&#58; 6
Stack trace&#58;
Caught signal&#58; 6
Stack trace&#58;
terminate called recursively
/usr/lib64/libfts_common.so.3(_ZN4fts36common5panic13get_backtraceEi+0x2f)[0x7f39f558f93f]
/usr/lib64/libfts_common.so.3(+0x3f9d1)[0x7f39f558f9d1]
/usr/lib64/libfts_common.so.3(_ZN4fts36common5panic13get_backtraceEi+0x2f)[0x7f39f558f93f]
/usr/lib64/libfts_common.so.3(+0x3f9d1)[0x7f39f558f9d1]
/usr/lib64/libfts_common.so.3(+0x3f9d1)[0x7f39f558f9d1]
/lib64/libpthread.so.0(+0xf710)[0x7f39f1e29710]
/usr/lib64/libfts_common.so.3(+0x3f9d1)[0x7f39f558f9d1]
/lib64/libpthread.so.0(+0xf710)[0x7f39f1e29710]
/lib64/libpthread.so.0(+0xf710)[0x7f39f1e29710]
/lib64/libc.so.6(gsignal+0x35)[0x7f39f0e91925]
/lib64/libpthread.so.0(+0xf710)[0x7f39f1e29710]
/lib64/libc.so.6(gsignal+0x35)[0x7f39f0e91925]
/lib64/libc.so.6(gsignal+0x35)[0x7f39f0e91925]
/lib64/libc.so.6(abort+0x175)[0x7f39f0e93105]
/lib64/libc.so.6(gsignal+0x35)[0x7f39f0e91925]
/lib64/libc.so.6(abort+0x175)[0x7f39f0e93105]
/lib64/libc.so.6(abort+0x175)[0x7f39f0e93105]
/usr/lib64/libstdc++.so.6(_ZN9__gnu_cxx27__verbose_terminate_handlerEv+0x41)[0x7f39f174b971]
/lib64/libc.so.6(abort+0x175)[0x7f39f0e93105]
/usr/lib64/libstdc++.so.6(_ZN9__gnu_cxx27__verbose_terminate_handlerEv+0x41)[0x7f39f174b971]
/usr/lib64/libstdc++.so.6(_ZN9__gnu_cxx27__verbose_terminate_handlerEv+0x41)[0x7f39f174b971]
/usr/lib64/libstdc++.so.6(+0xbcbe6)[0x7f39f1749be6]
/usr/lib64/libstdc++.so.6(_ZN9__gnu_cxx27__verbose_terminate_handlerEv+0x41)[0x7f39f174b971]
/usr/lib64/libstdc++.so.6(+0xbcbe6)[0x7f39f1749be6]
/usr/lib64/libstdc++.so.6(+0xbcbe6)[0x7f39f1749be6]
/usr/lib64/libstdc++.so.6(+0xbcc13)[0x7f39f1749c13]
/usr/lib64/libstdc++.so.6(+0xbcbe6)[0x7f39f1749be6]
/usr/lib64/libstdc++.so.6(+0xbcc13)[0x7f39f1749c13]
/usr/lib64/libstdc++.so.6(+0xbcc13)[0x7f39f1749c13]
/usr/lib64/libstdc++.so.6(__cxa_rethrow+0x46)[0x7f39f1749c96]
/usr/lib64/libstdc++.so.6(+0xbcc13)[0x7f39f1749c13]
/usr/lib64/libstdc++.so.6(__cxa_rethrow+0x46)[0x7f39f1749c96]
/usr/lib64/libstdc++.so.6(__cxa_rethrow+0x46)[0x7f39f1749c96]
/usr/lib64/libfts_server_lib.so.3(_ZN4fts36server16TransfersService8getFilesERKSt6vectorI7QueueIdSaIS3_EE+0xc84)[0x7f39f5c6bad4]
/usr/lib64/libstdc++.so.6(__cxa_rethrow+0x46)[0x7f39f1749c96]
/usr/lib64/libfts_server_lib.so.3(_ZN4fts36server16TransfersService8getFilesERKSt6vectorI7QueueIdSaIS3_EE+0xc84)[0x7f39f5c6bad4]
/usr/lib64/libfts_server_lib.so.3(_ZN4fts36server16TransfersService8getFilesERKSt6vectorI7QueueIdSaIS3_EE+0xc84)[0x7f39f5c6bad4]
/usr/lib64/libboost_thread-mt.so.1.48.0(+0xeb63)[0x7f39f473db63]
/usr/lib64/libfts_server_lib.so.3(_ZN4fts36server16TransfersService8getFilesERKSt6vectorI7QueueIdSaIS3_EE+0xc84)[0x7f39f5c6bad4]
/usr/lib64/libboost_thread-mt.so.1.48.0(+0xeb63)[0x7f39f473db63]
/usr/lib64/libboost_thread-mt.so.1.48.0(+0xeb63)[0x7f39f473db63]
/lib64/libpthread.so.0(+0x79d1)[0x7f39f1e219d1]
/usr/lib64/libboost_thread-mt.so.1.48.0(+0xeb63)[0x7f39f473db63]
/lib64/libpthread.so.0(+0x79d1)[0x7f39f1e219d1]
/lib64/libpthread.so.0(+0x79d1)[0x7f39f1e219d1]
/lib64/libc.so.6(clone+0x6d)[0x7f39f0f47b7d]
/lib64/libpthread.so.0(+0x79d1)[0x7f39f1e219d1]
/lib64/libc.so.6(clone+0x6d)[0x7f39f0f47b7d]
WARNING Thu Feb 23 04&#58;09&#58;22 2017; Caught signal 6 (Aborted)
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Future signals will be ignored!
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Request to stop the server
/lib64/libc.so.6(clone+0x6d)[0x7f39f0f47b7d]
/lib64/libc.so.6(clone+0x6d)[0x7f39f0f47b7d]
INFO    Thu Feb 23 04&#58;09&#58;22 2017; FTS server stopping
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Requested interruption of
MessageProcessingService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Requested interruption of
CancelerService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Exiting CancelerService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Requested interruption of
CleanerService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Exiting CleanerService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Requested interruption of HeartBeat
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Exiting MessageProcessingService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Exiting HeartBeat
CRIT    Thu Feb 23 04&#58;09&#58;22 2017; Stack trace&#58;
/usr/lib64/libfts_common.so.3(_ZN4fts36common5panic13get_backtraceEi+0x2f)
[0x7f39f558f93f]
/usr/lib64/libfts_common.so.3(+0x3f9d1) [0x7f39f558f9d1]
/lib64/libpthread.so.0(+0xf710) [0x7f39f1e29710]
/lib64/libc.so.6(gsignal+0x35) [0x7f39f0e91925]
/lib64/libc.so.6(abort+0x175) [0x7f39f0e93105]
/usr/lib64/libstdc++.so.6(_ZN9__gnu_cxx27__verbose_terminate_handlerEv+0x41)
[0x7f39f174b971]
/usr/lib64/libstdc++.so.6(+0xbcbe6) [0x7f39f1749be6]
/usr/lib64/libstdc++.so.6(+0xbcc13) [0x7f39f1749c13]
/usr/lib64/libstdc++.so.6(__cxa_rethrow+0x46) [0x7f39f1749c96]
/usr/lib64/libfts_server_lib.so.3(_ZN4fts36server16TransfersService8getFilesERKSt6vectorI7QueueIdSaIS3_EE+0xc84)
[0x7f39f5c6bad4]
/usr/lib64/libboost_thread-mt.so.1.48.0(+0xeb63) [0x7f39f473db63]
/lib64/libpthread.so.0(+0x79d1) [0x7f39f1e219d1]
/lib64/libc.so.6(clone+0x6d) [0x7f39f0f47b7d]

ERR     Thu Feb 23 04&#58;09&#58;22 2017; Exception in TransfersService!
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Thread interruption requested
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Exiting TransfersService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Requested interruption of
ReuseTransfersService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Exiting ReuseTransfersService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Requested interruption of
MultihopTransfersService
INFO    Thu Feb 23 04&#58;09&#58;22 2017; Exiting MultihopTransfersService
INFO    Thu Feb 23 04&#58;09&#58;26 2017; Requested interruption of
OptimizerService
INFO    Thu Feb 23 04&#58;09&#58;26 2017; Exiting OptimizerService
INFO    Thu Feb 23 04&#58;09&#58;29 2017; Requested interruption of WebService
INFO    Thu Feb 23 04&#58;09&#58;29 2017; Exiting WebService
INFO    Thu Feb 23 04&#58;09&#58;29 2017; Server stopped
INFO    Thu Feb 23 04&#58;09&#58;29 2017; Request to stop the server
Caught signal&#58; 6
Stack trace&#58;
INFO    Thu Feb 23 04&#58;10&#58;02 2017; Setting debug level to INFO
INFO    Thu Feb 23 04&#58;10&#58;02 2017; Starting server...
INFO    Thu Feb 23 04&#58;10&#58;02 2017; Starting CleanerService
INFO    Thu Feb 23 04&#58;10&#58;02 2017; Starting MessageProcessingService
INFO    Thu Feb 23 04&#58;10&#58;02 2017; Starting HeartBeat
INFO    Thu Feb 23 04&#58;10&#58;02 2017; Using heartbeat interval 60
INFO    Thu Feb 23 04&#58;10&#58;02 2017; Using heartbeat grace interval 120
INFO    Thu Feb 23 04&#58;10&#58;10 2017; Starting CancelerService
INFO    Thu Feb 23 04&#58;10&#58;22 2017; Starting OptimizerService
INFO    Thu Feb 23 04&#58;10&#58;22 2017; Starting ReuseTransfersService
INFO    Thu Feb 23 04&#58;10&#58;22 2017; Starting TransfersService
INFO    Thu Feb 23 04&#58;10&#58;22 2017; Starting MultihopTransfersService
INFO    Thu Feb 23 04&#58;10&#58;22 2017; Server started
INFO    Thu Feb 23 04&#58;10&#58;22 2017; Starting WebService
INFO    Thu Feb 23 04&#58;10&#58;22 2017; Soap service 29 IP&#58;192.12.15.65
Port&#58;8443
ERR     Thu Feb 23 04&#58;10&#58;27 2017; Exception in
TransfersService&#58;getFiles
getReadyTransfers&#58; Caught exception getFilesNumPerActivity&#58; Caught
exception getActivityShareConf&#58; Caught exception bad lexical cast&#58;
source type value could not be interpreted as target
terminate called after throwing an instance of
&#39;fts3&#58;&#58;common&#58;&#58;UserError&#39;
what()&#58;  getReadyTransfers&#58; Caught exception
getFilesNumPerActivity&#58;
Caught exception getActivityShareConf&#58; Caught exception bad lexical
cast&#58; source type value could not be interpreted as target
/usr/lib64/libfts_common.so.3(_ZN4fts36common5panic13get_backtraceEi+0x2f)[0x7fc8b64bf93f]
/usr/lib64/libfts_common.so.3(+0x3f9d1)[0x7fc8b64bf9d1]
/lib64/libpthread.so.0(+0xf710)[0x7fc8b2d59710]
/lib64/libc.so.6(gsignal+0x35)[0x7fc8b1dc1925]
/lib64/libc.so.6(abort+0x175)[0x7fc8b1dc3105]
/usr/lib64/libstdc++.so.6(_ZN9__gnu_cxx27__verbose_terminate_handlerEv+0x12d)[0x7fc8b267ba5d]
/usr/lib64/libstdc++.so.6(+0xbcbe6)[0x7fc8b2679be6]
/usr/lib64/libstdc++.so.6(+0xbcc13)[0x7fc8b2679c13]
/usr/lib64/libstdc++.so.6(__cxa_rethrow+0x46)[0x7fc8b2679c96]
/usr/lib64/libfts_server_lib.so.3(_ZN4fts36server16TransfersService8getFilesERKSt6vectorI7QueueIdSaIS3_EE+0xc84)[0x7fc8b6b9bad4]
/usr/lib64/libboost_thread-mt.so.1.48.0(+0xeb63)[0x7fc8b566db63]
/lib64/libpthread.so.0(+0x79d1)[0x7fc8b2d519d1]
/lib64/libc.so.6(clone+0x6d)[0x7fc8b1e77b7d]
ERR     Thu Feb 23 04&#58;10&#58;27 2017; Exception in
TransfersService&#58;getFiles
getReadyTransfers&#58; Caught exception getFilesNumPerActivity&#58; Caught
exception getActivityShareConf&#58; Caught exception bad lexical cast&#58;
source type value could not be interpreted as target
Caught signal&#58; 6
Stack trace&#58;
terminate called recursively
WARNING Thu Feb 23 04&#58;10&#58;27 2017; Caught signal 6 (Aborted)
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Future signals will be ignored!
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Request to stop the server
INFO    Thu Feb 23 04&#58;10&#58;27 2017; FTS server stopping
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Requested interruption of
CancelerService
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Requested interruption of
MessageProcessingService
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Exiting CancelerService
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Requested interruption of
CleanerService
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Exiting MessageProcessingService
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Exiting CleanerService
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Requested interruption of HeartBeat
ERR     Thu Feb 23 04&#58;10&#58;27 2017; Exception in
TransfersService&#58;getFiles
getReadyTransfers&#58; Caught exception getFilesNumPerActivity&#58; Caught
exception getActivityShareConf&#58; Caught exception bad lexical cast&#58;
source type value could not be interpreted as target
INFO    Thu Feb 23 04&#58;10&#58;27 2017; Exiting HeartBeat
terminate called recursively
ERR     Thu Feb 23 04&#58;10&#58;27 2017; Exception in TransfersService!
CRIT    Thu Feb 23 04&#58;10&#58;27 2017; Stack trace&#58;
/usr/lib64/libfts_common.so.3(_ZN4fts36common5panic13get_backtraceEi+0x2f)
[0x7fc8b64bf93f]
/usr/lib64/libfts_common.so.3(+0x3f9d1) [0x7fc8b64bf9d1]
/lib64/libpthread.so.0(+0xf710) [0x7fc8b2d59710]
/lib64/libc.so.6(gsignal+0x35) [0x7fc8b1dc1925]
/lib64/libc.so.6(abort+0x175) [0x7fc8b1dc3105]
/usr/lib64/libstdc++.so.6(_ZN9__gnu_cxx27__verbose_terminate_handlerEv+0x12d)
[0x7fc8b267ba5d]
/usr/lib64/libstdc++.so.6(+0xbcbe6) [0x7fc8b2679be6]
/usr/lib64/libstdc++.so.6(+0xbcc13) [0x7fc8b2679c13]
/usr/lib64/libstdc++.so.6(__cxa_rethrow+0x46) [0x7fc8b2679c96]
/usr/lib64/libfts_server_lib.so.3(_ZN4fts36server16TransfersService8getFilesERKSt6vectorI7QueueIdSaIS3_EE+0xc84)
[0x7fc8b6b9bad4]
/usr/lib64/libboost_thread-mt.so.1.48.0(+0xeb63) [0x7fc8b566db63]
/lib64/libpthread.so.0(+0x79d1) [0x7fc8b2d519d1]
/lib64/libc.so.6(clone+0x6d) [0x7fc8b1e77b7d]
....

Hiro

On 02/23/2017 04&#58;08 AM, The RT System itself via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    *Ticket URL&#58;*</font>
<a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=27023' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=27023</a>
<font color='#7F7E6F'>&#62;    *Requestors&#58;*  tx+rtbnlprod_fp71@....</font>
<font color='#7F7E6F'>&#62;           *Ccs&#58;*  (None)</font>
<font color='#7F7E6F'>&#62;         *Queue&#58;*  StorageManagement</font>
<font color='#7F7E6F'>&#62;         *Owner&#58;*  Hironori Ito</font>
<font color='#7F7E6F'>&#62;        *Status&#58;*  /new/</font>
<font color='#7F7E6F'>&#62;      *Priority&#58;*  /Urgent/</font>
<font color='#7F7E6F'>&#62;   *Transaction&#58;*  Given to hiroito by RT_System</font>
<font color='#7F7E6F'>&#62;       *Subject&#58;*  BNL FTS server in trouble again</font>
<font color='#7F7E6F'>&#62;               *GGUS Ticket&#58;*  126749</font>
<font color='#7F7E6F'>&#62;            *OSG GOC Ticket&#58;*  32741</font>
<font color='#7F7E6F'>&#62;          *GGUS Ticket Type&#58;*  ALARM</font>
<font color='#7F7E6F'>&#62;       *Resource Group Name&#58;*  BNL-ATLAS</font>
<font color='#7F7E6F'>&#62;                   *VO Name&#58;*  ATLAS</font>
<font color='#7F7E6F'>&#62;         *GGUS Problem Type&#58;*  File Transfer</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
------------------------------------------------------------------------
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; You [/Hironori Ito/] have been assigned ownership of ticket *#27023*</font>
<font color='#7F7E6F'>&#62; by /The RT System itself/.</font>

-- by hiroito at Thu Feb 23 09&#58;26&#58;36 UTC 2017

GOCTX Source&#58; BNL Ticket&#58; Queue=StorageManagement ID=27023
</div><script type='text/javascript'>
        $('#show_737849506').click(function() {
            $('#detail_737849506').slideDown("normal");
            $('#show_737849506').hide();
            $('#hide_737849506').show();
        });
        $('#hide_737849506').click(function() {
            $('#detail_737849506').slideUp();
            $('#hide_737849506').hide();
            $('#show_737849506').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32741#1487840923'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T09:08:43+00:00">Feb 23, 2017 09:08 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487840923">&nbsp;</a></div><pre>For some reason, Rucio/FTS seems to be using primary only one of three
FTS agent host. fts302.usatlas.bnl.gov.   This results in increase of
log on this host only at alarming rate.  100GB of bring online log per
day is not really useful since it is too big to be used for search.
Is it due to FTS for some reason?  Or, is it because Rucio does this
due
to DNS round robin being cached in the rucio server host. I am not
sure.  But, it can&#39;t work with condition.   Also, I don&#39;t understand
why
the entire FTS is grind to halt while other two agent services (fts03
and fts301) are perfectly running fine.  I need the explanation from
FTS
devs and/or rucio devs.      Anyway, the service is restored.

Hiro

On 02/23/2017 03&#58;40 AM, OSG GOC TX via RT wrote&#58;
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;    *Ticket URL&#58;*</font>
<a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=27023' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=27023</a>
<font color='#7F7E6F'>&#62;    *Requestors&#58;*  tx+rtbnlprod_fp71@....</font>
<font color='#7F7E6F'>&#62;           *Ccs&#58;*  (None)</font>
<font color='#7F7E6F'>&#62;         *Queue&#58;*  StorageManagement</font>
<font color='#7F7E6F'>&#62;         *Owner&#58;*  Nobody in particular</font>
<font color='#7F7E6F'>&#62;        *Status&#58;*  /new/</font>
<font color='#7F7E6F'>&#62;      *Priority&#58;*  /Urgent/</font>
<font color='#7F7E6F'>&#62;   *Transaction&#58;*  Correspondence added by osg-goc-rest</font>
<font color='#7F7E6F'>&#62;       *Subject&#58;*  BNL FTS server in trouble again</font>
<font color='#7F7E6F'>&#62;               *GGUS Ticket&#58;*  126749</font>
&#60;<a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=126749&#62' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=126749&#62</a>;
<font color='#7F7E6F'>&#62;            *OSG GOC Ticket&#58;*  32741</font>
&#60;<a href='32741' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=32741&#62</a>;
<font color='#7F7E6F'>&#62;          *GGUS Ticket Type&#58;*  ALARM</font>
<font color='#7F7E6F'>&#62;       *Resource Group Name&#58;*  BNL-ATLAS</font>
<font color='#7F7E6F'>&#62;                   *VO Name&#58;*  ATLAS</font>
<div id='show_64440873' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_64440873'><font color='#7F7E6F'>&#62;         *GGUS Problem Type&#58;*  File Transfer</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
------------------------------------------------------------------------
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Called John Hover, Xin and Hiro. No answers, left messages. Will try</font>
<font color='#7F7E6F'>&#62; again around 07&#58;00.</font>
<font color='#7F7E6F'>&#62;   -- by Scott Teige at Thu Feb 23 08&#58;39&#58;04 UTC 2017</font>

-- by hiroito at Thu Feb 23 09&#58;08&#58;27 UTC 2017

GOCTX Source&#58; BNL Ticket&#58; Queue=StorageManagement ID=27023
</div><script type='text/javascript'>
        $('#show_64440873').click(function() {
            $('#detail_64440873').slideDown("normal");
            $('#show_64440873').hide();
            $('#hide_64440873').show();
        });
        $('#hide_64440873').click(function() {
            $('#detail_64440873').slideUp();
            $('#hide_64440873').hide();
            $('#show_64440873').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32741#1487839144'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T08:39:04+00:00">Feb 23, 2017 08:39 AM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1487839144">&nbsp;</a></div><pre>Called John Hover, Xin and Hiro. No answers, left messages. Will try again around 07&#58;00.</pre></div><div class='update_description'><i onclick="document.location='32741#1487838574'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T08:29:34+00:00">Feb 23, 2017 08:29 AM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1487838574">&nbsp;</a></div><pre>Acknowledge receipt. It is 03&#58;28 USEastern time, I will attempt contact but am not optimistic on success.</pre></div><div class='update_description'><i onclick="document.location='32741#1487838276'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-23T08:24:36+00:00">Feb 23, 2017 08:24 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1487838276">&nbsp;</a></div><pre>Dear BNL,

it seems that we have no transfers from BNL FTS starting from yeasterday at 18&#58;00 [1]. This alarm ticket is related to the previous one&#58; <a href='https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=126727' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=ticket_info&ticket_id=126727</a>
which was supposed to be almost resolved since we have already seen transfers after that issue.

[1] <a href='https&#58;//fts.usatlas.bnl.gov&#58;8449/fts3/ftsmon/#/?vo=&source_se=srm&#58' target='_blank' rel='nofollow'>https&#58;//fts.usatlas.bnl.gov&#58;8449/fts3/ftsmon/#/?vo=&source_se=srm&#58</a>;%2F%2Fdcsrm.usatlas.bnl.gov&dest_se=b&time_window=12

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=126749</a>

[Ticket History]
Subject&#58; BNL FTS server in trouble again
Ticket Type&#58; ALARM
CC&#58;
-- by tomas.javurek at Thu Feb 23 08&#58;23&#58;30 UTC 2017</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F32741">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 32741});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
