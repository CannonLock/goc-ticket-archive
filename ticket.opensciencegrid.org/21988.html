<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[21988] SAM Condor-based tests missing payload</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=21988" method="post">
<div class="page-header">
    <h3><span class="muted">21988</span> / SAM Condor-based tests missing payload</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Marian </div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GGUS</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Marian  Babik</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2014-08-18</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=107448">107448</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/21988", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21988?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/21988?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20SAM%20Condor-based%20tests%20missing%20payload%20ISSUE%3D21988%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='21988#1409356819'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-30T00:00:19+00:00">Aug 30, 2014 12:00 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1409356819">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.

-- by SYSTEM at Fri Aug 29 23&#58;59&#58;12 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a></pre></div><div class='update_description'><i onclick="document.location='21988#1408346507'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-18T07:21:47+00:00">Aug 18, 2014 07:21 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1408346507">&nbsp;</a></div><pre>Hi Andrew,
AFAICT it seems your site is the only one in OSG that doesn&#39;t change to scratch directory before the job is executed on the worker node - it&#39;s like if you&#39;re trying to have two scratch directories, one in /tmp and another one in $HOME/gram_scratch... - in other words, you&#39;re expecting that every CMS job that comes to your site checks SCRATCH_DIRECTORY environment variable and goes there to retrieve its input files).

Marian

-- by Marian  Babik at Mon Aug 18 07&#58;20&#58;45 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a></pre></div><div class='update_description'><i onclick="document.location='21988#1408119960'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-15T16:26:00+00:00">Aug 15, 2014 04:26 PM UTC</time><a class="anchor" name="1408119960">&nbsp;</a></div><pre>Hi Marian,

Just for my edification, is there something on our end that exacerbated the problem?

Cheers,
Andrew

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=meloam/CN=692113/CN=Andrew Malone Melo</pre></div><div class='update_description'><i onclick="document.location='21988#1408095351'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-15T09:35:51+00:00">Aug 15, 2014 09:35 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1408095351">&nbsp;</a></div><pre>In the meantime, I managed to find out what the issue was, the current directory for the job was at /tmp/333363.vmpsched, but the input files were stored at /home/uscms010//gram_scratch_GP3iar/gridjob.tgz, our script wasn&#39;t smart enough to find them, so the issue was on our side, though this seems to be quite rare setup in OSG. I have fixed the script and everything works fine now.

Thanks again for your help,
Marian

-- by Marian  Babik at Fri Aug 15 09&#58;35&#58;08 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a></pre></div><div class='update_description'><i onclick="document.location='21988#1408039285'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-14T18:01:25+00:00">Aug 14, 2014 06:01 PM UTC</time> by <b>echism</b><a class="anchor" name="1408039285">&nbsp;</a></div><pre>Hey Tony,

Did you find anything? The attachment is indeed here at <a href='https&#58;//ticket.grid.iu.edu/21988' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/21988</a>

Thank you</pre></div><div class='update_description'><i onclick="document.location='21988#1408026579'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-14T14:29:39+00:00">Aug 14, 2014 02:29 PM UTC</time><a class="anchor" name="1408026579">&nbsp;</a></div><pre>OK, that would make sense.  If you can come up with any evidence that points to a specific problem at Vanderbilt please update this ticket with that information.  Thanks...

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=klb/CN=670967/CN=Kevin Buterbaugh</pre></div><div class='update_description'><i onclick="document.location='21988#1408006332'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-14T08:52:12+00:00">Aug 14, 2014 08:52 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1408006332">&nbsp;</a></div><pre>Kevin, I think this is because that directory gets deleted after the job is done.

-- by Marian  Babik at Thu Aug 14 08&#58;51&#58;55 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a></pre></div><div class='update_description'><i onclick="document.location='21988#1407942778'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-13T15:12:58+00:00">Aug 13, 2014 03:12 PM UTC</time><a class="anchor" name="1407942778">&nbsp;</a></div><pre>Just FYI in case this helps, but for the one example you gave there is no /tmp/302031.vmpsched on worker node vmp1119...

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=klb/CN=670967/CN=Kevin Buterbaugh</pre></div><div class='update_description'><i onclick="document.location='21988#1407942230'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-13T15:03:50+00:00">Aug 13, 2014 03:03 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1407942230">&nbsp;</a></div><pre>Thanks, actually, JDL is attached to this ticket, but I&#39;m not sure if that propagates to GOC, it&#39;s quite short&#58;
universe = grid
executable = nagrun.sh
arguments = &#34; -v cms -f /cms/Role=lcgadmin -d /queue/grid.probe.metricOutput.EGEE.sam-cms-dev_cern_ch -b &#39;stomp&#58;//oldsam.msg.cern.ch&#58;6163/&#39; -c ce1.accre.vanderbilt.edu&#58;2119/jobmanager-pbs-all -t 600 -w 1&#34;
transfer_executable = true

output  = /var/lib/gridprobes/cms.Role=lcgadmin/org.sam/CONDORJS/ce1.accre.vanderbilt.edu/jobOutput/gridjob.out
error   = /var/lib/gridprobes/cms.Role=lcgadmin/org.sam/CONDORJS/ce1.accre.vanderbilt.edu/jobOutput/gridjob.err
log     = /var/lib/gridprobes/cms.Role=lcgadmin/org.sam/CONDORJS/ce1.accre.vanderbilt.edu/jobOutput/gridjob.log
log_xml = true

#&#60;jdlInputSandboxExecutable&#62;
transfer_input_files = /var/lib/gridprobes/cms.Role=lcgadmin/org.sam/CONDORJS/ce1.accre.vanderbilt.edu/gridjob.tgz,/var/lib/gridprobes/cms.Role=lcgadmin/org.sam/CONDORJS/ce1.accre.vanderbilt.edu/wnlogs.tgz
transfer_output_files = wnlogs.tgz
transfer_output_remaps = &#34;wnlogs.tgz=/var/lib/gridprobes/cms.Role=lcgadmin/org.sam/CONDORJS/ce1.accre.vanderbilt.edu/jobOutput/wnlogs.tgz&#34;

should_transfer_files = YES
when_to_transfer_output = ON_EXIT
leave_in_queue = (JobStatus != 5)
use_x509userproxy = true

globus_rsl=(jobtype=single)(queue=all)

grid_resource = gt5 ce1.accre.vanderbilt.edu&#58;2119/jobmanager-pbs
queue

-- by Marian  Babik at Wed Aug 13 15&#58;03&#58;38 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a></pre></div><div class='update_description'><i onclick="document.location='21988#1407941853'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-13T14:57:33+00:00">Aug 13, 2014 02:57 PM UTC</time> by <b>Anthony Tiradani</b><a class="anchor" name="1407941853">&nbsp;</a></div><pre>Hi Marian,

Can you send a sample JDL?  I can poke around a bit and see what I find.

Thanks,

Anthony Tiradani</pre></div><div class='update_description'><i onclick="document.location='21988#1407941576'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-13T14:52:56+00:00">Aug 13, 2014 02:52 PM UTC</time><a class="anchor" name="1407941576">&nbsp;</a></div><pre>I don&#39;t know your application so I can&#39;t help here...

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=klb/CN=670967/CN=Kevin Buterbaugh</pre></div><div class='update_description'><i onclick="document.location='21988#1407941328'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-13T14:48:48+00:00">Aug 13, 2014 02:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1407941328">&nbsp;</a></div><pre>I would expect that my input files would appear there - they&#39;re listed in JDL for each job submission (in particular gridjob.tgz). I&#39;m using the same script to test all OSG sites, input files are missing only on Vanderbilt, Univ. of Colorado and Baylor - the script was written about 4 years ago, so it could be that we&#39;re missing something.

Thanks,
Marian

-- by Marian  Babik at Wed Aug 13 14&#58;48&#58;26 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a></pre></div><div class='update_description'><i onclick="document.location='21988#1407940476'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-13T14:34:36+00:00">Aug 13, 2014 02:34 PM UTC</time><a class="anchor" name="1407940476">&nbsp;</a></div><pre>OK, and what are you expecting to already exist in a directory that gets uniquely created for each job submission???

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=klb/CN=670967/CN=Kevin Buterbaugh</pre></div><div class='update_description'><i onclick="document.location='21988#1407939645'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-13T14:20:45+00:00">Aug 13, 2014 02:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1407939645">&nbsp;</a></div><pre>Current directory (the one I get by running JWD=$(pwd)), I don&#39;t change directories in my script at any point beforehand, i.e. for the latest test that was&#58;
/tmp/302031.vmpsched

total 280
drwxr-x---  3 uscms010 cms_samtest   4096 Aug 13 08&#58;43 .
drwxrwxrwt 44 root     root        274432 Aug 13 08&#58;43 ..
drwx------  2 uscms010 cms_samtest   4096 Aug 13 08&#58;43 nagios
-rw-------  1 uscms010 cms_samtest      0 Aug 13 08&#58;43 wnlogs.tgz
.
./nagios
./wnlogs.tgz

=== [Wed Aug 13 08&#58;43&#58;49 CDT 2014] ===
=== Running on ===
=== Site&#58;
=== CE&#58; ce1.accre.vanderbilt.edu&#58;2119/jobmanager-pbs-all
=== WN&#58; vmp1119
=== WN arch&#58; x86_64

-- by Marian  Babik at Wed Aug 13 14&#58;19&#58;52 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a></pre></div><div class='update_description'><i onclick="document.location='21988#1407938527'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-13T14:02:07+00:00">Aug 13, 2014 02:02 PM UTC</time><a class="anchor" name="1407938527">&nbsp;</a></div><pre>What directory are you ls&#39;ing?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=klb/CN=670967/CN=Kevin Buterbaugh</pre></div><div class='update_description'><i onclick="document.location='21988#1407740160'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-11T06:56:00+00:00">Aug 11, 2014 06:56 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1407740160">&nbsp;</a></div><pre>Hi,
thanks for changes, but no, it&#39;s still the same here.

Just for reference, some more information on this ticket that I provided offline&#58;

We&#39;re able to submit jobs just fine to both CEs (and even retrieve the output) - it&#39;s just that on the worker nodes, we don&#39;t have our input files so we&#39;re unable to execute our worker node tests. When I run ls -la and find . on your worker node, this is what I get for example&#58;
total 472
drwxr-x---  3 uscms010 cms_samtest   4096 Aug  6 01&#58;13 .
drwxrwxrwt 45 root     root        471040 Aug  6 01&#58;13 ..
drwx------  2 uscms010 cms_samtest   4096 Aug  6 01&#58;13 nagios
-rw-------  1 uscms010 cms_samtest      0 Aug  6 01&#58;13 wnlogs.tgz
.
./nagios
./wnlogs.tgz

wnlogs.tgz is created by the script, but there should be also gridjob.tgz, which is missing. In case, I can help you out by running something on the worker node to test, let me know. On our host (sam-cms-preprod.cern.ch), I&#39;m running Condor 8.2.1 and Grid Manager with full debug, but there is no error reported. I discussed this case with Brian Bockelman from OSG, he suggested this might be due to a firewall issue with globus tcp port range on your side (but then I guess it should never succeed, not even once).

Marian

-- by Marian  Babik at Mon Aug 11 06&#58;55&#58;04 UTC 2014

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a></pre></div><div class='update_description'><i onclick="document.location='21988#1407440745'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-07T19:45:45+00:00">Aug 7, 2014 07:45 PM UTC</time> by <b>echism</b><a class="anchor" name="1407440745">&nbsp;</a></div><pre>Marian,

Has this cleared?

Thank you,</pre></div><div class='update_description'><i onclick="document.location='21988#1407335865'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-06T14:37:45+00:00">Aug 6, 2014 02:37 PM UTC</time><a class="anchor" name="1407335865">&nbsp;</a></div><pre>We fixed some stuff yesterday - is this better today?

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=klb/CN=670967/CN=Kevin Buterbaugh</pre></div><div class='update_description'><i onclick="document.location='21988#1407269123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-05T20:05:23+00:00">Aug 5, 2014 08:05 PM UTC</time> by <b>echism</b><a class="anchor" name="1407269123">&nbsp;</a></div><pre>Removing John from this ticket.</pre></div><div class='update_description'><i onclick="document.location='21988#1407136448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T07:14:08+00:00">Aug 4, 2014 07:14 AM UTC</time> by <b>john.mora@....</b><a class="anchor" name="1407136448">&nbsp;</a></div><pre>The recipient email address is no longer a valid email address in the Vanderbilt directory. If you were emailing Mora, John for business purposes, please contact their department for more information. For departmental contact information, please see&#58; <a href='https&#58;//phonedirectory.vanderbilt.edu' target='_blank' rel='nofollow'>https&#58;//phonedirectory.vanderbilt.edu</a></pre></div><div class='update_description'><i onclick="document.location='21988#1407136201'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2014-08-04T07:10:01+00:00">Aug 4, 2014 07:10 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1407136201">&nbsp;</a></div><pre>Hi,
while doing the pre-production testing of the Condor-based submission for WLCG Service Availability Monitoring (SAM), we have an issue with missing payload on your site. Attached is the JDL, what we observe is that none of the input files are present on your worker nodes. This affects both ce1.accre.vanderbilt.edu and ce2.accre.vanderbilt.edu and all roles (pilot, production, lcgadmin), jobs are submitted with Andrea Sciaba&#39;s DN (as is the case for all CMS SAM tests).

The same JDL and submission mechanism works fine for many other OSG sites, therefore we suspect this might be an issue on site - possibly a firewall issue. Could you please check that the relevant ports (especially globus port ranges) are open for our two submission hosts&#58; sam-cms-preprod.cern.ch and sam-cms-prod.cern.ch ?

Thanks,
Marian
Affected Site&#58; Vanderbilt

[Ticket Origin]
<a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=107448</a>

[Ticket History]
Subject&#58; SAM Condor-based tests missing payload
Ticket Type&#58; USER
CC&#58;
-- by Marian  Babik at Mon Aug 04 07&#58;08&#58;58 UTC 2014

Added attachment gridJob.jdl
<a href='https&#58;//ggus.eu/index.php?mode=download&attid=ATT104643' target='_blank' rel='nofollow'>https&#58;//ggus.eu/index.php?mode=download&attid=ATT104643</a>

-- by Marian  Babik at Mon Aug 04 07&#58;08&#58;59 UTC 2014</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F21988">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 21988});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
