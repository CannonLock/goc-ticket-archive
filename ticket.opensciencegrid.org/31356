<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[31356] RSV problems at OU_OSCER_ATLAS after changing uid of condor user</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=31356" method="post">
<div class="page-header">
    <h3><span class="muted">31356</span> / RSV problems at OU_OSCER_ATLAS after changing uid of condor user</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Waiting for Mat to take a look</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-10-10</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Scott Teige <span class="muted"> / OSG Operations Infrastructure</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Matyas Selmeci <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/31356", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31356?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/31356?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20RSV%20problems%20at%20OU_OSCER_ATLAS%20after%20changing%20uid%20of%20condor%20user%20ISSUE%3D31356%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='31356#1477331694'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-24T17:54:54+00:00">Oct 24, 2016 05:54 PM UTC</time> by <b>Tim Theisen</b><a class="anchor" name="1477331694">&nbsp;</a></div><pre>With no updates in 3 weeks, we will close this ticket. The problem has not recurred. If the problem recurs, we can open another ticket.</pre></div><div class='update_description'><i onclick="document.location='31356#1475865850'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-07T18:44:10+00:00">Oct 7, 2016 06:44 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1475865850">&nbsp;</a></div><pre>Well, someone needs to sit starter and schedd down together and have them
agree on what error is happening! ;)

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='31356#1475865402'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-07T18:36:42+00:00">Oct 7, 2016 06:36 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1475865402">&nbsp;</a></div><pre>Maybe, though it looks like the CE was throwing the errors, not condor-cron. Also, interestingly enough, the only error reported in the StarterLog was that the starter exited with code 100, which disagrees with what the schedd thought the starter exited with.

Anyway, it&#39;s good to hear that the problem is still fixed. We can do a more thorough investigation if something like this pops up again.

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='31356#1475864950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-07T18:29:10+00:00">Oct 7, 2016 06:29 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1475864950">&nbsp;</a></div><pre>Thanks Mat and Edgar!

So this problem fixed itself, and we&#39;re thinking the original problem
was most likely caused by the fact that we had moved the htcondor-ce-spool
directory to a non-local file system (first NFS and then Lustre).

Does that make sense? I.e., is it possible that condor-cron does some
su&#39;ing which may only work on a local file system?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='31356#1475863281'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-07T18:01:21+00:00">Oct 7, 2016 06:01 PM UTC</time><a class="anchor" name="1475863281">&nbsp;</a></div><pre>HI Mat,

Can you take a look again at the logs Horst uploaded?

Edgar

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='31356#1475304014'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-01T06:40:14+00:00">Oct 1, 2016 06:40 AM UTC</time><a class="anchor" name="1475304014">&nbsp;</a></div><pre>Sorry, I meant StarterLogs.

Oh, I guess only condor has a StartLog, but not condor-ce or condor-cron ...

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='31356#1475303879'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-10-01T06:37:59+00:00">Oct 1, 2016 06:37 AM UTC</time><a class="anchor" name="1475303879">&nbsp;</a></div><pre>Hi Mat,

okay, I&#39;ve attached both the ce and cron StartLogs -- gzipped and renamed with .txt again, like the SchedLogs.

The ticket pages load fine from the Geneva airport here, not sure why they wouldn&#39;t load from our OU apartment in France ...

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='31356#1475271583'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-30T21:39:43+00:00">Sep 30, 2016 09:39 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1475271583">&nbsp;</a></div><pre>Just so we can get a little more info on the cause, can you send me the StarterLog as well?
Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='31356#1475263631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-30T19:27:11+00:00">Sep 30, 2016 07:27 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1475263631">&nbsp;</a></div><pre>Sounds good, thanks!

Horst</pre></div><div class='update_description'><i onclick="document.location='31356#1475262470'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-30T19:07:50+00:00">Sep 30, 2016 07:07 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1475262470">&nbsp;</a></div><pre>It&#39;s possible. Let&#39;s leave this ticket open and check back in a week to see if things are still working.
-Mat</pre></div><div class='update_description'><i onclick="document.location='31356#1475261110'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-30T18:45:10+00:00">Sep 30, 2016 06:45 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1475261110">&nbsp;</a></div><pre>Hi Mat,

okay, I did that, and I didn&#39;t get any output back. But there are now
cndrcron processes running&#58;

----
[hs@grid1 ~]$ sudo su condor
[sudo] password for hs&#58;
bash-4.2$ env CONDOR_CONFIG=/etc/condor-ce/condor_config /usr/sbin/condor_starter
bash-4.2$ ps auxw | grep condor

[...]

cndrcron 3654851  0.0  0.0 110744  6504 ?        Ss   13&#58;29   0&#58;00 condor_starter -f -job-cluster 12254 -job-proc 0 -header (12254.0)  -job-input-ad - -schedd-addr &#60;127.0.0.1&#58;64136&#62;
cndrcron 3663821  0.0  0.0 110744  6504 ?        Ss   13&#58;33   0&#58;00 condor_starter -f -job-cluster 12263 -job-proc 0 -header (12263.0)  -job-input-ad - -schedd-addr &#60;127.0.0.1&#58;64136&#62;
root     3664275  0.0  0.0 216852  2932 pts/0    S    13&#58;33   0&#58;00 sudo su condor
root     3664486  0.1  0.0 209016  2504 pts/0    S    13&#58;33   0&#58;00 su condor
condor   3664490  0.0  0.0 127836  1956 pts/0    S    13&#58;33   0&#58;00 bash
cndrcron 3665163  0.6  0.0 110744  6496 ?        Ss   13&#58;34   0&#58;00 condor_starter -f -job-cluster 12264 -job-proc 0 -header (12264.0)  -job-input-ad - -schedd-addr &#60;127.0.0.1&#58;64136&#62;
condor   3665204  0.0  0.0 149788  1724 pts/0    R+   13&#58;34   0&#58;00 ps auxw
condor   3665205  0.0  0.0 112652   936 pts/0    S+   13&#58;34   0&#58;00 grep condor
----

Then again, there were cndrcron processes running before, so maybe the timing
was just accidental?

Wait -- this problem seems to have fixed itself somehow, since RSV
is all green again now!

<a href='https&#58;//grid1.oscer.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/</a>

<a href='http&#58;//myosg.grid.iu.edu/rgstatushistory/index?downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=09%2F30%2F2016&end_type=now&end_date=09%2F30%2F2016&site=on&rg=on&rg_sel%5B%5D=89&gridtype=on&gridtype_1=on&active=on&active_value=1&disable_value=1' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgstatushistory/index?downtime_attrs_showpast=&account_type=cumulative_hours&ce_account_type=gip_vo&se_account_type=vo_transfer_volume&bdiitree_type=total_jobs&bdii_object=service&bdii_server=is-osg&start_type=7daysago&start_date=09%2F30%2F2016&end_type=now&end_date=09%2F30%2F2016&site=on&rg=on&rg_sel%5B%5D=89&gridtype=on&gridtype_1=on&active=on&active_value=1&disable_value=1</a>

The only thing we changed yesterday is that we moved the htcondor-ce-spool
directory back from the Lustre file system to the local disk on grid1.
<div id='show_767203853' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_767203853'>Maybe RSV -- or condor-cron -- can&#39;t deal with a non-local htcondor-ce-spool
directory?

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_767203853').click(function() {
            $('#detail_767203853').slideDown("normal");
            $('#show_767203853').hide();
            $('#hide_767203853').show();
        });
        $('#hide_767203853').click(function() {
            $('#detail_767203853').slideUp();
            $('#hide_767203853').hide();
            $('#show_767203853').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='31356#1475259644'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-30T18:20:44+00:00">Sep 30, 2016 06:20 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1475259644">&nbsp;</a></div><pre>Try running it as the condor user.
-Mat</pre></div><div class='update_description'><i onclick="document.location='31356#1475252491'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-30T16:21:31+00:00">Sep 30, 2016 04:21 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1475252491">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; ERROR&#58; Local Starter exited with unknown value 1!</font>

That&#39;s a new one. Can you try running
env CONDOR_CONFIG=/etc/condor-ce/condor_config /usr/sbin/condor_starter
on your CE and seeing what happens?

Also, can you post the osg-system-profiler output for your CE?

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='31356#1475134551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-29T07:35:51+00:00">Sep 29, 2016 07:35 AM UTC</time><a class="anchor" name="1475134551">&nbsp;</a></div><pre>Hi Mat,

okay, I attached both /var/log/condor-ce/SchedLog and /var/log/condor-cron/SchedLog. The former has lots of errors, but I don&#39;t understand them. Hopefully you do. &#58;)

I had to gzip the files and then add a .txt extension in order for the ticket system to allow attaching them. So you&#39;ll have to remove the .txt again and then gunzip them.

Thanks,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='31356#1475097173'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-28T21:12:53+00:00">Sep 28, 2016 09:12 PM UTC</time> by <b>Matyas Selmeci</b><a class="anchor" name="1475097173">&nbsp;</a></div><pre>Hi Horst,

Can you attach the schedd log for your CE? Perhaps there are clues in there. (/var/log/condor-ce/SchedLog)

Thanks,
-Mat</pre></div><div class='update_description'><i onclick="document.location='31356#1475024502'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-28T01:01:42+00:00">Sep 28, 2016 01:01 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1475024502">&nbsp;</a></div><pre>Mat, would you mind taking a look at this?</pre></div><div class='update_description'><i onclick="document.location='31356#1474987690'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-27T14:48:10+00:00">Sep 27, 2016 02:48 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1474987690">&nbsp;</a></div><pre>Thanks Scott!

Horst</pre></div><div class='update_description'><i onclick="document.location='31356#1474986717'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-27T14:31:57+00:00">Sep 27, 2016 02:31 PM UTC</time> by <b>Scott Teige</b><a class="anchor" name="1474986717">&nbsp;</a></div><pre>I think I fixed the spelling ,never tried that before.
Also assigning software to have a look at this, assigning myself to keep track of this.
Scott</pre></div><div class='update_description'><i onclick="document.location='31356#1474970389'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-27T09:59:49+00:00">Sep 27, 2016 09:59 AM UTC</time><a class="anchor" name="1474970389">&nbsp;</a></div><pre>Thanks for creating this ticket so early in the morning! &#58;)

Oh, I just realized that I misspelled the site name in the subject, ugh. If you can fix the ticket subject to OU_OSCER_ATLAS, that would be great -- but if it&#39;s difficult, I guess it&#39;s not the end of the world.

Thanks a lot,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='31356#1474969209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-27T09:40:09+00:00">Sep 27, 2016 09:40 AM UTC</time> by <b>Matt Petrey</b><a class="anchor" name="1474969209">&nbsp;</a></div><pre>From&#58; Horst Severini &#60;hs@....&#62;
To&#58; goc@....
cc&#58; hs@....
Subject&#58; RSV problems at OU_OSCET_ATLAS after changing uid of condor user
Date-Sent&#58; Tuesday, September 27, 2016 4&#58;29 AM -0500

Hi all,

I just noticed that we apparently broke parts of RSV -- well, probably
condor_cron -- when we changed the uid of the condor user at OU_OSCER_ATLAS
last Monday, Sep 19, around 5pm.

We did this in order to be able to move the htcondor-ce-spool directory
to a Lustre partition, which was only possible if condor was known
to the Lustre appliance, therefore we had to make condor an LDAP user,
and as such we needed to change the uid.

We think we chaged the ownership of all files owned by condor,
and we&#39;re pretty sure we found them all, and we looked for the condor uid
in all the OSG files we could think of, and couldn&#39;t find it anywhere.

But obviously we missed something, since quite a few things are broken
in RSV now&#58;

<a href='https&#58;//grid1.oscer.ou.edu/rsv/' target='_blank' rel='nofollow'>https&#58;//grid1.oscer.ou.edu/rsv/</a>

<a href='http&#58;//myosg.grid.iu.edu/rgstatushistory/index?downtime_attrs_showpast=&amp' target='_blank' rel='nofollow'>http&#58;//myosg.grid.iu.edu/rgstatushistory/index?downtime_attrs_showpast=&amp</a>;account_type=cumulative_hours&amp;ce_account_type=gip_vo&amp;se_account_type=vo_transfer_volume&amp;bdiitree_type=total_
jobs&amp;bdii_object=service&amp;bdii_server=is-
osg&amp;start_type=30daysago&amp;start_date=09%2F27%2F2016&amp;end_type=now&amp;end_date=09%2F27%2F2016&amp;rg=on&amp;rg_sel%5B%5D=89&amp;gridtype=on
&amp;gridtype_1=on&amp;active=on&amp;active_value=1&amp;disable_value=1

What did we miss?
RSV jobs keep getting evicted, so I assume that&#39;s because we somehow
confused condor_cron by this change of condor uid, but where/how?

<div id='show_1996883991' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1996883991'>One thing I just noticed was that the LDAP user condor has a home directory
/home/condor/, which doesn&#39;t actually exist. Is that a problem for
condor_cron/RSV? I believe before the change, the local condor user
had its home directory in /var/lib/condor/ (since cndrcron has its
home directory in /var/lib/condor-cron/), and we did change the uid
of the entire tree /var/lib/condor/ .

Thanks a lot,

Horst
</div><script type='text/javascript'>
        $('#show_1996883991').click(function() {
            $('#detail_1996883991').slideDown("normal");
            $('#show_1996883991').hide();
            $('#hide_1996883991').show();
        });
        $('#hide_1996883991').click(function() {
            $('#detail_1996883991').slideUp();
            $('#hide_1996883991').hide();
            $('#show_1996883991').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F31356">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 31356});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
