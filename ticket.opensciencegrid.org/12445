<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[12445] OSG CRITICAL&#58; osg-ce 3.1.6 rsv probe failure</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=12445" method="post">
<div class="page-header">
    <h3><span class="muted">12445</span> / OSG CRITICAL&#58; osg-ce 3.1.6 rsv probe failure</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Bob Ball</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Assess ticket/Determine NAI</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2012-07-31</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">Neha Sharma <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">Doug Strain <span class="muted"> / OSG Storage Team</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=12445", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/12445?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/12445?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20OSG%20CRITICAL%26%2358%3B%20osg-ce%203.1.6%20rsv%20probe%20failure%20ISSUE%3D12445%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='12445#1343832334'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-08-01T14:45:34+00:00">Aug 1, 2012 02:45 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1343832334">&nbsp;</a></div><pre>Closing this ticket.  We&#39;re still working on the other.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='12445#1343779148'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T23:59:08+00:00">Jul 31, 2012 11:59 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1343779148">&nbsp;</a></div><pre>You &#34;see&#34; before you a happy man.  Setting up a service_proxy refreshed
by my cert turned the trick.

Now, if the gratia.condor probe ticket of mine gets cleared, I can sleep
peacefully.  Modulo successful jobs.

bob

[gate01&#58;config.d]# rsv-control --run --host head01.aglt2.org
org.osg.srm.srmcp-readwrite

Running metric org.osg.srm.srmcp-readwrite&#58;

metricName&#58; org.osg.srm.srmcp-readwrite
metricType&#58; status
timestamp&#58; 2012-07-31 19&#58;46&#58;40 EDT
metricStatus&#58; OK
serviceType&#58; OSG-SRM
serviceURI&#58; head01.aglt2.org
gatheredAt&#58; gate01.aglt2.org
summaryData&#58; OK
detailsData&#58; Successful transfer to remote host.
Successful transfer from remote host.
Original file and received file are identical.
Remote file was properly listed using srm-ls.

EOT

On 7/31/2012 7&#58;20 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12445#1343776808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T23:20:08+00:00">Jul 31, 2012 11:20 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1343776808">&nbsp;</a></div><pre>Ah, the proxy seems a likely candidate.  I am going to point it to my
own proxy, that was previously used by the rsvuser account, and that is
still being refreshed.  If that does not help, I&#39;ll look for the logs as
well.

We manually modified the previous probe to add the space token.  As I
said though, it was using srmcp, not srm-copy.  I don&#39;t think that we
have a token-free area of dCache though.  I&#39;ll double check that.

[gate01&#58;probes]# diff srmcp-srm-probe srmcp-srm-probe.orig
103c103
&#60;     my $srmcp_cmd = &#34;$o{&#39;srmcpCmd&#39;} -space_token=5904816 -streams_num=1 -srm_protocol_version=&#34;.
---
<font color='#7F7E6F'>&#62;     my $srmcp_cmd = &#34;$o{&#39;srmcpCmd&#39;} -streams_num=1 -srm_protocol_version=&#34;.</font>
109c109
&#60;     $srmcp_cmd = &#34;$o{&#39;srmcpCmd&#39;} -space_token=5904816 -streams_num=1 -srm_protocol_version=&#34;.
---
<font color='#7F7E6F'>&#62;     $srmcp_cmd = &#34;$o{&#39;srmcpCmd&#39;} -streams_num=1 -srm_protocol_version=&#34;.</font>

bob

On 7/31/2012 5&#58;50 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12445#1343771437'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T21:50:37+00:00">Jul 31, 2012 09:50 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1343771437">&nbsp;</a></div><pre>Bob
I see you are using 3 slashes in your source URL. These have to be increased to 4. So, for example your source url would look like
file&#58;////usr/share/rsv/probe-helper-files/storage-probe-test-file

But that is probably not the reason for authentication failures.
- Does such a failed request reach SRM server at all? If so, what do you see in the SRM server logs?
- What authorization modules are enabled for your dCache install? and in what order? Do you have the appropriate files for them - such as storage-authzdb, gridvo-rolemap and if you do does this DN exist and get mapped to local user correctly?

Also, as Doug mentioned, please confirm the proxy is valid.

-Neha</pre></div><div class='update_description'><i onclick="document.location='12445#1343769676'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T21:21:16+00:00">Jul 31, 2012 09:21 PM UTC</time><a class="anchor" name="1343769676">&nbsp;</a></div><pre>Hello,

I have brought Neha, a dCache expert, in on the ticket.  It still seems to be an authentication problem with the /tmp/rsv_proxy file.  The srm-copy is failing with a SRM_AUTHENTICATION_FAILURE and the srm-ping does not return a backend_version.  This is indicative of an authentication problem with the proxy.  RSV is probably generating /tmp/rsv_proxy from the service cert/key that you&#39;ve specified.  Is this certificate given privileges on the dCache installation?

Can you do &#34;X509_USER_PROXY=/tmp/rsv_proxy voms-proxy-info -all&#34; to see what the information this proxy contains?

Lastly, I don&#39;t think space_tokens are supported for RSV probes, so if a space token is necessary, I don&#39;t think it will work.

Doug Strain
OSG Software

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12445#1343764747'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T19:59:07+00:00">Jul 31, 2012 07:59 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1343764747">&nbsp;</a></div><pre>Progress.  But...

rpms loaded, and I have now set all 3 of the items below.  The
directions seemed to indicate that DEFAULT would result in just those
settings.  I now have them set as
service_cert  = /etc/grid-security/rsv/rsvcert.pem
service_key  = /etc/grid-security/rsv/rsvkey.pem
service_proxy = /tmp/rsvproxy

I did &#34;osg-configure -c and &#34;service rsv restart&#34;

However, this still fails.  It appears to me to be running as if we are
a Bestman implementation, not a dCache implementation.  If I add
&#34;space_token=5904816&#34; to the args, it simply tells me that is not allowed&#58;
Stderr&#58;
Unknown option&#58; space_token

The full log, with the rpms installed, no space_token option, and the
above set of macros in place, is the following.  Note that it is running
srm-copy, not srmcp as the pacman installation ran.
[gate01&#58;head01.aglt2.org]# which srm-copy
/usr/bin/srm-copy
[gate01&#58;head01.aglt2.org]# which srmcp
/usr/bin/srmcp
[gate01&#58;head01.aglt2.org]# rpm -qf /usr/bin/srm-copy
bestman2-client-2.2.1-3.osg.el5
[gate01&#58;head01.aglt2.org]# rpm -qf /usr/bin/srmcp
dcache-srmclient-1.9.5.23-4

===================================
[gate01&#58;head01.aglt2.org]# rsv-control --run --host head01.aglt2.org
org.osg.srm.srmcp-readwrite

Running metric org.osg.srm.srmcp-readwrite&#58;

<div id='show_199376564' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_199376564'>metricName&#58; org.osg.srm.srmcp-readwrite
metricType&#58; status
timestamp&#58; 2012-07-31 15&#58;54&#58;44 EDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-SRM
serviceURI&#58; head01.aglt2.org
gatheredAt&#58; gate01.aglt2.org
summaryData&#58; CRITICAL
detailsData&#58; Failed to transfer file to remote server.
Command&#58; srm-copy
file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
<a href='srm&#58;//head01.aglt2.org/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343764481.3149370' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343764481.3149370</a>
2&#62;&1
Output from srm-copy&#58;
srm-copy   2.2.2.2.1  Wed May  9 09&#58;46&#58;08 PDT 2012
BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>

Built on dm.lbl.gov 128.3.30.104 at 05/09/2012 09&#58;49&#58;24 PDT

Built on ${myhost.NAME}.${myhost.DOMAIN} ${myhost.ADDR4} at 06/12/2012
15&#58;18&#58;55 CDT

SRM-CLIENT&#58; Tue Jul 31 15&#58;54&#58;42 EDT 2012 Connecting to
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2

SRM-CLIENT&#58; Tue Jul 31 15&#58;54&#58;42 EDT 2012 Calling SrmPrepareToPutRequest
now ...
request.token =null
Request.status=SRM_AUTHENTICATION_FAILURE
explanation=SRM Authentication failed
SRM-CLIENT&#58; printPutResult&#58;SRM returns null getArrayOfFileStatuses
SRM-CLIENT&#58; Explanation from responseBuffer=SRM Authentication
failedSRM_AUTHENTICATION_FAILURE

SRM-CLIENT&#58; Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=0
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=null
SRM-CLIENT*REQUEST_STATUS=SRM_AUTHENTICATION_FAILURE
SRM-CLIENT*REQUEST_EXPLANATION=SRM Authentication failed
SRM-CLIENT*SOURCEURL[0]=file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
SRM-CLIENT*TARGETURL[0]=<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343764481.3149370' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343764481.3149370</a>

EOT

bob

On 7/31/2012 3&#58;24 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_199376564').click(function() {
            $('#detail_199376564').slideDown("normal");
            $('#show_199376564').hide();
            $('#hide_199376564').show();
        });
        $('#hide_199376564').click(function() {
            $('#detail_199376564').slideUp();
            $('#hide_199376564').hide();
            $('#show_199376564').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12445#1343762691'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T19:24:51+00:00">Jul 31, 2012 07:24 PM UTC</time><a class="anchor" name="1343762691">&nbsp;</a></div><pre>Hello,

So, I am looking at the RSV results for your server here&#58;
<a href='https&#58;//gate01.aglt2.org&#58;8443/rsv/head01.aglt2.org.html#org.osg.srm.srmcp-readwrite' target='_blank' rel='nofollow'>https&#58;//gate01.aglt2.org&#58;8443/rsv/head01.aglt2.org.html#org.osg.srm.srmcp-readwrite</a>

I see two issues.  The first is that you are missing some dependencies.  This was an issue with the packaging that we discovered last week and is being corrected in the release happening today&#58;
/usr/bin/build-classpath&#58; error&#58; Could not find joda-time Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find vomsjapi Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-trustmanager Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-util-java Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Some specified jars were not found
You can fix this by &#34;yum install joda-time vomsjapi glite-security-trustmanager glite-security-util-java&#34;

The second is that there is an authentication failure.  This could be caused by the missing libraries above, but it may also be a missing proxy.
I noticed&#58;
service_cert  = DEFAULT
service_key  = DEFAULT
service_proxy = DEFAULT
I am not exactly sure what the behavior is when all are specified as default, but I think it picks up the proxy from /tmp/rsv_proxy to use to authenticate to the SE.  Does this proxy exist and owned by rsv?  You may want to explicitly set these attributes rather than leave them as DEFAULT.

Doug Strain
OSG Software

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12445#1343761867'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T19:11:07+00:00">Jul 31, 2012 07:11 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1343761867">&nbsp;</a></div><pre>I have fixed the other probes by changing from condor-g True to False,
which pointed up the missing rsv user home directory on gate02 (I did
not install rsv there as it was not going to run.... perhaps not the
best assumption).

That still leaves all the issues for srmcp-readwrite in this ticket, and
I desperately need a solution for that so we can come back online here.

Any progress or suggestions?

bob

On 7/31/2012 11&#58;29 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12445#1343748548'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T15:29:08+00:00">Jul 31, 2012 03:29 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1343748548">&nbsp;</a></div><pre>ON gate01, the rsv host, I have the following.  I have NOT specified the
port on the srm_hosts, assuming the default would be used?  What is that
default?

[RSV]
enabled = True
enable_gratia = True
service_cert  = DEFAULT
service_key  = DEFAULT
service_proxy = DEFAULT
ce_hosts = gate01.aglt2.org,gate02.grid.umich.edu
gridftp_hosts = DEFAULT
gridftp_dir = DEFAULT
gratia_probes = metric,condor
gums_hosts =
linat02.grid.umich.edu,linat03.grid.umich.edu,linat04.grid.umich.edu
srm_hosts = head01.aglt2.org
srm_dir = /pnfs/aglt2.org/atlasscratchdisk
srm_webservice_path = srm/managerv2
enable_local_probes = True
enable_nagios = False
nagios_send_nsca = False
condor_location = UNAVAILABLE

I browsed the page below extensively to reach this point.

bob

On 7/31/2012 11&#58;02 AM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12445#1343746972'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T15:02:52+00:00">Jul 31, 2012 03:02 PM UTC</time><a class="anchor" name="1343746972">&nbsp;</a></div><pre>You will probably need to modify the file /etc/osg/config.d/30-rsv.ini.  Make sure the settings in this file are correct.

In particular, check the following attributes&#58;

srm_hosts = host1&#58;port1,host2&#58;port2
srm_dir = /mount/point/for/host1,/mount/point/for/host2
srm_webservice_path = srm/v2/server,srm/managerv2

Each of these should be a comma-separated list of SE&#39;s to monitor.  In your case, you should make sure that srm_webservice_path is set to &#34;srm/managerv2&#34; and not &#34;srm/v2/server&#34;

For more information, you can look at the below page&#58;
<a href='https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/RSVStorageProbes#Configuring_RSV_for_storage' target='_blank' rel='nofollow'>https&#58;//www.opensciencegrid.org/bin/view/Documentation/Release3/RSVStorageProbes#Configuring_RSV_for_storage</a>

Doug Strain
OSG Software

-- by Douglas Strain</pre></div><div class='update_description'><i onclick="document.location='12445#1343746395'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T14:53:15+00:00">Jul 31, 2012 02:53 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1343746395">&nbsp;</a></div><pre>Another problem.  rsv on gate01.aglt2.org cannot run Condor-G probes to
gate02.grid.umich.edu.  For example&#58;

[gate01&#58;gate01.aglt2.org]# rsv-control --run --host
gate02.grid.umich.edu org.osg.certificates.crl-expiry

Running metric org.osg.certificates.crl-expiry&#58;

metricName&#58; org.osg.certificates.crl-expiry
metricType&#58; status
timestamp&#58; 2012-07-31 10&#58;47&#58;51 EDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-CE
serviceURI&#58; gate02.grid.umich.edu
gatheredAt&#58; gate01.aglt2.org
summaryData&#58; CRITICAL
detailsData&#58; Condor-G submission failed to remote host

Condor log file&#58;
000 (269.000.000) 07/31 10&#58;47&#58;41 Job submitted from host&#58; &#60;127.0.0.1&#58;38401&#62;
...
018 (269.000.000) 07/31 10&#58;47&#58;50 Globus job submission failed!
Reason&#58; 22 the job manager failed to create an internal script
argument file
...

EOT

bob

On 7/30/2012 10&#58;23 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='12445#1343746244'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T14:50:44+00:00">Jul 31, 2012 02:50 PM UTC</time> by <b>Alain Roy</b><a class="anchor" name="1343746244">&nbsp;</a></div><pre>Thanks for the report. This sounds very familiar to me, but I&#39;m not 100% certain of the answer. I&#39;ve added Doug Strain to the ticket, and I think he can address it. Doug?

-alain
------------------------------------
Alain Roy
OSG Software Support
vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='12445#1343736564'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T12:09:24+00:00">Jul 31, 2012 12:09 PM UTC</time> by <b>echism</b><a class="anchor" name="1343736564">&nbsp;</a></div><pre>Sending to software support

From&#58; Bob Ball &#60;ball@....&#62;
To&#58; OSG Operations Center &#60;goc@....&#62;
cc&#58; Bob Ball &#60;ball@....&#62;
Subject&#58; CRITICAL&#58; osg-ce 3.1.6 rsv probe failure
Date-Sent&#58; Monday, July 30, 2012 10&#58;16 PM -0400

I installed osg-ce rpms today on my previously pacman-installed CE (1.2.29).  The
srmcp-readwrite probe for AGLT2_SE.  It looks for all the world like rsv thinks I
have a Bestman installation instead of a dCache 1.9 installation.  AGLT2 is down
until this can be resolved.

I have the following set&#58;
[SE AGLT2_SE]
enabled = True
name = SE_AGLT2_SE
srm_endpoint = httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
provider_implementation = dcache19
implementation = dcache
version = 1.9.12-21
default_path = /atlas/osghome/VONAME
infoprovider_endpoint = <a href='http&#58;//head01.aglt2.org&#58;2288/info' target='_blank' rel='nofollow'>http&#58;//head01.aglt2.org&#58;2288/info</a>

I tried srmclient-copy instead of the chosen srmcp-readwrite probe, but got no better
results.

-------------------------------
For srmcp-readwrite, the interactive probe run shows the following&#58;
[gate01&#58;metrics]# rsv-control --run --host head01.aglt2.org org.osg.srm.srmcp-readwrite

Running metric org.osg.srm.srmcp-readwrite&#58;

metricName&#58; org.osg.srm.srmcp-readwrite
metricType&#58; status
<div id='show_954083202' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_954083202'>timestamp&#58; 2012-07-30 22&#58;07&#58;43 EDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-SRM
serviceURI&#58; head01.aglt2.org
gatheredAt&#58; gate01.aglt2.org
summaryData&#58; CRITICAL
detailsData&#58; Failed to transfer file to remote server.
Command&#58; srm-copy file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
<a href='srm&#58;//head01.aglt2.org/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343700460.2498993' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343700460.2498993</a>
2&#62;&1
Output from srm-copy&#58;
/usr/bin/build-classpath&#58; error&#58; Could not find joda-time Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find vomsjapi Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-trustmanager Java
extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-util-java Java
extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Some specified jars were not found
srm-copy   2.2.2.2.1  Wed May  9 09&#58;46&#58;08 PDT 2012
BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>

Built on dm.lbl.gov 128.3.30.104 at 05/09/2012 09&#58;49&#58;24 PDT

Built on ${myhost.NAME}.${myhost.DOMAIN} ${myhost.ADDR4} at 06/12/2012 15&#58;18&#58;55 CDT

SRM-CLIENT&#58; Mon Jul 30 22&#58;07&#58;41 EDT 2012 Connecting to
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2

SRM-CLIENT&#58; Mon Jul 30 22&#58;07&#58;41 EDT 2012 Calling SrmPrepareToPutRequest now ...
request.token =null
Request.status=SRM_AUTHENTICATION_FAILURE
explanation=SRM Authentication failed
SRM-CLIENT&#58; printPutResult&#58;SRM returns null getArrayOfFileStatuses
SRM-CLIENT&#58; Explanation from responseBuffer=SRM Authentication
failedSRM_AUTHENTICATION_FAILURE

SRM-CLIENT&#58; Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=0
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=null
SRM-CLIENT*REQUEST_STATUS=SRM_AUTHENTICATION_FAILURE
SRM-CLIENT*REQUEST_EXPLANATION=SRM Authentication failed
SRM-CLIENT*SOURCEURL[0]=file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
SRM-CLIENT*TARGETURL[0]=<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343700460.2498993' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343700460.2498993</a>

------------------------------
for srmclient-copy, I get
[gate01&#58;metrics]# rsv-control --run --host head01.aglt2.org org.osg.srm.srmclient-copy

Running metric org.osg.srm.srmclient-copy&#58;

metricName&#58; org.osg.srm.srmclient-copy
metricType&#58; status
timestamp&#58; 2012-07-30 22&#58;00&#58;54 EDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-SRM
serviceURI&#58; head01.aglt2.org
gatheredAt&#58; gate01.aglt2.org
summaryData&#58; CRITICAL
detailsData&#58; ;SRM server either failed to receive the file, to copy file, or would
not list the file.

Command output&#58;
/usr/bin/build-classpath&#58; error&#58; Could not find joda-time Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find vomsjapi Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-trustmanager Java
extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-util-java Java
extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Some specified jars were not found
srm-copy   2.2.2.2.1  Wed May  9 09&#58;46&#58;08 PDT 2012
BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>

Built on dm.lbl.gov 128.3.30.104 at 05/09/2012 09&#58;49&#58;24 PDT

Built on ${myhost.NAME}.${myhost.DOMAIN} ${myhost.ADDR4} at 06/12/2012 15&#58;18&#58;55 CDT

SRM-CLIENT&#58; Mon Jul 30 22&#58;00&#58;46 EDT 2012 Connecting to
httpg&#58;//head01.aglt2.org&#58;8443/srm/v2/server

SRM-CLIENT&#58; Mon Jul 30 22&#58;00&#58;46 EDT 2012 Calling SrmPrepareToPutRequest now ...
SoapCallThread.Exception=The AXIS engine could not find a target service to invoke!
targetService is v2/server
[ and so on ]

------------------------------------
Interestingly, earlier today I was getting only help listings from the
srmcp-readwrite.  Now I see this&#58;
request.token =null
This is a space-token protected area, and the correct token used with the pacman osg
ce was &#34;-space_token=5904816&#34;

Is there a way to specify this?

Thanks,
bob
</div><script type='text/javascript'>
        $('#show_954083202').click(function() {
            $('#detail_954083202').slideDown("normal");
            $('#show_954083202').hide();
            $('#hide_954083202').show();
        });
        $('#hide_954083202').click(function() {
            $('#detail_954083202').slideUp();
            $('#hide_954083202').hide();
            $('#show_954083202').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='12445#1343701374'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2012-07-31T02:22:54+00:00">Jul 31, 2012 02:22 AM UTC</time> by <b>Ricky Pirtle</b><a class="anchor" name="1343701374">&nbsp;</a></div><pre>From&#58; Bob Ball &#60;ball@....&#62;
To&#58; OSG Operations Center &#60;goc@....&#62;
cc&#58; Bob Ball &#60;ball@....&#62;
Subject&#58; CRITICAL&#58; osg-ce 3.1.6 rsv probe failure
Date-Sent&#58; Monday, July 30, 2012 10&#58;16 PM -0400

I installed osg-ce rpms today on my previously pacman-installed CE (1.2.29).  The
srmcp-readwrite probe for AGLT2_SE.  It looks for all the world like rsv thinks I
have a Bestman installation instead of a dCache 1.9 installation.  AGLT2 is down
until this can be resolved.

I have the following set&#58;
[SE AGLT2_SE]
enabled = True
name = SE_AGLT2_SE
srm_endpoint = httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2
provider_implementation = dcache19
implementation = dcache
version = 1.9.12-21
default_path = /atlas/osghome/VONAME
infoprovider_endpoint = <a href='http&#58;//head01.aglt2.org&#58;2288/info' target='_blank' rel='nofollow'>http&#58;//head01.aglt2.org&#58;2288/info</a>

I tried srmclient-copy instead of the chosen srmcp-readwrite probe, but got no better
results.

-------------------------------
For srmcp-readwrite, the interactive probe run shows the following&#58;
[gate01&#58;metrics]# rsv-control --run --host head01.aglt2.org org.osg.srm.srmcp-readwrite

Running metric org.osg.srm.srmcp-readwrite&#58;

metricName&#58; org.osg.srm.srmcp-readwrite
metricType&#58; status
timestamp&#58; 2012-07-30 22&#58;07&#58;43 EDT
metricStatus&#58; CRITICAL
<div id='show_131533552' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_131533552'>serviceType&#58; OSG-SRM
serviceURI&#58; head01.aglt2.org
gatheredAt&#58; gate01.aglt2.org
summaryData&#58; CRITICAL
detailsData&#58; Failed to transfer file to remote server.
Command&#58; srm-copy file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
<a href='srm&#58;//head01.aglt2.org/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343700460.2498993' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343700460.2498993</a>
2&#62;&amp;1
Output from srm-copy&#58;
/usr/bin/build-classpath&#58; error&#58; Could not find joda-time Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find vomsjapi Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-trustmanager Java
extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-util-java Java
extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Some specified jars were not found
srm-copy   2.2.2.2.1  Wed May  9 09&#58;46&#58;08 PDT 2012
BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>

Built on dm.lbl.gov 128.3.30.104 at 05/09/2012 09&#58;49&#58;24 PDT

Built on ${myhost.NAME}.${myhost.DOMAIN} ${myhost.ADDR4} at 06/12/2012 15&#58;18&#58;55 CDT

SRM-CLIENT&#58; Mon Jul 30 22&#58;07&#58;41 EDT 2012 Connecting to
httpg&#58;//head01.aglt2.org&#58;8443/srm/managerv2

SRM-CLIENT&#58; Mon Jul 30 22&#58;07&#58;41 EDT 2012 Calling SrmPrepareToPutRequest now ...
request.token =null
Request.status=SRM_AUTHENTICATION_FAILURE
explanation=SRM Authentication failed
SRM-CLIENT&#58; printPutResult&#58;SRM returns null getArrayOfFileStatuses
SRM-CLIENT&#58; Explanation from responseBuffer=SRM Authentication
failedSRM_AUTHENTICATION_FAILURE

SRM-CLIENT&#58; Printing text report now ...

SRM-CLIENT*REQUESTTYPE=put
SRM-CLIENT*TOTALFILES=1
SRM-CLIENT*TOTAL_SUCCESS=0
SRM-CLIENT*TOTAL_FAILED=0
SRM-CLIENT*REQUEST_TOKEN=null
SRM-CLIENT*REQUEST_STATUS=SRM_AUTHENTICATION_FAILURE
SRM-CLIENT*REQUEST_EXPLANATION=SRM Authentication failed
SRM-CLIENT*SOURCEURL[0]=file&#58;///usr/share/rsv/probe-helper-files/storage-probe-test-file
SRM-CLIENT*TARGETURL[0]=<a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343700460.2498993' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasscratchdisk/storage-probe-test-file.1343700460.2498993</a>

------------------------------
for srmclient-copy, I get
[gate01&#58;metrics]# rsv-control --run --host head01.aglt2.org org.osg.srm.srmclient-copy

Running metric org.osg.srm.srmclient-copy&#58;

metricName&#58; org.osg.srm.srmclient-copy
metricType&#58; status
timestamp&#58; 2012-07-30 22&#58;00&#58;54 EDT
metricStatus&#58; CRITICAL
serviceType&#58; OSG-SRM
serviceURI&#58; head01.aglt2.org
gatheredAt&#58; gate01.aglt2.org
summaryData&#58; CRITICAL
detailsData&#58; ;SRM server either failed to receive the file, to copy file, or would
not list the file.

Command output&#58;
/usr/bin/build-classpath&#58; error&#58; Could not find joda-time Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find vomsjapi Java extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-trustmanager Java
extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Could not find glite-security-util-java Java
extension for this JVM
/usr/bin/build-classpath&#58; error&#58; Some specified jars were not found
srm-copy   2.2.2.2.1  Wed May  9 09&#58;46&#58;08 PDT 2012
BeStMan and SRM-Clients Copyright(c) 2007-2012,
Lawrence Berkeley National Laboratory. All rights reserved.
Support at SRM@.... and documents at <a href='http&#58;//sdm.lbl.gov/bestman' target='_blank' rel='nofollow'>http&#58;//sdm.lbl.gov/bestman</a>

Built on dm.lbl.gov 128.3.30.104 at 05/09/2012 09&#58;49&#58;24 PDT

Built on ${myhost.NAME}.${myhost.DOMAIN} ${myhost.ADDR4} at 06/12/2012 15&#58;18&#58;55 CDT

SRM-CLIENT&#58; Mon Jul 30 22&#58;00&#58;46 EDT 2012 Connecting to
httpg&#58;//head01.aglt2.org&#58;8443/srm/v2/server

SRM-CLIENT&#58; Mon Jul 30 22&#58;00&#58;46 EDT 2012 Calling SrmPrepareToPutRequest now ...
SoapCallThread.Exception=The AXIS engine could not find a target service to invoke!
targetService is v2/server
[ and so on ]

------------------------------------
Interestingly, earlier today I was getting only help listings from the
srmcp-readwrite.  Now I see this&#58;
request.token =null
This is a space-token protected area, and the correct token used with the pacman osg
ce was &#34;-space_token=5904816&#34;

Is there a way to specify this?

Thanks,
bob
</div><script type='text/javascript'>
        $('#show_131533552').click(function() {
            $('#detail_131533552').slideDown("normal");
            $('#show_131533552').hide();
            $('#hide_131533552').show();
        });
        $('#hide_131533552').click(function() {
            $('#detail_131533552').slideUp();
            $('#hide_131533552').hide();
            $('#show_131533552').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F12445">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 12445});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
